<!DOCTYPE html><html lang="uk"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Mock Functions · Jest</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="Mock functions allow you to test the links between code by erasing the actual implementation of a function, capturing calls to the function (and the parameters passed in those calls), capturing instances of constructor functions when instantiated with `new`, and allowing test-time configuration of return values."/><meta name="docsearch:version" content="24.8"/><meta name="docsearch:language" content="uk"/><meta property="og:title" content="Mock Functions · Jest"/><meta property="og:type" content="website"/><meta property="og:url" content="https://jestjs.io/"/><meta property="og:description" content="Mock functions allow you to test the links between code by erasing the actual implementation of a function, capturing calls to the function (and the parameters passed in those calls), capturing instances of constructor functions when instantiated with `new`, and allowing test-time configuration of return values."/><meta property="og:image" content="https://jestjs.io/img/opengraph.png"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://jestjs.io/img/jest.png"/><link rel="shortcut icon" href="/img/favicon/favicon.ico"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><link rel="alternate" type="application/atom+xml" href="https://jestjs.io/blog/atom.xml" title="Jest Blog ATOM Feed"/><link rel="alternate" type="application/rss+xml" href="https://jestjs.io/blog/feed.xml" title="Jest Blog RSS Feed"/><script>
              (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
              (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
              m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
              })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

              ga('create', 'UA-44373548-17', 'auto');
              ga('send', 'pageview');
            </script><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script src="/js/scrollSpy.js"></script><link rel="stylesheet" href="/css/main.css"/><script src="/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/uk"><img class="logo" src="/img/jest.svg" alt="Jest"/><h2 class="headerTitleWithLogo">Jest</h2></a><a href="/uk/versions"><h3>24.8</h3></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="siteNavGroupActive"><a href="/docs/uk/24.8/getting-started" target="_self">Документація</a></li><li class="siteNavGroupActive"><a href="/docs/uk/24.8/api" target="_self">API</a></li><li class=""><a href="/uk/help" target="_self">Допомога</a></li><li class=""><a href="/blog/" target="_self">Блог</a></li><span><li><a id="languages-menu" href="#"><img class="languages-icon" src="/img/language.svg" alt="Languages icon"/>Українська</a><div id="languages-dropdown" class="hide"><ul id="languages-dropdown-items"><li><a href="/docs/en/24.8/mock-functions">English</a></li><li><a href="/docs/ja/24.8/mock-functions">日本語</a></li><li><a href="/docs/es-ES/24.8/mock-functions">Español</a></li><li><a href="/docs/pt-BR/24.8/mock-functions">Português (Brasil)</a></li><li><a href="/docs/ro/24.8/mock-functions">Română</a></li><li><a href="/docs/ru/24.8/mock-functions">Русский</a></li><li><a href="/docs/zh-Hans/24.8/mock-functions">简体中文</a></li></ul></div></li><script>
        const languagesMenuItem = document.getElementById("languages-menu");
        const languagesDropDown = document.getElementById("languages-dropdown");
        languagesMenuItem.addEventListener("click", function(event) {
          event.preventDefault();

          if (languagesDropDown.className == "hide") {
            languagesDropDown.className = "visible";
          } else {
            languagesDropDown.className = "hide";
          }
        });
      </script></span><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li><li class=""><a href="https://github.com/facebook/jest" target="_self">GitHub</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>Introduction</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle">Introduction</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/uk/24.8/getting-started">Getting Started</a></li><li class="navListItem"><a class="navItem" href="/docs/uk/24.8/using-matchers">Using Matchers</a></li><li class="navListItem"><a class="navItem" href="/docs/uk/24.8/asynchronous">Testing Asynchronous Code</a></li><li class="navListItem"><a class="navItem" href="/docs/uk/24.8/setup-teardown">Setup and Teardown</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/docs/uk/24.8/mock-functions">Mock Functions</a></li><li class="navListItem"><a class="navItem" href="/docs/uk/24.8/jest-platform">Jest Platform</a></li><li class="navListItem"><a class="navItem" href="/docs/uk/24.8/jest-community">Jest Community</a></li><li class="navListItem"><a class="navItem" href="/docs/uk/24.8/more-resources">More Resources</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Guides</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/uk/24.8/snapshot-testing">Snapshot Testing</a></li><li class="navListItem"><a class="navItem" href="/docs/uk/24.8/tutorial-async">An Async Example</a></li><li class="navListItem"><a class="navItem" href="/docs/uk/24.8/timer-mocks">Timer Mocks</a></li><li class="navListItem"><a class="navItem" href="/docs/uk/24.8/manual-mocks">Manual Mocks</a></li><li class="navListItem"><a class="navItem" href="/docs/uk/24.8/es6-class-mocks">ES6 Class Mocks</a></li><li class="navListItem"><a class="navItem" href="/docs/uk/24.8/bypassing-module-mocks">Bypassing module mocks</a></li><li class="navListItem"><a class="navItem" href="/docs/uk/24.8/webpack">Using with webpack</a></li><li class="navListItem"><a class="navItem" href="/docs/uk/24.8/puppeteer">Using with puppeteer</a></li><li class="navListItem"><a class="navItem" href="/docs/uk/24.8/mongodb">Using with MongoDB</a></li><li class="navListItem"><a class="navItem" href="/docs/uk/24.8/dynamodb">Using with DynamoDB</a></li><li class="navListItem"><a class="navItem" href="/docs/uk/24.8/tutorial-jquery">DOM Manipulation</a></li><li class="navListItem"><a class="navItem" href="/docs/uk/24.8/watch-plugins">Watch Plugins</a></li><li class="navListItem"><a class="navItem" href="/docs/uk/24.8/migration-guide">Migrating to Jest</a></li><li class="navListItem"><a class="navItem" href="/docs/uk/24.8/troubleshooting">Troubleshooting</a></li><li class="navListItem"><a class="navItem" href="/docs/uk/24.8/architecture">Architecture</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Фреймворк посібники</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/uk/24.8/tutorial-react">Testing React Apps</a></li><li class="navListItem"><a class="navItem" href="/docs/uk/24.8/tutorial-react-native">Testing React Native Apps</a></li><li class="navListItem"><a class="navItem" href="/docs/uk/24.8/testing-frameworks">Testing Web Frameworks</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">API Reference</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/uk/24.8/api">Globals</a></li><li class="navListItem"><a class="navItem" href="/docs/uk/24.8/expect">Expect</a></li><li class="navListItem"><a class="navItem" href="/docs/uk/24.8/mock-function-api">Mock Functions</a></li><li class="navListItem"><a class="navItem" href="/docs/uk/24.8/jest-object">The Jest Object</a></li><li class="navListItem"><a class="navItem" href="/docs/uk/24.8/configuration">Configuring Jest</a></li><li class="navListItem"><a class="navItem" href="/docs/uk/24.8/cli">Jest CLI Options</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="https://github.com/facebook/jest/edit/master/docs/MockFunctions.md" target="_blank" rel="noreferrer noopener">Edit</a><h1 id="__docusaurus" class="postHeaderTitle">Mock Functions</h1></header><article><div><span><p>Mock functions allow you to test the links between code by erasing the actual implementation of a function, capturing calls to the function (and the parameters passed in those calls), capturing instances of constructor functions when instantiated with <code>new</code>, and allowing test-time configuration of return values.</p>
<p>There are two ways to mock functions: Either by creating a mock function to use in test code, or writing a <a href="/docs/uk/24.8/manual-mocks"><code>manual mock</code></a> to override a module dependency.</p>
<h2><a class="anchor" aria-hidden="true" id="використвання-імітацій-функцій"></a><a href="#використвання-імітацій-функцій" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Використвання імітацій функцій</h2>
<p>Let's imagine we're testing an implementation of a function <code>forEach</code>, which invokes a callback for each item in a supplied array.</p>
<pre><code class="hljs css language-javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">forEach</span>(<span class="hljs-params">items, callback</span>) </span>{
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> index = <span class="hljs-number">0</span>; index &lt; items.length; index++) {
    callback(items[index]);
  }
}
</code></pre>
<p>To test this function, we can use a mock function, and inspect the mock's state to ensure the callback is invoked as expected.</p>
<pre><code class="hljs css language-javascript"><span class="hljs-keyword">const</span> mockCallback = jest.fn(<span class="hljs-function"><span class="hljs-params">x</span> =&gt;</span> <span class="hljs-number">42</span> + x);
forEach([<span class="hljs-number">0</span>, <span class="hljs-number">1</span>], mockCallback);

<span class="hljs-comment">// The mock function is called twice</span>
expect(mockCallback.mock.calls.length).toBe(<span class="hljs-number">2</span>);

<span class="hljs-comment">// The first argument of the first call to the function was 0</span>
expect(mockCallback.mock.calls[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>]).toBe(<span class="hljs-number">0</span>);

<span class="hljs-comment">// The first argument of the second call to the function was 1</span>
expect(mockCallback.mock.calls[<span class="hljs-number">1</span>][<span class="hljs-number">0</span>]).toBe(<span class="hljs-number">1</span>);

<span class="hljs-comment">// The return value of the first call to the function was 42</span>
expect(mockCallback.mock.results[<span class="hljs-number">0</span>].value).toBe(<span class="hljs-number">42</span>);
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="властивість-mock"></a><a href="#властивість-mock" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Властивість <code>.mock</code></h2>
<p>All mock functions have this special <code>.mock</code> property, which is where data about how the function has been called and what the function returned is kept. The <code>.mock</code> property also tracks the value of <code>this</code> for each call, so it is possible to inspect this as well:</p>
<pre><code class="hljs css language-javascript"><span class="hljs-keyword">const</span> myMock = jest.fn();

<span class="hljs-keyword">const</span> a = <span class="hljs-keyword">new</span> myMock();
<span class="hljs-keyword">const</span> b = {};
<span class="hljs-keyword">const</span> bound = myMock.bind(b);
bound();

<span class="hljs-built_in">console</span>.log(myMock.mock.instances);
<span class="hljs-comment">// &gt; [ &lt;a&gt;, &lt;b&gt; ]</span>
</code></pre>
<p>These mock members are very useful in tests to assert how these functions get called, instantiated, or what they returned:</p>
<pre><code class="hljs css language-javascript"><span class="hljs-comment">// The function was called exactly once</span>
expect(someMockFunction.mock.calls.length).toBe(<span class="hljs-number">1</span>);

<span class="hljs-comment">// The first arg of the first call to the function was 'first arg'</span>
expect(someMockFunction.mock.calls[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>]).toBe(<span class="hljs-string">'first arg'</span>);

<span class="hljs-comment">// The second arg of the first call to the function was 'second arg'</span>
expect(someMockFunction.mock.calls[<span class="hljs-number">0</span>][<span class="hljs-number">1</span>]).toBe(<span class="hljs-string">'second arg'</span>);

<span class="hljs-comment">// The return value of the first call to the function was 'return value'</span>
expect(someMockFunction.mock.results[<span class="hljs-number">0</span>].value).toBe(<span class="hljs-string">'return value'</span>);

<span class="hljs-comment">// This function was instantiated exactly twice</span>
expect(someMockFunction.mock.instances.length).toBe(<span class="hljs-number">2</span>);

<span class="hljs-comment">// The object returned by the first instantiation of this function</span>
<span class="hljs-comment">// had a `name` property whose value was set to 'test'</span>
expect(someMockFunction.mock.instances[<span class="hljs-number">0</span>].name).toEqual(<span class="hljs-string">'test'</span>);
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="імітація-повернених-значень"></a><a href="#імітація-повернених-значень" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Імітація повернених значень</h2>
<p>Mock functions can also be used to inject test values into your code during a test:</p>
<pre><code class="hljs css language-javascript"><span class="hljs-keyword">const</span> myMock = jest.fn();
<span class="hljs-built_in">console</span>.log(myMock());
<span class="hljs-comment">// &gt; undefined</span>

myMock
  .mockReturnValueOnce(<span class="hljs-number">10</span>)
  .mockReturnValueOnce(<span class="hljs-string">'x'</span>)
  .mockReturnValue(<span class="hljs-literal">true</span>);

<span class="hljs-built_in">console</span>.log(myMock(), myMock(), myMock(), myMock());
<span class="hljs-comment">// &gt; 10, 'x', true, true</span>
</code></pre>
<p>Mock functions are also very effective in code that uses a functional continuation-passing style. Code written in this style helps avoid the need for complicated stubs that recreate the behavior of the real component they're standing in for, in favor of injecting values directly into the test right before they're used.</p>
<pre><code class="hljs css language-javascript"><span class="hljs-keyword">const</span> filterTestFn = jest.fn();

<span class="hljs-comment">// Make the mock return `true` for the first call,</span>
<span class="hljs-comment">// and `false` for the second call</span>
filterTestFn.mockReturnValueOnce(<span class="hljs-literal">true</span>).mockReturnValueOnce(<span class="hljs-literal">false</span>);

<span class="hljs-keyword">const</span> result = [<span class="hljs-number">11</span>, <span class="hljs-number">12</span>].filter(<span class="hljs-function"><span class="hljs-params">num</span> =&gt;</span> filterTestFn(num));

<span class="hljs-built_in">console</span>.log(result);
<span class="hljs-comment">// &gt; [11]</span>
<span class="hljs-built_in">console</span>.log(filterTestFn.mock.calls);
<span class="hljs-comment">// &gt; [ [11], [12] ]</span>
</code></pre>
<p>Most real-world examples actually involve getting ahold of a mock function on a dependent component and configuring that, but the technique is the same. In these cases, try to avoid the temptation to implement logic inside of any function that's not directly being tested.</p>
<h2><a class="anchor" aria-hidden="true" id="mocking-modules"></a><a href="#mocking-modules" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Mocking Modules</h2>
<p>Suppose we have a class that fetches users from our API. The class uses <a href="https://github.com/axios/axios">axios</a> to call the API then returns the <code>data</code> attribute which contains all the users:</p>
<pre><code class="hljs css language-js"><span class="hljs-comment">// users.js</span>
<span class="hljs-keyword">import</span> axios <span class="hljs-keyword">from</span> <span class="hljs-string">'axios'</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Users</span> </span>{
  <span class="hljs-keyword">static</span> all() {
    <span class="hljs-keyword">return</span> axios.get(<span class="hljs-string">'/users.json'</span>).then(<span class="hljs-function"><span class="hljs-params">resp</span> =&gt;</span> resp.data);
  }
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> Users;
</code></pre>
<p>Now, in order to test this method without actually hitting the API (and thus creating slow and fragile tests), we can use the <code>jest.mock(...)</code> function to automatically mock the axios module.</p>
<p>Once we mock the module we can provide a <code>mockResolvedValue</code> for <code>.get</code> that returns the data we want our test to assert against. In effect, we are saying that we want axios.get('/users.json') to return a fake response.</p>
<pre><code class="hljs css language-js"><span class="hljs-comment">// users.test.js</span>
<span class="hljs-keyword">import</span> axios <span class="hljs-keyword">from</span> <span class="hljs-string">'axios'</span>;
<span class="hljs-keyword">import</span> Users <span class="hljs-keyword">from</span> <span class="hljs-string">'./users'</span>;

jest.mock(<span class="hljs-string">'axios'</span>);

test(<span class="hljs-string">'should fetch users'</span>, () =&gt; {
  <span class="hljs-keyword">const</span> users = [{<span class="hljs-attr">name</span>: <span class="hljs-string">'Bob'</span>}];
  <span class="hljs-keyword">const</span> resp = {<span class="hljs-attr">data</span>: users};
  axios.get.mockResolvedValue(resp);

  <span class="hljs-comment">// or you could use the following depending on your use case:</span>
  <span class="hljs-comment">// axios.get.mockImplementation(() =&gt; Promise.resolve(resp))</span>

  <span class="hljs-keyword">return</span> Users.all().then(<span class="hljs-function"><span class="hljs-params">data</span> =&gt;</span> expect(data).toEqual(users));
});
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="реалізація-імітації"></a><a href="#реалізація-імітації" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Реалізація імітації</h2>
<p>Still, there are cases where it's useful to go beyond the ability to specify return values and full-on replace the implementation of a mock function. This can be done with <code>jest.fn</code> or the <code>mockImplementationOnce</code> method on mock functions.</p>
<pre><code class="hljs css language-javascript"><span class="hljs-keyword">const</span> myMockFn = jest.fn(<span class="hljs-function"><span class="hljs-params">cb</span> =&gt;</span> cb(<span class="hljs-literal">null</span>, <span class="hljs-literal">true</span>));

myMockFn(<span class="hljs-function">(<span class="hljs-params">err, val</span>) =&gt;</span> <span class="hljs-built_in">console</span>.log(val));
<span class="hljs-comment">// &gt; true</span>
</code></pre>
<p>The <code>mockImplementation</code> method is useful when you need to define the default implementation of a mock function that is created from another module:</p>
<pre><code class="hljs css language-js"><span class="hljs-comment">// foo.js</span>
<span class="hljs-built_in">module</span>.exports = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-comment">// some implementation;</span>
};

<span class="hljs-comment">// test.js</span>
jest.mock(<span class="hljs-string">'../foo'</span>); <span class="hljs-comment">// this happens automatically with automocking</span>
<span class="hljs-keyword">const</span> foo = <span class="hljs-built_in">require</span>(<span class="hljs-string">'../foo'</span>);

<span class="hljs-comment">// foo is a mock function</span>
foo.mockImplementation(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> <span class="hljs-number">42</span>);
foo();
<span class="hljs-comment">// &gt; 42</span>
</code></pre>
<p>When you need to recreate a complex behavior of a mock function such that multiple function calls produce different results, use the <code>mockImplementationOnce</code> method:</p>
<pre><code class="hljs css language-javascript"><span class="hljs-keyword">const</span> myMockFn = jest
  .fn()
  .mockImplementationOnce(<span class="hljs-function"><span class="hljs-params">cb</span> =&gt;</span> cb(<span class="hljs-literal">null</span>, <span class="hljs-literal">true</span>))
  .mockImplementationOnce(<span class="hljs-function"><span class="hljs-params">cb</span> =&gt;</span> cb(<span class="hljs-literal">null</span>, <span class="hljs-literal">false</span>));

myMockFn(<span class="hljs-function">(<span class="hljs-params">err, val</span>) =&gt;</span> <span class="hljs-built_in">console</span>.log(val));
<span class="hljs-comment">// &gt; true</span>

myMockFn(<span class="hljs-function">(<span class="hljs-params">err, val</span>) =&gt;</span> <span class="hljs-built_in">console</span>.log(val));
<span class="hljs-comment">// &gt; false</span>
</code></pre>
<p>When the mocked function runs out of implementations defined with <code>mockImplementationOnce</code>, it will execute the default implementation set with <code>jest.fn</code> (if it is defined):</p>
<pre><code class="hljs css language-javascript"><span class="hljs-keyword">const</span> myMockFn = jest
  .fn(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> <span class="hljs-string">'default'</span>)
  .mockImplementationOnce(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> <span class="hljs-string">'first call'</span>)
  .mockImplementationOnce(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> <span class="hljs-string">'second call'</span>);

<span class="hljs-built_in">console</span>.log(myMockFn(), myMockFn(), myMockFn(), myMockFn());
<span class="hljs-comment">// &gt; 'first call', 'second call', 'default', 'default'</span>
</code></pre>
<p>For cases where we have methods that are typically chained (and thus always need to return <code>this</code>), we have a sugary API to simplify this in the form of a <code>.mockReturnThis()</code> function that also sits on all mocks:</p>
<pre><code class="hljs css language-javascript"><span class="hljs-keyword">const</span> myObj = {
  <span class="hljs-attr">myMethod</span>: jest.fn().mockReturnThis(),
};

<span class="hljs-comment">// це те саме що</span>

<span class="hljs-keyword">const</span> otherObj = {
  <span class="hljs-attr">myMethod</span>: jest.fn(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
  }),
};
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="mock-names"></a><a href="#mock-names" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Mock Names</h2>
<p>You can optionally provide a name for your mock functions, which will be displayed instead of &quot;jest.fn()&quot; in test error output. Use this if you want to be able to quickly identify the mock function reporting an error in your test output.</p>
<pre><code class="hljs css language-javascript"><span class="hljs-keyword">const</span> myMockFn = jest
  .fn()
  .mockReturnValue(<span class="hljs-string">'default'</span>)
  .mockImplementation(<span class="hljs-function"><span class="hljs-params">scalar</span> =&gt;</span> <span class="hljs-number">42</span> + scalar)
  .mockName(<span class="hljs-string">'add42'</span>);
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="користувацькі-матчери"></a><a href="#користувацькі-матчери" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Користувацькі матчери</h2>
<p>Finally, in order to make it less demanding to assert how mock functions have been called, we've added some custom matcher functions for you:</p>
<pre><code class="hljs css language-javascript"><span class="hljs-comment">// The mock function was called at least once</span>
expect(mockFunc).toBeCalled();

<span class="hljs-comment">// The mock function was called at least once with the specified args</span>
expect(mockFunc).toBeCalledWith(arg1, arg2);

<span class="hljs-comment">// The last call to the mock function was called with the specified args</span>
expect(mockFunc).lastCalledWith(arg1, arg2);

<span class="hljs-comment">// All calls and the name of the mock is written as a snapshot</span>
expect(mockFunc).toMatchSnapshot();
</code></pre>
<p>These matchers are sugar for common forms of inspecting the <code>.mock</code> property. You can always do this manually yourself if that's more to your taste or if you need to do something more specific:</p>
<pre><code class="hljs css language-javascript"><span class="hljs-comment">// The mock function was called at least once</span>
expect(mockFunc.mock.calls.length).toBeGreaterThan(<span class="hljs-number">0</span>);

<span class="hljs-comment">// The mock function was called at least once with the specified args</span>
expect(mockFunc.mock.calls).toContainEqual([arg1, arg2]);

<span class="hljs-comment">// The last call to the mock function was called with the specified args</span>
expect(mockFunc.mock.calls[mockFunc.mock.calls.length - <span class="hljs-number">1</span>]).toEqual([
  arg1,
  arg2,
]);

<span class="hljs-comment">// The first arg of the last call to the mock function was `42`</span>
<span class="hljs-comment">// (note that there is no sugar helper for this specific of an assertion)</span>
expect(mockFunc.mock.calls[mockFunc.mock.calls.length - <span class="hljs-number">1</span>][<span class="hljs-number">0</span>]).toBe(<span class="hljs-number">42</span>);

<span class="hljs-comment">// A snapshot will check that a mock was invoked the same number of times,</span>
<span class="hljs-comment">// in the same order, with the same arguments. It will also assert on the name.</span>
expect(mockFunc.mock.calls).toEqual([[arg1, arg2]]);
expect(mockFunc.getMockName()).toBe(<span class="hljs-string">'a mock name'</span>);
</code></pre>
<p>Для повного списку матчерів зверніться до <a href="/docs/uk/24.8/expect">довідкової документації</a>.</p>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/docs/uk/24.8/setup-teardown"><span class="arrow-prev">← </span><span>Setup and Teardown</span></a><a class="docs-next button" href="/docs/uk/24.8/jest-platform"><span>Jest Platform</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#використвання-імітацій-функцій">Використвання імітацій функцій</a></li><li><a href="#властивість-mock">Властивість <code>.mock</code></a></li><li><a href="#імітація-повернених-значень">Імітація повернених значень</a></li><li><a href="#mocking-modules">Mocking Modules</a></li><li><a href="#реалізація-імітації">Реалізація імітації</a></li><li><a href="#mock-names">Mock Names</a></li><li><a href="#користувацькі-матчери">Користувацькі матчери</a></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/" class="nav-home"><img src="/img/jest-outline.svg" alt="Jest" width="66" height="58"/></a><div><h5>Docs</h5><a href="/docs/uk/getting-started.html">Getting Started</a><a href="/docs/uk/snapshot-testing.html">Guides</a><a href="/docs/uk/api.html">API Reference</a></div><div><h5>Community</h5><a href="https://stackoverflow.com/questions/tagged/jestjs" target="_blank">Stack Overflow</a><a href="https://discord.gg/MWRhKCj">Jest Chat</a><a href="https://twitter.com/fbjest" target="_blank">Twitter</a></div><div><h5>More</h5><a href="/blog">Blog</a><a href="https://github.com/facebook/jest">GitHub</a><a class="github-button" href="https://github.com/facebook/jest" data-icon="octicon-star" data-count-href="/facebook/jest/stargazers" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star facebook/jest on GitHub">Star</a></div></section><a href="https://code.facebook.com/projects/" target="_blank" class="fbOpenSource"><img src="/img/oss_logo.png" alt="Facebook Open Source" width="170" height="45"/></a><section class="copyright">Copyright © 2019 Facebook Inc.</section></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>window.twttr=(function(d,s, id){var js,fjs=d.getElementsByTagName(s)[0],t=window.twttr||{};if(d.getElementById(id))return t;js=d.createElement(s);js.id=id;js.src='https://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js, fjs);t._e = [];t.ready = function(f) {t._e.push(f);};return t;}(document, 'script', 'twitter-wjs'));</script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                
                apiKey: '833906d7486e4059359fa58823c4ef56',
                indexName: 'jest',
                inputSelector: '#search_input_react',
                algoliaOptions: {"facetFilters":["language:uk","version:24.8"]}
              });
            </script></body></html>