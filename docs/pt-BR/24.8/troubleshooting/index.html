<!DOCTYPE html><html lang="pt-BR"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Troubleshooting · Jest</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="Uh oh, something went wrong? Use this guide to resolve issues with Jest."/><meta name="docsearch:version" content="24.8"/><meta name="docsearch:language" content="pt-BR"/><meta property="og:title" content="Troubleshooting · Jest"/><meta property="og:type" content="website"/><meta property="og:url" content="https://jestjs.io/"/><meta property="og:description" content="Uh oh, something went wrong? Use this guide to resolve issues with Jest."/><meta property="og:image" content="https://jestjs.io/img/opengraph.png"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://jestjs.io/img/jest.png"/><link rel="shortcut icon" href="/img/favicon/favicon.ico"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><link rel="alternate" type="application/atom+xml" href="https://jestjs.io/blog/atom.xml" title="Jest Blog ATOM Feed"/><link rel="alternate" type="application/rss+xml" href="https://jestjs.io/blog/feed.xml" title="Jest Blog RSS Feed"/><script>
              (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
              (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
              m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
              })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

              ga('create', 'UA-44373548-17', 'auto');
              ga('send', 'pageview');
            </script><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script src="/js/scrollSpy.js"></script><link rel="stylesheet" href="/css/main.css"/><script src="/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/pt-BR"><img class="logo" src="/img/jest.svg" alt="Jest"/><h2 class="headerTitleWithLogo">Jest</h2></a><a href="/pt-BR/versions"><h3>24.8</h3></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="siteNavGroupActive"><a href="/docs/pt-BR/24.8/getting-started" target="_self">Documentação</a></li><li class="siteNavGroupActive"><a href="/docs/pt-BR/24.8/api" target="_self">API</a></li><li class=""><a href="/pt-BR/help" target="_self">Ajuda</a></li><li class=""><a href="/blog/" target="_self">Blog</a></li><span><li><a id="languages-menu" href="#"><img class="languages-icon" src="/img/language.svg" alt="Languages icon"/>Português (Brasil)</a><div id="languages-dropdown" class="hide"><ul id="languages-dropdown-items"><li><a href="/docs/en/24.8/troubleshooting">English</a></li><li><a href="/docs/ja/24.8/troubleshooting">日本語</a></li><li><a href="/docs/es-ES/24.8/troubleshooting">Español</a></li><li><a href="/docs/ro/24.8/troubleshooting">Română</a></li><li><a href="/docs/ru/24.8/troubleshooting">Русский</a></li><li><a href="/docs/uk/24.8/troubleshooting">Українська</a></li><li><a href="/docs/zh-Hans/24.8/troubleshooting">简体中文</a></li></ul></div></li><script>
        const languagesMenuItem = document.getElementById("languages-menu");
        const languagesDropDown = document.getElementById("languages-dropdown");
        languagesMenuItem.addEventListener("click", function(event) {
          event.preventDefault();

          if (languagesDropDown.className == "hide") {
            languagesDropDown.className = "visible";
          } else {
            languagesDropDown.className = "hide";
          }
        });
      </script></span><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li><li class=""><a href="https://github.com/facebook/jest" target="_self">GitHub</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>Guides</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle">Introduction</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/pt-BR/24.8/getting-started">Getting Started</a></li><li class="navListItem"><a class="navItem" href="/docs/pt-BR/24.8/using-matchers">Using Matchers</a></li><li class="navListItem"><a class="navItem" href="/docs/pt-BR/24.8/asynchronous">Testing Asynchronous Code</a></li><li class="navListItem"><a class="navItem" href="/docs/pt-BR/24.8/setup-teardown">Setup and Teardown</a></li><li class="navListItem"><a class="navItem" href="/docs/pt-BR/24.8/mock-functions">Mock Functions</a></li><li class="navListItem"><a class="navItem" href="/docs/pt-BR/24.8/jest-platform">Jest Platform</a></li><li class="navListItem"><a class="navItem" href="/docs/pt-BR/24.8/jest-community">Jest Community</a></li><li class="navListItem"><a class="navItem" href="/docs/pt-BR/24.8/more-resources">More Resources</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Guides</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/pt-BR/24.8/snapshot-testing">Snapshot Testing</a></li><li class="navListItem"><a class="navItem" href="/docs/pt-BR/24.8/tutorial-async">An Async Example</a></li><li class="navListItem"><a class="navItem" href="/docs/pt-BR/24.8/timer-mocks">Timer Mocks</a></li><li class="navListItem"><a class="navItem" href="/docs/pt-BR/24.8/manual-mocks">Manual Mocks</a></li><li class="navListItem"><a class="navItem" href="/docs/pt-BR/24.8/es6-class-mocks">ES6 Class Mocks</a></li><li class="navListItem"><a class="navItem" href="/docs/pt-BR/24.8/bypassing-module-mocks">Bypassing module mocks</a></li><li class="navListItem"><a class="navItem" href="/docs/pt-BR/24.8/webpack">Using with webpack</a></li><li class="navListItem"><a class="navItem" href="/docs/pt-BR/24.8/puppeteer">Using with puppeteer</a></li><li class="navListItem"><a class="navItem" href="/docs/pt-BR/24.8/mongodb">Using with MongoDB</a></li><li class="navListItem"><a class="navItem" href="/docs/pt-BR/24.8/dynamodb">Using with DynamoDB</a></li><li class="navListItem"><a class="navItem" href="/docs/pt-BR/24.8/tutorial-jquery">DOM Manipulation</a></li><li class="navListItem"><a class="navItem" href="/docs/pt-BR/24.8/watch-plugins">Watch Plugins</a></li><li class="navListItem"><a class="navItem" href="/docs/pt-BR/24.8/migration-guide">Migrating to Jest</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/docs/pt-BR/24.8/troubleshooting">Troubleshooting</a></li><li class="navListItem"><a class="navItem" href="/docs/pt-BR/24.8/architecture">Architecture</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Guias para frameworks</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/pt-BR/24.8/tutorial-react">Testing React Apps</a></li><li class="navListItem"><a class="navItem" href="/docs/pt-BR/24.8/tutorial-react-native">Testing React Native Apps</a></li><li class="navListItem"><a class="navItem" href="/docs/pt-BR/24.8/testing-frameworks">Testing Web Frameworks</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">API Reference</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/pt-BR/24.8/api">Globals</a></li><li class="navListItem"><a class="navItem" href="/docs/pt-BR/24.8/expect">Expect</a></li><li class="navListItem"><a class="navItem" href="/docs/pt-BR/24.8/mock-function-api">Mock Functions</a></li><li class="navListItem"><a class="navItem" href="/docs/pt-BR/24.8/jest-object">The Jest Object</a></li><li class="navListItem"><a class="navItem" href="/docs/pt-BR/24.8/configuration">Configuring Jest</a></li><li class="navListItem"><a class="navItem" href="/docs/pt-BR/24.8/cli">Jest CLI Options</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="https://github.com/facebook/jest/edit/master/docs/Troubleshooting.md" target="_blank" rel="noreferrer noopener">Edit</a><h1 id="__docusaurus" class="postHeaderTitle">Troubleshooting</h1></header><article><div><span><p>Uh oh, something went wrong? Use this guide to resolve issues with Jest.</p>
<h2><a class="anchor" aria-hidden="true" id="testes-estão-falhando-e-você-não-sabe-por-que"></a><a href="#testes-estão-falhando-e-você-não-sabe-por-que" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Testes estão falhando e você não sabe por que</h2>
<p>Tente usar o suporte à depuração embutido no Node. Note: This will only work in Node.js 8+.</p>
<p>Coloque uma instrução <code>debugger;</code> em qualquer um dos seus testes e em seguida, no diretório do seu projeto, execute:</p>
<pre><code class="hljs css language-bash">node --inspect-brk node_modules/.bin/jest --runInBand [any other arguments here]
or on Windows
node --inspect-brk ./node_modules/jest/bin/jest.js --runInBand [any other arguments here]
</code></pre>
<p>This will run Jest in a Node process that an external debugger can connect to. Note that the process will pause until the debugger has connected to it.</p>
<p>To debug in Google Chrome (or any Chromium-based browser), open your browser and go to <code>chrome://inspect</code> and click on &quot;Open Dedicated DevTools for Node&quot;, which will give you a list of available node instances you can connect to. Click on the address displayed in the terminal (usually something like <code>localhost:9229</code>) after running the above command, and you will be able to debug Jest using Chrome's DevTools.</p>
<p>The Chrome Developer Tools will be displayed, and a breakpoint will be set at the first line of the Jest CLI script (this is done to give you time to open the developer tools and to prevent Jest from executing before you have time to do so). Clique no botão que se parece com um botão &quot;play&quot; no lado superior direito da tela para continuar a execução. Quando Jest executa o teste que contém a instrução <code>debugger</code>, a execução fará uma pausa e você pode examinar o escopo atual e a pilha de chamada.</p>
<blockquote>
<p>Nota: a opção cli <code>--runInBand</code> certifica-se de que Jest executa testes no mesmo processo, ao invés de produzir processos para testes individuais. Normalmente Jest paraleliza execução de testes através de processos, mas é difícil de depurar vários processos ao mesmo tempo.</p>
</blockquote>
<h2><a class="anchor" aria-hidden="true" id="depuração-no-vs-code"></a><a href="#depuração-no-vs-code" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Depuração no VS Code</h2>
<p>Existem várias maneiras de depurar testes Jest com o <a href="https://code.visualstudio.com/docs/nodejs/nodejs-debugging">depurador</a> embutido no <a href="https://code.visualstudio.com">Visual Studio Code</a>.</p>
<p>Para anexar o depurador embutido, execute os testes, como foi mencionado anteriormente:</p>
<pre><code class="hljs css language-bash">node --inspect-brk node_modules/.bin/jest --runInBand [any other arguments here]
or on Windows
node --inspect-brk ./node_modules/jest/bin/jest.js --runInBand [any other arguments here]
</code></pre>
<p>Em seguida, anexe depurador do VS Code usando a configuração <code>launch.json</code> a seguir:</p>
<pre><code class="hljs css language-json">{
  <span class="hljs-attr">"version"</span>: <span class="hljs-string">"0.2.0"</span>,
  <span class="hljs-attr">"configurations"</span>: [
    {
      <span class="hljs-attr">"type"</span>: <span class="hljs-string">"node"</span>,
      <span class="hljs-attr">"request"</span>: <span class="hljs-string">"attach"</span>,
      <span class="hljs-attr">"name"</span>: <span class="hljs-string">"Attach"</span>,
      <span class="hljs-attr">"port"</span>: <span class="hljs-number">9229</span>
    }
  ]
}
</code></pre>
<p>Para iniciar automaticamente e anexar a um processo executando os seus testes, use a seguinte configuração:</p>
<pre><code class="hljs css language-json">{
  <span class="hljs-attr">"version"</span>: <span class="hljs-string">"0.2.0"</span>,
  <span class="hljs-attr">"configurations"</span>: [
    {
      <span class="hljs-attr">"name"</span>: <span class="hljs-string">"Debug Jest Tests"</span>,
      <span class="hljs-attr">"type"</span>: <span class="hljs-string">"node"</span>,
      <span class="hljs-attr">"request"</span>: <span class="hljs-string">"launch"</span>,
      <span class="hljs-attr">"runtimeArgs"</span>: [
        <span class="hljs-string">"--inspect-brk"</span>,
        <span class="hljs-string">"${workspaceRoot}/node_modules/.bin/jest"</span>,
        <span class="hljs-string">"--runInBand"</span>
      ],
      <span class="hljs-attr">"console"</span>: <span class="hljs-string">"integratedTerminal"</span>,
      <span class="hljs-attr">"internalConsoleOptions"</span>: <span class="hljs-string">"neverOpen"</span>,
      <span class="hljs-attr">"port"</span>: <span class="hljs-number">9229</span>
    }
  ]
}
</code></pre>
<p>or the following for Windows:</p>
<pre><code class="hljs css language-json">{
  <span class="hljs-attr">"version"</span>: <span class="hljs-string">"0.2.0"</span>,
  <span class="hljs-attr">"configurations"</span>: [
    {
      <span class="hljs-attr">"name"</span>: <span class="hljs-string">"Debug Jest Tests"</span>,
      <span class="hljs-attr">"type"</span>: <span class="hljs-string">"node"</span>,
      <span class="hljs-attr">"request"</span>: <span class="hljs-string">"launch"</span>,
      <span class="hljs-attr">"runtimeArgs"</span>: [
        <span class="hljs-string">"--inspect-brk"</span>,
        <span class="hljs-string">"${workspaceRoot}/node_modules/jest/bin/jest.js"</span>,
        <span class="hljs-string">"--runInBand"</span>
      ],
      <span class="hljs-attr">"console"</span>: <span class="hljs-string">"integratedTerminal"</span>,
      <span class="hljs-attr">"internalConsoleOptions"</span>: <span class="hljs-string">"neverOpen"</span>,
      <span class="hljs-attr">"port"</span>: <span class="hljs-number">9229</span>
    }
  ]
}
</code></pre>
<p>Se você estiver usando o <a href="https://github.com/facebookincubator/create-react-app"> <code>create-react-app</code></a> do Facebook, você pode depurar seus testes Jesta com a seguinte configuração:</p>
<pre><code class="hljs css language-json">{
  <span class="hljs-attr">"version"</span>: <span class="hljs-string">"0.2.0"</span>,
  <span class="hljs-attr">"configurations"</span>: [
    {
      <span class="hljs-attr">"name"</span>: <span class="hljs-string">"Debug CRA Tests"</span>,
      <span class="hljs-attr">"type"</span>: <span class="hljs-string">"node"</span>,
      <span class="hljs-attr">"request"</span>: <span class="hljs-string">"launch"</span>,
      <span class="hljs-attr">"runtimeExecutable"</span>: <span class="hljs-string">"${workspaceRoot}/node_modules/.bin/react-scripts"</span>,
      <span class="hljs-attr">"args"</span>: [<span class="hljs-string">"test"</span>, <span class="hljs-string">"--runInBand"</span>, <span class="hljs-string">"--no-cache"</span>, <span class="hljs-string">"--env=jsdom"</span>],
      <span class="hljs-attr">"cwd"</span>: <span class="hljs-string">"${workspaceRoot}"</span>,
      <span class="hljs-attr">"protocol"</span>: <span class="hljs-string">"inspector"</span>,
      <span class="hljs-attr">"console"</span>: <span class="hljs-string">"integratedTerminal"</span>,
      <span class="hljs-attr">"internalConsoleOptions"</span>: <span class="hljs-string">"neverOpen"</span>
    }
  ]
}
</code></pre>
<p>Mais informações sobre depuração do Node podem ser encontradas <a href="https://nodejs.org/api/debugger.html">aqui</a>.</p>
<h2><a class="anchor" aria-hidden="true" id="depuração-no-webstorm"></a><a href="#depuração-no-webstorm" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Depuração no WebStorm</h2>
<p>A maneira mais fácil de depurar testes Jest no <a href="https://www.jetbrains.com/webstorm/">WebStorm</a> é usando a <code>configuração de executar/depurar Jest</code>. Vai iniciar os testes e automaticamente anexar o depurador.</p>
<p>No menu <code>Run</code> do WebStorm selecione <code>Edit Configurations...</code>. Em seguida, clique em <code>+</code> e selecione <code>Jest</code>. Opcionalmente, especifique o arquivo de configuração Jest, opções adicionais e variáveis de ambiente. Salve a configuração, coloque pontos de interrupção no código e, em seguida, clique no ícone verde Depurar para iniciar a depuração.</p>
<p>Se você estiver usando o <a href="https://github.com/facebookincubator/create-react-app"> <code>create-react-app</code></a> do Facebook, na configuração do Jest executar/depurar especifique o caminho para o pacote <code>react-scripts</code> no campo pacote Jest e adicionar <code>--env=jsdom</code> para o campo de opções de Jest.</p>
<h2><a class="anchor" aria-hidden="true" id="problemas-de-cache"></a><a href="#problemas-de-cache" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Problemas de Cache</h2>
<p>The transform script was changed or Babel was updated and the changes aren't being recognized by Jest?</p>
<p>Tente novamente com <a href="/docs/pt-BR/24.8/cli#--cache"><code>--no-cache</code></a>. Jest armazena em cache os arquivos de módulo transformados para acelerar a execução de testes. If you are using your own custom transformer, consider adding a <code>getCacheKey</code> function to it: <a href="https://github.com/facebook/relay/blob/58cf36c73769690f0bbf90562707eadb062b029d/scripts/jest/preprocessor.js#L56-L61">getCacheKey in Relay</a>.</p>
<h2><a class="anchor" aria-hidden="true" id="promessas-não-resolvidas"></a><a href="#promessas-não-resolvidas" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Promessas não resolvidas</h2>
<p>Se uma promessa não é resolvida de forma alguma, esse erro pode ser lançado:</p>
<pre><code class="hljs css language-bash">- Error: Timeout - Async callback was not invoked within timeout specified by jasmine.DEFAULT_TIMEOUT_INTERVAL.`
</code></pre>
<p>Mais comumente, isso é causado por implementações conflitantes de Promessa. Consider replacing the global promise implementation with your own, for example <code>global.Promise = jest.requireActual('promise');</code> and/or consolidate the used Promise libraries to a single one.</p>
<p>If your test is long running, you may want to consider to increase the timeout by calling <code>jest.setTimeout</code></p>
<pre><code class="hljs css language-js">jest.setTimeout(<span class="hljs-number">10000</span>); <span class="hljs-comment">// 10 segundos de timeout</span>
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="problemas-com-watchman"></a><a href="#problemas-com-watchman" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Problemas com Watchman</h2>
<p>Try running Jest with <a href="/docs/pt-BR/24.8/cli#--watchman"><code>--no-watchman</code></a> or set the <code>watchman</code> configuration option to <code>false</code>.</p>
<p>Também consulte <a href="https://facebook.github.io/watchman/docs/troubleshooting.html"> solucionando problemas do watchman</a>.</p>
<h2><a class="anchor" aria-hidden="true" id="testes-são-extremamente-lentos-no-docker-eou-servidor-de-integração-contínua-ci-continuous-integration"></a><a href="#testes-são-extremamente-lentos-no-docker-eou-servidor-de-integração-contínua-ci-continuous-integration" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Testes são extremamente lentos no Docker e/ou servidor de Integração Contínua (CI, Continuous Integration).</h2>
<p>While Jest is most of the time extremely fast on modern multi-core computers with fast SSDs, it may be slow on certain setups as our users <a href="https://github.com/facebook/jest/issues/1395">have</a> <a href="https://github.com/facebook/jest/issues/1524#issuecomment-260246008">discovered</a>.</p>
<p>Based on the <a href="https://github.com/facebook/jest/issues/1524#issuecomment-262366820">findings</a>, one way to mitigate this issue and improve the speed by up to 50% is to run tests sequentially.</p>
<p>Para isso, você pode executar testes na mesma &quot;thread&quot; usando <a href="/docs/pt-BR/24.8/cli#--runinband"><code>--runInBand</code></a>:</p>
<pre><code class="hljs css language-bash"><span class="hljs-comment"># Using Jest CLI</span>
jest --runInBand

<span class="hljs-comment"># Using yarn test (e.g. with create-react-app)</span>
yarn <span class="hljs-built_in">test</span> --runInBand
</code></pre>
<p>Another alternative to expediting test execution time on Continuous Integration Servers such as Travis-CI is to set the max worker pool to ~<em>4</em>. Especificamente no Travis-CI, isto pode reduzir o tempo de execução de teste pela metade. Nota: O plano <em>gratuito</em> de Travis CI disponível para projetos de código aberto inclui apenas 2 núcleos de CPU.</p>
<pre><code class="hljs css language-bash"><span class="hljs-comment"># Using Jest CLI</span>
jest --maxWorkers=4

<span class="hljs-comment"># Using yarn test (e.g. with create-react-app)</span>
yarn <span class="hljs-built_in">test</span> --maxWorkers=4
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="problemas-de-compatibilidade"></a><a href="#problemas-de-compatibilidade" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Problemas de compatibilidade</h2>
<p>Jest tira proveito dos novos recursos adicionados ao Node 6. We recommend that you upgrade to the latest stable release of Node. The minimum supported version is <code>v6.0.0</code>. Versions <code>0.x.x</code> and <code>4.x.x</code> are not supported because the <code>jsdom</code> version used in Jest doesn't support Node 4. However, if you need to run Jest on Node 4, you can use the <code>testEnvironment</code> config to use a <a href="https://jestjs.io/docs/en/configuration.html#testenvironment-string">custom environment</a> that supports Node 4, such as <a href="https://yarnpkg.com/en/package/jest-environment-node"><code>jest-environment-node</code></a>.</p>
<h2><a class="anchor" aria-hidden="true" id="coveragepathignorepatterns-parece-não-ter-nenhum-efeito"></a><a href="#coveragepathignorepatterns-parece-não-ter-nenhum-efeito" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>coveragePathIgnorePatterns</code> parece não ter nenhum efeito.</h2>
<p>Certifique-se de que você não está usando o plugin de <code>babel-plugin-Istambul</code>. Jest wraps Istanbul, and therefore also tells Istanbul what files to instrument with coverage collection. When using <code>babel-plugin-istanbul</code>, every file that is processed by Babel will have coverage collection code, hence it is not being ignored by <code>coveragePathIgnorePatterns</code>.</p>
<h2><a class="anchor" aria-hidden="true" id="defining-tests"></a><a href="#defining-tests" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Defining Tests</h2>
<p>Tests must be defined synchronously for Jest to be able to collect your tests.</p>
<p>As an example to show why this is the case, imagine we wrote a test like so:</p>
<pre><code class="hljs css language-js"><span class="hljs-comment">// Don't do this it will not work</span>
setTimeout(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
  it(<span class="hljs-string">'passes'</span>, () =&gt; expect(<span class="hljs-number">1</span>).toBe(<span class="hljs-number">1</span>));
}, <span class="hljs-number">0</span>);
</code></pre>
<p>When Jest runs your test to collect the <code>test</code>s it will not find any because we have set the definition to happen asynchronously on the next tick of the event loop.</p>
<p><em>Note:</em> This means when you are using <code>test.each</code> you cannot set the table asynchronously within a <code>beforeEach</code> / <code>beforeAll</code>.</p>
<h2><a class="anchor" aria-hidden="true" id="ainda-sem-resolução"></a><a href="#ainda-sem-resolução" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Ainda sem resolução?</h2>
<p>Consulte a <a href="/help.html">ajuda</a>.</p>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/docs/pt-BR/24.8/migration-guide"><span class="arrow-prev">← </span><span>Migrating to Jest</span></a><a class="docs-next button" href="/docs/pt-BR/24.8/architecture"><span>Arquitetura</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#testes-estão-falhando-e-você-não-sabe-por-que">Testes estão falhando e você não sabe por que</a></li><li><a href="#depuração-no-vs-code">Depuração no VS Code</a></li><li><a href="#depuração-no-webstorm">Depuração no WebStorm</a></li><li><a href="#problemas-de-cache">Problemas de Cache</a></li><li><a href="#promessas-não-resolvidas">Promessas não resolvidas</a></li><li><a href="#problemas-com-watchman">Problemas com Watchman</a></li><li><a href="#testes-são-extremamente-lentos-no-docker-eou-servidor-de-integração-contínua-ci-continuous-integration">Testes são extremamente lentos no Docker e/ou servidor de Integração Contínua (CI, Continuous Integration).</a></li><li><a href="#problemas-de-compatibilidade">Problemas de compatibilidade</a></li><li><a href="#coveragepathignorepatterns-parece-não-ter-nenhum-efeito"><code>coveragePathIgnorePatterns</code> parece não ter nenhum efeito.</a></li><li><a href="#defining-tests">Defining Tests</a></li><li><a href="#ainda-sem-resolução">Ainda sem resolução?</a></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/" class="nav-home"><img src="/img/jest-outline.svg" alt="Jest" width="66" height="58"/></a><div><h5>Docs</h5><a href="/docs/pt-BR/getting-started.html">Getting Started</a><a href="/docs/pt-BR/snapshot-testing.html">Guides</a><a href="/docs/pt-BR/api.html">API Reference</a></div><div><h5>Community</h5><a href="https://stackoverflow.com/questions/tagged/jestjs" target="_blank">Stack Overflow</a><a href="https://discord.gg/MWRhKCj">Jest Chat</a><a href="https://twitter.com/fbjest" target="_blank">Twitter</a></div><div><h5>More</h5><a href="/blog">Blog</a><a href="https://github.com/facebook/jest">GitHub</a><a class="github-button" href="https://github.com/facebook/jest" data-icon="octicon-star" data-count-href="/facebook/jest/stargazers" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star facebook/jest on GitHub">Star</a></div></section><a href="https://code.facebook.com/projects/" target="_blank" class="fbOpenSource"><img src="/img/oss_logo.png" alt="Facebook Open Source" width="170" height="45"/></a><section class="copyright">Copyright © 2019 Facebook Inc.</section></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>window.twttr=(function(d,s, id){var js,fjs=d.getElementsByTagName(s)[0],t=window.twttr||{};if(d.getElementById(id))return t;js=d.createElement(s);js.id=id;js.src='https://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js, fjs);t._e = [];t.ready = function(f) {t._e.push(f);};return t;}(document, 'script', 'twitter-wjs'));</script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                
                apiKey: '833906d7486e4059359fa58823c4ef56',
                indexName: 'jest',
                inputSelector: '#search_input_react',
                algoliaOptions: {"facetFilters":["language:pt-BR","version:24.8"]}
              });
            </script></body></html>