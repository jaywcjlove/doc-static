<!doctype html><html lang="en" class="no-js"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="keywords" content="JavaScript, Linter, Linting, Pluggable, Configurable, Code Quality"><meta name="description" content="A pluggable and configurable linter tool for identifying and reporting on patterns in JavaScript. Maintain your code quality with ease."><meta name="theme-color" content="#463fd4"><meta property="og:locale" content="en_US"><meta property="og:site_name" content="ESLint - Pluggable JavaScript linter"><meta property="og:title" content="Working with Plugins"><meta property="og:url" content="/docs/3.0.0/developer-guide/working-with-plugins"><meta property="og:image" content="https://eslint.org/assets/img/favicon.512x512.png"><meta name="twitter:site" content="@geteslint"><meta name="twitter:title" content="Working with Plugins"><meta name="twitter:description" content="A pluggable and configurable linter tool for identifying and reporting on patterns in JavaScript. Maintain your code quality with ease."><meta name="twitter:url" content="/docs/3.0.0/developer-guide/working-with-plugins"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://eslint.org/assets/img/favicon.512x512.png"><title>Working with Plugins - ESLint - Pluggable JavaScript linter</title><link rel="preconnect" href="https://www.google-analytics.com"><link rel="canonical" href="/docs/3.0.0/developer-guide/working-with-plugins"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600"><link rel="stylesheet" href="/assets/styles/main.css"><link rel="manifest" href="/manifest.json"><link rel="icon" href="/assets/img/favicon.512x512.png"><link rel="alternate" type="application/rss+xml" title="ESLint - Pluggable JavaScript linter" href="/feed.xml"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css"><script async src="https://media.ethicalads.io/media/client/ethicalads.min.js"></script></head><body><input type="checkbox" id="eslint-toggle-search" class="eslint-toggle-search-checkbox"><header class="navbar navbar-default navbar-demo navbar-fixed-top eslint-nav" id="top" role="banner"><div class="container"><a href="/" class="navbar-brand"><img alt="ESLint" src="/assets/img/logo.svg" itemprop="image">ESLint</a><div class="eslint-navbar-toggles"><button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#eslint-navbar" aria-controls="eslint-navbar" aria-expanded="false"><span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span></button> <label for="eslint-toggle-search" class="navbar-toggle eslint-toggle-search-open"><span class="sr-only">Open search</span> <span class="glyphicon glyphicon-search" aria-hidden="true"></span></label></div><nav id="eslint-navbar" class="collapse navbar-collapse eslint-navbar"><ul class="nav navbar-nav navbar-right"><li class="dropdown"><a href="/docs/user-guide" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">User guide<span class="caret"></span></a><ul class="dropdown-menu" role="menu"><li><a href="/docs/user-guide/getting-started">Getting Started</a></li><li><a href="/docs/user-guide/configuring">Configuring ESLint</a></li><li><a href="/docs/user-guide/command-line-interface">Command Line Interface</a></li><li><a href="/docs/rules">Rules</a></li><li><a href="/docs/user-guide/formatters">Formatters</a></li><li><a href="/docs/user-guide/integrations">Integrations</a></li><li class="divider"></li><li><a href="/docs/user-guide/migrating-to-7.0.0">Migrating to v7.0.0</a></li><li><a href="/docs/user-guide/migrating-to-6.0.0">Migrating to v6.0.0</a></li><li><a href="/docs/user-guide/migrating-to-5.0.0">Migrating to v5.0.0</a></li><li><a href="/docs/user-guide/migrating-to-4.0.0">Migrating to v4.0.0</a></li><li><a href="/docs/user-guide/migrating-to-3.0.0">Migrating to v3.0.0</a></li><li><a href="/docs/user-guide/migrating-to-2.0.0">Migrating to v2.0.0</a></li><li><a href="/docs/user-guide/migrating-to-1.0.0">Migrating to v1.0.0</a></li><li><a href="/docs/user-guide/migrating-from-jscs">Migrating from JSCS</a></li></ul></li><li class="dropdown"><a href="/docs/developer-guide" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Developer guide<span class="caret"></span></a><ul class="dropdown-menu" role="menu"><li><a href="/docs/developer-guide/architecture">Architecture</a></li><li><a href="/docs/developer-guide/contributing">Contributing</a></li><li><a href="/docs/developer-guide/source-code">Get the Source Code</a></li><li><a href="/docs/developer-guide/development-environment">Set up a Development Environment</a></li><li><a href="/docs/developer-guide/unit-tests">Run the Unit Tests</a></li><li><a href="/docs/developer-guide/working-with-rules">Working with Rules</a></li><li><a href="/docs/developer-guide/working-with-plugins">Working with Plugins</a></li><li><a href="/docs/developer-guide/working-with-custom-formatters">Working with Custom Formatters</a></li><li><a href="/docs/developer-guide/working-with-custom-parsers">Working with Custom Parsers</a></li><li><a href="/docs/developer-guide/shareable-configs">Shareable Configs</a></li><li><a href="/docs/developer-guide/nodejs-api">Node.js API</a></li><li><a href="/docs/maintainer-guide">Maintainer guide</a></li></ul></li><li><a href="/blog">Blog</a></li><li><a href="/demo">Demo</a></li><li class="dropdown"><a href="/docs/about" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">About<span class="caret"></span></a><ul class="dropdown-menu" role="menu"><li><a href="/users">Who's Using ESLint?</a></li><li><a href="/team">About the Team</a></li><li><a href="/docs/about">About ESLint</a></li></ul></li></ul><label for="eslint-toggle-search" class="navbar-toggle eslint-toggle-search-open"><span class="sr-only">Open search</span> <span class="glyphicon glyphicon-search" aria-hidden="true"></span></label><div class="navbar-form navbar-right eslint-search" role="search"><div class="input-group"><label class="sr-only" aria-label="Search" for="eslint-search-input">Search</label><div class="eslint-search-input-wrapper"><input type="text" class="form-control" id="eslint-search-input" accesskey="s" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" placeholder="Search the docs..."> <label for="eslint-toggle-search" class="eslint-toggle-search-close"><span class="sr-only">Close search</span> <span class="glyphicon glyphicon-remove-circle" aria-hidden="true"></span></label></div></div></div></nav></div></header><main class="doc"><article class="container"><div class="eslint-ad-float hidden-xs hidden-sm"><div class="bordered" data-ea-publisher="eslint-org" data-ea-type="image"><div class="eslint-ad eslint-image-ad"><div class="eslint-ad-content"><a href="https://opencollective.com/eslint" rel="nofollow" target="_blank"><img src="/assets/img/logo.svg"></a><div class="eslint-ad-text"><a href="http://opencollective.com/eslint" rel="nofollow" target="_blank"><strong>Sponsor ESLint.</strong> ESLint depends on donations for ongoing maintenance and development.</a></div></div></div></div></div><h1 id="working-with-plugins">Working with Plugins</h1><p>Each plugin is an npm module with a name in the format of <code>eslint-plugin-&lt;plugin-name&gt;</code>, such as <code>eslint-plugin-jquery</code>. You can also use scoped packages in the format of <code>@&lt;scope&gt;/eslint-plugin-&lt;plugin-name&gt;</code> such as <code>@jquery/eslint-plugin-jquery</code>.</p><h2 id="create-a-plugin">Create a Plugin</h2><p>The easiest way to start creating a plugin is to use the <a href="https://npmjs.com/package/generator-eslint">Yeoman generator</a>. The generator will guide you through setting up the skeleton of a plugin.</p><h3 id="rules-in-plugins">Rules in Plugins</h3><p>Plugins can expose additional rules for use in ESLint. To do so, the plugin must export a <code>rules</code> object containing a key-value mapping of rule ID to rule. The rule ID does not have to follow any naming convention (so it can just be <code>dollar-sign</code>, for instance).</p><pre class="hljs highlight-js"><code><span class="hljs-built_in">module</span>.exports = {
    <span class="hljs-attr">rules</span>: {
        <span class="hljs-string">&quot;dollar-sign&quot;</span>: {
            <span class="hljs-attr">create</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">context</span>) </span>{
                <span class="hljs-comment">// rule implementation ...</span>
            }
        }
    }
};
</code></pre><p>To use the rule in ESLint, you would use the unprefixed plugin name, followed by a slash, followed by the rule name. So if this plugin were named <code>eslint-plugin-myplugin</code>, then in your configuration you'd refer to the rule by the name <code>myplugin/dollar-sign</code>. Example: <code>&quot;rules&quot;: {&quot;myplugin/dollar-sign&quot;: 2}</code>.</p><h3 id="environments-in-plugins">Environments in Plugins</h3><p>Plugins can expose additional environments for use in ESLint. To do so, the plugin must export an <code>environments</code> object. The keys of the <code>environments</code> object are the names of the different environments provided and the values are the environment settings. For example:</p><pre class="hljs highlight-js"><code><span class="hljs-built_in">module</span>.exports = {
    <span class="hljs-attr">environments</span>: {
        <span class="hljs-attr">jquery</span>: {
            <span class="hljs-attr">globals</span>: {
                <span class="hljs-attr">$</span>: <span class="hljs-literal">false</span>
            }
        }
    }
};
</code></pre><p>There's a <code>jquery</code> environment defined in this plugin. To use the environment in ESLint, you would use the unprefixed plugin name, followed by a slash, followed by the environment name. So if this plugin were named <code>eslint-plugin-myplugin</code>, then you would set the environment in your configuration to be <code>&quot;myplugin/jquery&quot;</code>.</p><p>Plugin environments can define the following objects:</p><ol><li><code>globals</code> - acts the same <code>globals</code> in a configuration file. The keys are the names of the globals and the values are <code>true</code> to allow the global to be overwritten and <code>false</code> to disallow.</li><li><code>parserOptions</code> - acts the same as <code>parserOptions</code> in a configuration file.</li></ol><h3 id="processors-in-plugins">Processors in Plugins</h3><p>You can also create plugins that would tell ESLint how to process files other than JavaScript. In order to create a processor, object that is exported from your module has to conform to the following interface:</p><pre class="hljs highlight-js"><code>processors: {

    <span class="hljs-comment">// assign to the file extension you want (.js, .jsx, .html, etc.)</span>
    <span class="hljs-string">&quot;.ext&quot;</span>: {
        <span class="hljs-comment">// takes text of the file and filename</span>
        <span class="hljs-attr">preprocess</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">text, filename</span>) </span>{
            <span class="hljs-comment">// here, you can strip out any non-JS content</span>
            <span class="hljs-comment">// and split into multiple strings to lint</span>

            <span class="hljs-keyword">return</span> [string];  <span class="hljs-comment">// return an array of strings to lint</span>
        },

        <span class="hljs-comment">// takes a Message[][] and filename</span>
        <span class="hljs-attr">postprocess</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">messages, filename</span>) </span>{
            <span class="hljs-comment">// `messages` argument contains two-dimensional array of Message objects</span>
            <span class="hljs-comment">// where each top-level array item contains array of lint messages related</span>
            <span class="hljs-comment">// to the text that was returned in array from preprocess() method</span>

            <span class="hljs-comment">// you need to return a one-dimensional array of the messages you want to keep</span>
            <span class="hljs-keyword">return</span> [Message];
        }
    }
}
</code></pre><p>The <code>preprocess</code> method takes the file contents and filename as arguments, and returns an array of strings to lint. The strings will be linted separately but still be registered to the filename. It's up to the plugin to decide if it needs to return just one part, or multiple pieces. For example in the case of processing <code>.html</code> files, you might want to return just one item in the array by combining all scripts, but for <code>.md</code> file where each JavaScript block might be independent, you can return multiple items.</p><p>The <code>postprocess</code> method takes a two-dimensional array of arrays of lint messages and the filename. Each item in the input array corresponds to the part that was returned from the <code>preprocess</code> method. The <code>postprocess</code> method must adjust the location of all errors and aggregate them into a single flat array and return it.</p><p>You can have both rules and processors in a single plugin. You can also have multiple processors in one plugin. To support multiple extensions, add each one to the <code>processors</code> element and point them to the same object.</p><h3 id="configs-in-plugins">Configs in Plugins</h3><p>You can bundle configurations inside a plugin. This can be useful when you want to provide not just code style, but also some custom rules to support it. You can specify configurations under <code>configs</code> key. Please note that when exposing configurations, you have to name each one, and there is no default. So your users will have to specify the name of the configuration they want to use.</p><pre class="hljs highlight-js"><code>configs: {
    <span class="hljs-attr">myConfig</span>: {
        <span class="hljs-attr">env</span>: [<span class="hljs-string">&quot;browser&quot;</span>],
        <span class="hljs-attr">rules</span>: {
            <span class="hljs-attr">semi</span>: <span class="hljs-number">2</span>,
            <span class="hljs-string">&quot;myPlugin/my-rule&quot;</span>: <span class="hljs-number">2</span>,
            <span class="hljs-string">&quot;eslint-plugin-myPlugin/another-rule&quot;</span>: <span class="hljs-number">2</span>
        }
    }
}
</code></pre><p><strong>Note:</strong> Please note that configuration will not automatically attach your rules and you have to specify your plugin name and any rules you want to enable that are part of the plugin. Any plugin rules must be prefixed with the short or long plugin name. See <a href="../user-guide/configuring#configuring-plugins">Configuring Plugins</a></p><h3 id="peer-dependency">Peer Dependency</h3><p>To make clear that the plugin requires ESLint to work correctly you have to declare ESLint as a <code>peerDependency</code> in your <code>package.json</code>. The plugin support was introduced in ESLint version <code>0.8.0</code>. Ensure the <code>peerDependency</code> points to ESLint <code>0.8.0</code> or later.</p><pre class="hljs highlight-json"><code>{
    <span class="hljs-attr">&quot;peerDependencies&quot;</span>: {
        <span class="hljs-attr">&quot;eslint&quot;</span>: <span class="hljs-string">&quot;&gt;=0.8.0&quot;</span>
    }
}
</code></pre><h3 id="testing">Testing</h3><p>You can test the rules of your plugin <a href="working-with-rules">the same way as bundled ESLint rules</a> using RuleTester.</p><p>Example:</p><pre class="hljs highlight-js"><code><span class="hljs-meta">&quot;use strict&quot;</span>;

<span class="hljs-keyword">var</span> rule = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;../../../lib/rules/custom-plugin-rule&quot;</span>),
    RuleTester = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;eslint&quot;</span>).RuleTester;

<span class="hljs-keyword">var</span> ruleTester = <span class="hljs-keyword">new</span> RuleTester();
ruleTester.run(<span class="hljs-string">&quot;custom-plugin-rule&quot;</span>, rule, {
    <span class="hljs-attr">valid</span>: [
        <span class="hljs-string">&quot;var validVariable = true&quot;</span>,
    ],

    <span class="hljs-attr">invalid</span>: [
        {
            <span class="hljs-attr">code</span>: <span class="hljs-string">&quot;var invalidVariable = true&quot;</span>,
            <span class="hljs-attr">errors</span>: [ { <span class="hljs-attr">message</span>: <span class="hljs-string">&quot;Unexpected invalid variable.&quot;</span> } ]
        },
        {
            <span class="hljs-attr">code</span>: <span class="hljs-string">&quot;var invalidVariable = true&quot;</span>,
            <span class="hljs-attr">errors</span>: [ { <span class="hljs-attr">message</span>: <span class="hljs-regexp">/^Unexpected.+variable/</span> } ]
        }
    ]
});
</code></pre><p>The <code>RuleTester</code> constructor accepts an optional object argument, which can be used to specify defaults for your test cases. For example, if all of your test cases use ES2015, you can set it as a default:</p><pre class="hljs highlight-js"><code><span class="hljs-keyword">const</span> ruleTester = <span class="hljs-keyword">new</span> RuleTester({ <span class="hljs-attr">parserOptions</span>: { <span class="hljs-attr">ecmaVersion</span>: <span class="hljs-number">2015</span> } });
</code></pre><p>The <code>RuleTester#run()</code> method is used to run the tests. It should be passed the following arguments:</p><ul><li>The name of the rule (string)</li><li>The rule object itself (see <a href="./working-with-rules">&quot;working with rules&quot;</a>)</li><li>An object containing <code>valid</code> and <code>invalid</code> properties, each of which is an array containing test cases.</li></ul><p>A test case is an object with the following properties:</p><ul><li><code>code</code> (string, required): The source code that the rule should be run on</li><li><code>options</code> (array, optional): The options passed to the rule. The rule severity should not be included in this list.</li><li><code>filename</code> (string, optional): The filename for the given case (useful for rules that make assertions about filenames)</li></ul><p>In addition to the properties above, invalid test cases can also have the following properties:</p><ul><li><code>errors</code> (number or array, required): Asserts some properties of the errors that the rule is expected to produce when run on this code. If this is a number, asserts the number of errors produced. Otherwise, this should be a list of objects, each containing information about a single reported error. The following properties can be used for an error (all are optional):<ul><li><code>message</code> (string/regexp): The message for the error</li><li><code>type</code> (string): The type of the reported AST node</li><li><code>line</code> (number): The 1-based line number of the reported location</li><li><code>column</code> (number): The 0-based column number of the reported location</li><li><code>endLine</code> (number): The 1-based line number of the end of the reported location</li><li><code>endColumn</code> (number): The 0-based column number of the end of the reported location</li></ul></li><li><code>output</code> (string, optional): Asserts the output that will be produced when using this rule for a single pass of autofixing (e.g. with the <code>--fix</code> command line flag). If this is <code>null</code>, asserts that none of the reported problems suggest autofixes.</li></ul><p>Any additional properties of a test case will be passed directly to the linter as config options. For example, a test case can have a <code>parserOptions</code> property to configure parser behavior.</p><h4 id="customizing-ruletester">Customizing RuleTester</h4><p>To create tests for each valid and invalid case, <code>RuleTester</code> internally uses <code>describe</code> and <code>it</code> methods from the Mocha test framework when it is available. If you use another test framework, you can override <code>RuleTester.describe</code> and <code>RuleTester.it</code> to make <code>RuleTester</code> compatible with it and have proper individual tests and feedback.</p><p>Example:</p><pre class="hljs highlight-js"><code><span class="hljs-meta">&quot;use strict&quot;</span>;

<span class="hljs-keyword">var</span> RuleTester = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;eslint&quot;</span>).RuleTester;
<span class="hljs-keyword">var</span> test = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;my-test-runner&quot;</span>);

RuleTester.describe = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">text, method</span>) </span>{
    RuleTester.it.title = text;
    <span class="hljs-keyword">return</span> method.apply(<span class="hljs-built_in">this</span>);
};

RuleTester.it = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">text, method</span>) </span>{
    test(RuleTester.it.title + <span class="hljs-string">&quot;: &quot;</span> + text, method);
};

<span class="hljs-comment">// then use RuleTester as documented</span>
</code></pre><h2 id="share-plugins">Share Plugins</h2><p>In order to make your plugin available to the community you have to publish it on npm.</p><p>Recommended keywords:</p><ul><li><code>eslint</code></li><li><code>eslintplugin</code></li></ul><p>Add these keywords into your <code>package.json</code> file to make it easy for others to find.</p><h2 id="further-reading">Further Reading</h2><ul><li><a href="https://docs.npmjs.com/misc/developers">npm Developer Guide</a></li></ul></article></main><hr><div class="container"><footer><ul class="list-inline" style="text-align: center;"><li><a href="https://groups.google.com/group/eslint"><i class="fab fa-google fa-2x"></i> <span style="display:block;position:relative">Group</span></a></li><li><a href="https://github.com/eslint/eslint"><i class="fab fa-github fa-2x"></i> <span style="display:block;position:relative">Github</span></a></li><li><a href="https://twitter.com/geteslint"><i class="fab fa-twitter fa-2x"></i> <span style="display:block;position:relative">Twitter</span></a></li><li><a href="/chat"><i class="fab fa-discord fa-2x"></i> <span style="display:block;position:relative">Discord</span></a></li><br><li>Copyright OpenJS Foundation and other contributors, <a href="https://openjsf.org/">www.openjsf.org</a></li><li><a href="https://github.com/eslint/website/edit/master/./docs/3.0.0/developer-guide/working-with-plugins.md">Edit this page</a></li></ul></footer></div><script src="/assets/js/main.js"></script><script src="https://kit.fontawesome.com/6ebce1c175.js" crossorigin="anonymous"></script></body></html>