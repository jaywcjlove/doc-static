<!DOCTYPE html><html lang="zh-Hans"><head><meta charset="utf-8"><title>Angular - 依赖注入实战</title><meta name="Description" content="Angular is a platform for building mobile and desktop web applications.
    Join the community of millions of developers who build compelling user interfaces with Angular."><base href="/"><link rel="preconnect" href="https://www.google-analytics.com"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://stats.g.doubleclick.net"><link rel="dns-prefetch" href="https://stats.g.doubleclick.net"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="search" type="application/opensearchdescription+xml" href="assets/opensearch.xml"><link rel="icon" type="image/x-icon" href="assets/images/favicons/favicon.ico"><link rel="icon" type="image/png" href="assets/images/favicons/favicon-32x32.png" sizes="32x32"><link rel="icon" type="image/png" href="assets/images/favicons/favicon-194x194.png" sizes="194x194"><link rel="icon" type="image/png" href="assets/images/favicons/favicon-96x96.png" sizes="96x96"><link rel="icon" type="image/png" href="assets/images/favicons/favicon-16x16.png" sizes="16x16"><link rel="apple-touch-icon" sizes="144x144" href="assets/images/favicons/favicon-144x144.png"><link rel="apple-touch-icon-precomposed" sizes="144x144" href="assets/images/favicons/favicon-144x144.png"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500&amp;display=swap"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Droid+Sans+Mono&amp;display=swap"><link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons&amp;display=block"><link rel="manifest" href="pwa-manifest.json"><meta name="theme-color" content="#1976d2"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="translucent"><script async="" src="assets/js/analytics.js"></script><script>!function(e,a,n,t,s,c,g){e.GoogleAnalyticsObject=s,e.ga=e.ga||function(){(e.ga.q=e.ga.q||[]).push(arguments)},e.ga.l=1*new Date,c=a.createElement(n),g=a.getElementsByTagName(n)[0],c.async=1,c.src="assets/js/analytics.js",~e.name.indexOf("NG_DEFER_BOOTSTRAP")||g.parentNode.insertBefore(c,g)}(window,document,"script",0,"ga")</script><script>window.onerror=function(){ga("send","exception",{exDescription:function(e,r,n,a,c){var l;e=e.replace(/^Error: /,""),l=c?c.stack.replace(/^Error: /,"").replace(e+"\n","").replace(/^ +/gm,"").replace(/^at /gm,"").replace(/(?: \(|@)http.+\/([^/)]+)\)?(?:\n|$)/gm,"@$1\n").replace(/ *\(eval code(:\d+:\d+)\)(?:\n|$)/gm,"@???$1\n"):r+":"+(n=n||"?")+":"+(a=a||"?");return(e+"\n"+l).substr(0,150)}.apply(null,arguments),exFatal:!0})}</script><link rel="stylesheet" href="styles.cf0de443cfb9b4fee8f9.css"><style>.cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%}.mat-toolbar-multiple-rows{min-height:64px}.mat-toolbar-row,.mat-toolbar-single-row{height:64px}@media(max-width:599px){.mat-toolbar-multiple-rows{min-height:56px}.mat-toolbar-row,.mat-toolbar-single-row{height:56px}}</style><style>.mat-icon{background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1,1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}</style><style>.mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover .mat-button-focus-overlay,.mat-stroked-button:hover .mat-button-focus-overlay{opacity:.04}@media(hover:none){.mat-button:hover .mat-button-focus-overlay,.mat-stroked-button:hover .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-flat-button,.mat-icon-button,.mat-stroked-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:0;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner{border:0}.mat-button[disabled],.mat-flat-button[disabled],.mat-icon-button[disabled],.mat-stroked-button[disabled]{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:0;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0,0,0);transition:background .4s cubic-bezier(.25,.8,.25,1),box-shadow 280ms cubic-bezier(.4,0,.2,1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button[disabled]{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-focus-overlay,.mat-stroked-button .mat-button-ripple.mat-ripple{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:0;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0,0,0);transition:background .4s cubic-bezier(.25,.8,.25,1),box-shadow 280ms cubic-bezier(.4,0,.2,1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab[disabled]{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:0;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0,0,0);transition:background .4s cubic-bezier(.25,.8,.25,1),box-shadow 280ms cubic-bezier(.4,0,.2,1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab[disabled]{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button .mat-icon,.mat-icon-button i{line-height:24px}.mat-button-focus-overlay,.mat-button-ripple.mat-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity .2s cubic-bezier(.35,0,.25,1),background-color .2s cubic-bezier(.35,0,.25,1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.cdk-high-contrast-active .mat-button-focus-overlay{background-color:#fff}.cdk-high-contrast-black-on-white .mat-button-focus-overlay{background-color:#000}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:block;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-mini-fab,.cdk-high-contrast-active .mat-raised-button{outline:solid 1px}</style><style>.mat-drawer-container{position:relative;z-index:1;box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:.4s;transition-timing-function:cubic-bezier(.25,.8,.25,1);transition-property:background-color,visibility}.cdk-high-contrast-active .mat-drawer-backdrop{opacity:.5}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:.4s;transition-timing-function:cubic-bezier(.25,.8,.25,1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%,0,0)}.cdk-high-contrast-active .mat-drawer,.cdk-high-contrast-active [dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}.cdk-high-contrast-active .mat-drawer.mat-drawer-end,.cdk-high-contrast-active [dir=rtl] .mat-drawer{border-left:solid 1px currentColor;border-right:none}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%,0,0)}[dir=rtl] .mat-drawer{transform:translate3d(100%,0,0)}[dir=rtl] .mat-drawer.mat-drawer-end{left:0;right:auto;transform:translate3d(-100%,0,0)}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch}.mat-sidenav-fixed{position:fixed}</style><style>.nav-link.highlight[_ngcontent-ng-docs-c30]{color:#ff0}</style><style>.mat-progress-bar{display:block;height:4px;overflow:hidden;position:relative;transition:opacity 250ms linear;width:100%}._mat-animation-noopable.mat-progress-bar{transition:none;animation:none}.mat-progress-bar .mat-progress-bar-element,.mat-progress-bar .mat-progress-bar-fill::after{height:100%;position:absolute;width:100%}.mat-progress-bar .mat-progress-bar-background{width:calc(100% + 10px)}.cdk-high-contrast-active .mat-progress-bar .mat-progress-bar-background{display:none}.mat-progress-bar .mat-progress-bar-buffer{transform-origin:top left;transition:transform 250ms ease}.cdk-high-contrast-active .mat-progress-bar .mat-progress-bar-buffer{border-top:solid 5px;opacity:.5}.mat-progress-bar .mat-progress-bar-secondary{display:none}.mat-progress-bar .mat-progress-bar-fill{animation:none;transform-origin:top left;transition:transform 250ms ease}.cdk-high-contrast-active .mat-progress-bar .mat-progress-bar-fill{border-top:solid 4px}.mat-progress-bar .mat-progress-bar-fill::after{animation:none;content:"";display:inline-block;left:0}.mat-progress-bar[dir=rtl],[dir=rtl] .mat-progress-bar{transform:rotateY(180deg)}.mat-progress-bar[mode=query]{transform:rotateZ(180deg)}.mat-progress-bar[mode=query][dir=rtl],[dir=rtl] .mat-progress-bar[mode=query]{transform:rotateZ(180deg) rotateY(180deg)}.mat-progress-bar[mode=indeterminate] .mat-progress-bar-fill,.mat-progress-bar[mode=query] .mat-progress-bar-fill{transition:none}.mat-progress-bar[mode=indeterminate] .mat-progress-bar-primary,.mat-progress-bar[mode=query] .mat-progress-bar-primary{-webkit-backface-visibility:hidden;backface-visibility:hidden;animation:mat-progress-bar-primary-indeterminate-translate 2s infinite linear;left:-145.166611%}.mat-progress-bar[mode=indeterminate] .mat-progress-bar-primary.mat-progress-bar-fill::after,.mat-progress-bar[mode=query] .mat-progress-bar-primary.mat-progress-bar-fill::after{-webkit-backface-visibility:hidden;backface-visibility:hidden;animation:mat-progress-bar-primary-indeterminate-scale 2s infinite linear}.mat-progress-bar[mode=indeterminate] .mat-progress-bar-secondary,.mat-progress-bar[mode=query] .mat-progress-bar-secondary{-webkit-backface-visibility:hidden;backface-visibility:hidden;animation:mat-progress-bar-secondary-indeterminate-translate 2s infinite linear;left:-54.888891%;display:block}.mat-progress-bar[mode=indeterminate] .mat-progress-bar-secondary.mat-progress-bar-fill::after,.mat-progress-bar[mode=query] .mat-progress-bar-secondary.mat-progress-bar-fill::after{-webkit-backface-visibility:hidden;backface-visibility:hidden;animation:mat-progress-bar-secondary-indeterminate-scale 2s infinite linear}.mat-progress-bar[mode=buffer] .mat-progress-bar-background{-webkit-backface-visibility:hidden;backface-visibility:hidden;animation:mat-progress-bar-background-scroll 250ms infinite linear;display:block}.mat-progress-bar._mat-animation-noopable .mat-progress-bar-background,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-buffer,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-fill,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-fill::after,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-primary,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-primary.mat-progress-bar-fill::after,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-secondary,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-secondary.mat-progress-bar-fill::after{animation:none;transition-duration:1ms}@keyframes mat-progress-bar-primary-indeterminate-translate{0%{transform:translateX(0)}20%{animation-timing-function:cubic-bezier(.5,0,.701732,.495819);transform:translateX(0)}59.15%{animation-timing-function:cubic-bezier(.302435,.381352,.55,.956352);transform:translateX(83.67142%)}100%{transform:translateX(200.611057%)}}@keyframes mat-progress-bar-primary-indeterminate-scale{0%{transform:scaleX(.08)}36.65%{animation-timing-function:cubic-bezier(.334731,.12482,.785844,1);transform:scaleX(.08)}69.15%{animation-timing-function:cubic-bezier(.06,.11,.6,1);transform:scaleX(.661479)}100%{transform:scaleX(.08)}}@keyframes mat-progress-bar-secondary-indeterminate-translate{0%{animation-timing-function:cubic-bezier(.15,0,.515058,.409685);transform:translateX(0)}25%{animation-timing-function:cubic-bezier(.31033,.284058,.8,.733712);transform:translateX(37.651913%)}48.35%{animation-timing-function:cubic-bezier(.4,.627035,.6,.902026);transform:translateX(84.386165%)}100%{transform:translateX(160.277782%)}}@keyframes mat-progress-bar-secondary-indeterminate-scale{0%{animation-timing-function:cubic-bezier(.15,0,.515058,.409685);transform:scaleX(.08)}19.15%{animation-timing-function:cubic-bezier(.31033,.284058,.8,.733712);transform:scaleX(.457104)}44.15%{animation-timing-function:cubic-bezier(.4,.627035,.6,.902026);transform:scaleX(.72796)}100%{transform:scaleX(.08)}}@keyframes mat-progress-bar-background-scroll{to{transform:translateX(-8px)}}</style><script charset="utf-8" src="toc-toc-module-es2015.2ed0fc86fd4f9b7bf72e.js"></script><script charset="utf-8" src="default~code-code-example-module~code-code-tabs-module-es2015.fe70520b08811d6d8f33.js"></script><script charset="utf-8" src="code-code-example-module-es2015.cd21a9e457647228fd83.js"></script><script charset="utf-8" src="live-example-live-example-module-es2015.1d25e49b85fc828d903e.js"></script><script charset="utf-8" src="assets-js-prettify-js-es2015.8cb173b668571e15d221.js"></script></head><body><aio-shell ng-version="10.0.0-rc.2" class="aio-notification-hide folder-guide mode-stable page-guide-dependency-injection-in-action sidenav-open view-SideNav"><div id="top-of-page"></div><mat-toolbar color="primary" class="mat-toolbar app-toolbar no-print mat-primary mat-toolbar-multiple-rows"><mat-toolbar-row class="mat-toolbar-row notification-container"><aio-notification notificationid="survey-march-2020" expirationdate="2020-04-15" class="ng-tns-c22-0 ng-trigger ng-trigger-hideAnimation" style="height:0"><span class="content ng-tns-c22-0"><a href="https://goo.gle/angular-survey-2020" target="_blank" class="ng-tns-c22-0"><mat-icon role="img" svgicon="insert_comment" aria-label="Announcement" class="mat-icon notranslate icon mat-icon-no-color" aria-hidden="true"><svg focusable="false" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h14l4 4V4c0-1.1-.9-2-2-2zm-2 12H6v-2h12v2zm0-3H6V9h12v2zm0-3H6V6h12v2z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></mat-icon><span class="message"><b>填写这份《一分钟调查》</b>，帮我们（开发组）做得更好！</span><span class="action-button">去填写</span></a></span><button mat-icon-button="" aria-label="Close" class="mat-focus-indicator close-button ng-tns-c22-0 mat-icon-button mat-button-base"><span class="mat-button-wrapper"><mat-icon role="img" svgicon="close" aria-label="Dismiss notification" class="mat-icon notranslate mat-icon-no-color" aria-hidden="true"><svg focusable="false" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></mat-icon></span><div matripple="" class="mat-ripple mat-button-ripple mat-button-ripple-round"></div><div class="mat-button-focus-overlay"></div></button></aio-notification></mat-toolbar-row><mat-toolbar-row class="mat-toolbar-row"><button mat-button="" title="Docs menu" class="mat-focus-indicator hamburger mat-button mat-button-base"><span class="mat-button-wrapper"><mat-icon role="img" svgicon="menu" class="mat-icon notranslate mat-icon-no-color" aria-hidden="true"><svg focusable="false" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"></path></svg></mat-icon></span><div matripple="" class="mat-ripple mat-button-ripple"></div><div class="mat-button-focus-overlay"></div></button><a href="/" class="nav-link home"><img src="assets/images/logos/angular/logo-nav@2x.png" width="150" height="40" title="Home" alt="Home" class="ng-star-inserted"></a><aio-top-menu _nghost-ng-docs-c30="" class="ng-star-inserted"><ul _ngcontent-ng-docs-c30="" role="navigation"><li _ngcontent-ng-docs-c30="" class="ng-star-inserted"><a _ngcontent-ng-docs-c30="" class="nav-link" href="features" title="特性" target="_self"><span _ngcontent-ng-docs-c30="" class="nav-link-inner">特性</span></a></li><li _ngcontent-ng-docs-c30="" class="ng-star-inserted"><a _ngcontent-ng-docs-c30="" class="nav-link" href="docs" title="文档" target="_self"><span _ngcontent-ng-docs-c30="" class="nav-link-inner">文档</span></a></li><li _ngcontent-ng-docs-c30="" class="ng-star-inserted"><a _ngcontent-ng-docs-c30="" class="nav-link" href="resources" title="资源" target="_self"><span _ngcontent-ng-docs-c30="" class="nav-link-inner">资源</span></a></li><li _ngcontent-ng-docs-c30="" class="ng-star-inserted"><a _ngcontent-ng-docs-c30="" class="nav-link" href="events" title="会议" target="_self"><span _ngcontent-ng-docs-c30="" class="nav-link-inner">会议</span></a></li><li _ngcontent-ng-docs-c30="" class="ng-star-inserted"><a _ngcontent-ng-docs-c30="" class="nav-link" href="https://blog.wangke.io/" title="译者汪志成的博客，包括翻译文章和原创文章" target="_blank"><span _ngcontent-ng-docs-c30="" class="nav-link-inner">译者博客</span></a></li><li _ngcontent-ng-docs-c30="" class="ng-star-inserted"><a _ngcontent-ng-docs-c30="" class="nav-link" href="translations/cn/home" title="关于中文版" target="_self"><span _ngcontent-ng-docs-c30="" class="nav-link-inner">关于中文版</span></a></li></ul></aio-top-menu><aio-search-box class="search-container"><input type="search" aria-label="search" placeholder="搜索"></aio-search-box><div class="toolbar-external-icons-container"><a href="https://twitter.com/angular" title="Twitter" aria-label="Angular on twitter"><mat-icon role="img" svgicon="logos:twitter" class="mat-icon notranslate mat-icon-no-color" aria-hidden="true"><svg focusable="false" viewBox="0 0 50 59" xmlns="http://www.w3.org/2000/svg"><path d="M50,9.3c-1.8,0.8-3.8,1.4-5.9,1.6c2.1-1.3,3.7-3.3,4.5-5.7c-2,1.2-4.2,2-6.5,2.5c-1.9-2-4.5-3.2-7.5-3.2c-5.7,0-10.3,4.6-10.3,10.3c0,0.8,0.1,1.6,0.3,2.3C16.1,16.7,8.5,12.6,3.5,6.4c-0.9,1.5-1.4,3.3-1.4,5.2c0,3.6,1.8,6.7,4.6,8.5C5,20,3.4,19.6,2,18.8c0,0,0,0.1,0,0.1c0,5,3.5,9.1,8.2,10.1c-0.9,0.2-1.8,0.4-2.7,0.4c-0.7,0-1.3-0.1-1.9-0.2c1.3,4.1,5.1,7,9.6,7.1c-3.5,2.8-7.9,4.4-12.7,4.4c-0.8,0-1.6,0-2.4-0.1c4.5,2.9,9.9,4.6,15.7,4.6c18.9,0,29.2-15.6,29.2-29.2c0-0.4,0-0.9,0-1.3C46.9,13.2,48.6,11.4,50,9.3z"></path></svg></mat-icon></a><a href="https://github.com/angular/angular" title="GitHub" aria-label="Angular on github"><mat-icon role="img" svgicon="logos:github" class="mat-icon notranslate mat-icon-no-color" aria-hidden="true"><svg focusable="false" viewBox="0 0 51.8 50.4" xmlns="http://www.w3.org/2000/svg"><path d="M25.9,0.2C11.8,0.2,0.3,11.7,0.3,25.8c0,11.3,7.3,20.9,17.5,24.3c1.3,0.2,1.7-0.6,1.7-1.2c0-0.6,0-2.6,0-4.8c-7.1,1.5-8.6-3-8.6-3c-1.2-3-2.8-3.7-2.8-3.7c-2.3-1.6,0.2-1.6,0.2-1.6c2.6,0.2,3.9,2.6,3.9,2.6c2.3,3.9,6,2.8,7.5,2.1c0.2-1.7,0.9-2.8,1.6-3.4c-5.7-0.6-11.7-2.8-11.7-12.7c0-2.8,1-5.1,2.6-6.9c-0.3-0.7-1.1-3.3,0.3-6.8c0,0,2.1-0.7,7,2.6c2-0.6,4.2-0.9,6.4-0.9c2.2,0,4.4,0.3,6.4,0.9c4.9-3.3,7-2.6,7-2.6c1.4,3.5,0.5,6.1,0.3,6.8c1.6,1.8,2.6,4.1,2.6,6.9c0,9.8-6,12-11.7,12.6c0.9,0.8,1.7,2.4,1.7,4.7c0,3.4,0,6.2,0,7c0,0.7,0.5,1.5,1.8,1.2c10.2-3.4,17.5-13,17.5-24.3C51.5,11.7,40.1,0.2,25.9,0.2z"></path></svg></mat-icon></a></div></mat-toolbar-row></mat-toolbar><mat-sidenav-container role="main" class="mat-drawer-container mat-sidenav-container sidenav-container mat-drawer-transition has-floating-toc"><div class="mat-drawer-backdrop ng-star-inserted"></div><div class="cdk-visually-hidden cdk-focus-trap-anchor" aria-hidden="true"></div><mat-sidenav tabindex="-1" class="mat-drawer mat-sidenav sidenav ng-tns-c18-1 ng-trigger ng-trigger-transform mat-drawer-side ng-star-inserted mat-drawer-opened" style="transform:none;visibility:visible"><div class="mat-drawer-inner-container ng-tns-c18-1"><aio-nav-menu class="ng-tns-c18-1"><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-1 collapsed ng-star-inserted" style="position:relative" href="docs" title="Angular 文档简介" target="_self"><span>简介</span></a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><button type="button" class="vertical-menu-item heading level-1 collapsed ng-star-inserted" title="建立开发环境，并学习基本概念" aria-pressed="false"><span>快速上手</span><mat-icon role="img" svgicon="keyboard_arrow_right" class="mat-icon notranslate rotating-icon mat-icon-no-color" aria-hidden="true"><svg focusable="false" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"></path></svg></mat-icon></button><div class="heading-children level-1 collapsed"><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-2 collapsed ng-star-inserted" style="position:relative" href="guide/setup-local" title="使用 Angular CLI 搭建本地开发环境。" target="_self"><span>搭建环境</span></a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><button type="button" class="vertical-menu-item heading level-2 collapsed ng-star-inserted" title="介绍 Angular 应用中的一些基本概念。" aria-pressed="false"><span>Angular 的基本概念</span><mat-icon role="img" svgicon="keyboard_arrow_right" class="mat-icon notranslate rotating-icon mat-icon-no-color" aria-hidden="true"><svg focusable="false" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"></path></svg></mat-icon></button><div class="heading-children level-2 collapsed"><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="guide/architecture" title="Angular 应用中的基本构造块。" target="_self"><span>基本概念简介</span></a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="guide/architecture-modules" title="关于 Angular 模块（NgModules）。" target="_self"><span>模块简介</span></a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="guide/architecture-components" title="关于组件、模板和视图。" target="_self"><span>组件简介</span></a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="guide/architecture-services" title="关于服务与依赖注入。" target="_self"><span>服务与 DI 简介</span></a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="guide/architecture-next-steps" title="超越基础阶段。" target="_self"><span>后续步骤</span></a></div></aio-nav-item></div></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-2 collapsed ng-star-inserted" style="position:relative" href="guide/glossary" title="Angular 中最重要的词汇的简要定义。" target="_self"><span>Angular 词汇表</span></a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><button type="button" class="vertical-menu-item heading level-2 collapsed ng-star-inserted" title="不必搭建环境，查看并试用现成的示例应用程序。" aria-pressed="false"><span>试一试</span><mat-icon role="img" svgicon="keyboard_arrow_right" class="mat-icon notranslate rotating-icon mat-icon-no-color" aria-hidden="true"><svg focusable="false" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"></path></svg></mat-icon></button><div class="heading-children level-2 collapsed"><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="start" title="初步了解 Angular 的组件模型、模板语法和组件通讯。" target="_self"><span>一个范例应用</span></a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="start/start-routing" title="使用浏览器的 URL 在不同的页面视图之间导航。" target="_self"><span>应用内导航</span></a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="start/start-data" title="通过 HTTP 使用服务并访问外部数据。" target="_self"><span>管理数据</span></a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="start/start-forms" title="学习如何使用表单从用户获取并管理数据。" target="_self"><span>表单与用户输入</span></a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="start/start-deployment" title="移到本地进行开发或者把应用部署到 Firebase 或你自己的服务器。" target="_self"><span>部署</span></a></div></aio-nav-item></div></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><button type="button" class="vertical-menu-item heading level-2 collapsed ng-star-inserted" title="英雄指南应用是很多 Angular 范例的参考点。" aria-pressed="false"><span>教程：英雄指南</span><mat-icon role="img" svgicon="keyboard_arrow_right" class="mat-icon notranslate rotating-icon mat-icon-no-color" aria-hidden="true"><svg focusable="false" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"></path></svg></mat-icon></button><div class="heading-children level-2 collapsed"><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="tutorial" title="英雄指南教程简介" target="_self"><span>简介</span></a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="tutorial/toh-pt0" title="创建应用的外壳" target="_self"><span>创建项目</span></a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="tutorial/toh-pt1" title="第一部分：构建一个简单的英雄编辑器" target="_self"><span>1. 英雄编辑器</span></a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="tutorial/toh-pt2" title="第二部分：构建一个主从结构的页面，用于展现英雄列表。" target="_self"><span>2. 显示英雄列表</span></a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="tutorial/toh-pt3" title="第三部分：把主从结构的视图重构成几个独立的组件。" target="_self"><span>3. 创建特性组件</span></a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="tutorial/toh-pt4" title="第四部分：创建一个可复用的服务来管理英雄数据。" target="_self"><span>4. 添加服务</span></a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="tutorial/toh-pt5" title="第五部分：添加 Angular 路由器，并且学习在视图之间导航。" target="_self"><span>5. 添加应用内导航</span></a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="tutorial/toh-pt6" title="第六部分：通过 HTTP 来获取并保存英雄数据。" target="_self"><span>6. 从服务器获取数据</span></a></div></aio-nav-item></div></div></aio-nav-item></div></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><button type="button" class="vertical-menu-item heading level-1 expanded selected ng-star-inserted" title="Angular 基础知识" aria-pressed="true"><span>基础知识</span><mat-icon role="img" svgicon="keyboard_arrow_right" class="mat-icon notranslate rotating-icon mat-icon-no-color" aria-hidden="true"><svg focusable="false" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"></path></svg></mat-icon></button><div class="heading-children level-1 expanded selected"><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><button type="button" class="vertical-menu-item heading level-2 collapsed ng-star-inserted" title="通过数据绑定构建动态视图" aria-pressed="false"><span>组件与模板</span><mat-icon role="img" svgicon="keyboard_arrow_right" class="mat-icon notranslate rotating-icon mat-icon-no-color" aria-hidden="true"><svg focusable="false" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"></path></svg></mat-icon></button><div class="heading-children level-2 collapsed"><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="guide/displaying-data" title="属性绑定可以帮助应用把数据显示在界面上" target="_self"><span>显示数据</span></a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="guide/template-syntax" title="学习如何写模板，以便借助数据绑定机制显示数据并响应事件。" target="_self"><span>模板语法</span></a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="guide/user-input" title="用户输入会触发 DOM 事件。Angular 会通过事件绑定来监听那些事件，并把修改后的值传回应用的组件和模型中。" target="_self"><span>用户输入</span></a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="guide/attribute-directives" title="属性型指令把行为添加到现有元素上。" target="_self"><span>属性型指令</span></a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="guide/structural-directives" title="结构型指令可以操纵页面的布局" target="_self"><span>结构型指令</span></a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="guide/pipes" title="管道可以在模板中转换显示的内容。" target="_self"><span>管道</span></a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="guide/lifecycle-hooks" title="Angular 会在创建、修改、删除指令和组件时，调用其生命周期钩子方法。" target="_self"><span>挂钩进组件的生命周期</span></a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="guide/component-interaction" title="在不同的指令和组件之间共享信息" target="_self"><span>组件交互</span></a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="guide/component-styles" title="添加专属于某个组件的样式" target="_self"><span>组件样式</span></a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="guide/dynamic-component-loader" title="动态加载组件" target="_self"><span>动态组件</span></a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="guide/elements" title="把组件转换成自定义元素" target="_self"><span>Angular 元素</span></a></div></aio-nav-item></div></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><button type="button" class="vertical-menu-item heading level-2 collapsed ng-star-inserted" title="表单可以创建集中、高效、引人注目的输入体验。" aria-pressed="false"><span>表单与用户输入</span><mat-icon role="img" svgicon="keyboard_arrow_right" class="mat-icon notranslate rotating-icon mat-icon-no-color" aria-hidden="true"><svg focusable="false" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"></path></svg></mat-icon></button><div class="heading-children level-2 collapsed"><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="guide/forms-overview" title="Angular 表单可以协调一组数据绑定控件，跟踪变更，验证输入，并表达错误信息。" target="_self"><span>简介</span></a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="guide/reactive-forms" title="使用 FormBuilder、表单组和表单数组创建响应式表单。" target="_self"><span>响应式表单</span></a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="guide/form-validation" title="验证用户的表单输入" target="_self"><span>验证表单输入</span></a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="guide/dynamic-form" title="使用 FormGroup 创建动态表单。" target="_self"><span>构建动态表单</span></a></div></aio-nav-item></div></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><button type="button" class="vertical-menu-item heading level-2 collapsed ng-star-inserted" title="使用 Observable 在 Angular 中进行信息传递。" aria-pressed="false"><span>Observable 与 RxJS</span><mat-icon role="img" svgicon="keyboard_arrow_right" class="mat-icon notranslate rotating-icon mat-icon-no-color" aria-hidden="true"><svg focusable="false" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"></path></svg></mat-icon></button><div class="heading-children level-2 collapsed"><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="guide/observables" title="使用 Observable 来同步或异步传递值。" target="_self"><span>Observable 概览</span></a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="guide/rx-library" title="一个响应式编程库，使用 Observable 来合并异步请求或基于回调的代码。" target="_self"><span>RxJS 库</span></a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="guide/observables-in-angular" title="Angular 各个子系统中如何使用和期待 Observable" target="_self"><span>Angular 中的可观察对象</span></a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="guide/practical-observable-usage" title="那些特别适用 Observable 的领域。" target="_self"><span>用法实战</span></a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="guide/comparing-observables" title="Observable 与 Promise 或其它消息传递技术的比较" target="_self"><span>与其它技术的比较</span></a></div></aio-nav-item></div></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><button type="button" class="vertical-menu-item heading level-2 collapsed ng-star-inserted" title="Angular 中的模块" aria-pressed="false"><span>NgModules</span><mat-icon role="img" svgicon="keyboard_arrow_right" class="mat-icon notranslate rotating-icon mat-icon-no-color" aria-hidden="true"><svg focusable="false" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"></path></svg></mat-icon></button><div class="heading-children level-2 collapsed"><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="guide/ngmodules" title="使用 NgModule 让你的应用更高效" target="_self"><span>NgModule 简介</span></a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="guide/ngmodule-vs-jsmodule" title="JavaScript 模块和 NgModule 之间的差异" target="_self"><span>JS 模块 vs NgModule</span></a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="guide/bootstrapping" title="告诉 Angular 如何在根 &quot;AppModule&quot; 中构造和引导应用。" target="_self"><span>使用根模块启动应用</span></a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="guide/frequent-ngmodules" title="介绍最常用的 NgModule" target="_self"><span>常用模块</span></a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="guide/module-types" title="介绍特性模块的几种类型" target="_self"><span>特性模块的分类</span></a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="guide/entry-components" title="关于 Angular 中入口组件的一切" target="_self"><span>入口组件</span></a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="guide/feature-modules" title="创建特性模块，以组织你的代码" target="_self"><span>特性模块</span></a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="guide/providers" title="向 NgModule 提供依赖。" target="_self"><span>提供依赖</span></a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="guide/singleton-services" title="创建单例服务" target="_self"><span>单例服务</span></a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="guide/lazy-loading-ngmodules" title="惰性加载模块，以提高应用的性能" target="_self"><span>惰性加载的特性模块</span></a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="guide/sharing-ngmodules" title="共享 NgModule 让你的应用现代化。" target="_self"><span>共享 NgModule</span></a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="guide/ngmodule-api" title="理解 NgModule 的那些细节。" target="_self"><span>NgModule API</span></a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="guide/ngmodule-faq" title="回答关于 NgModules 的常见问题。" target="_self"><span>NgModule 常见问题</span></a></div></aio-nav-item></div></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><button type="button" class="vertical-menu-item heading level-2 expanded selected ng-star-inserted" title="依赖注入：创建并注入各种服务。" aria-pressed="true"><span>依赖注入</span><mat-icon role="img" svgicon="keyboard_arrow_right" class="mat-icon notranslate rotating-icon mat-icon-no-color" aria-hidden="true"><svg focusable="false" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"></path></svg></mat-icon></button><div class="heading-children level-2 expanded selected"><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="guide/dependency-injection" title="Angular 的依赖注入系统能够为 Angular 创建的类创建并交付它们所依赖的服务。" target="_self"><span>Angular 依赖注入</span></a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="guide/hierarchical-dependency-injection" title="与组件树平行的注入器树，并支持嵌套的依赖。" target="_self"><span>多级注入器</span></a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="guide/dependency-injection-providers" title="各种提供者类型的更多知识。" target="_self"><span>DI 提供者</span></a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 expanded selected ng-star-inserted" style="position:relative" href="guide/dependency-injection-in-action" title="依赖注入的使用技巧" target="_self"><span>DI 实战</span></a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="guide/dependency-injection-navtree" title="使用注入器树来查找父组件。" target="_self"><span>浏览组件树</span></a></div></aio-nav-item></div></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-2 collapsed ng-star-inserted" style="position:relative" href="guide/http" title="通过 HTTP 协议与远程服务器对话。" target="_self"><span>通过 HTTP 访问服务器</span></a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-2 collapsed ng-star-inserted" style="position:relative" href="guide/router" title="使用 Angular 路由器在多个视图之间进行应用内导航。" target="_self"><span>路由与导航</span></a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-2 collapsed ng-star-inserted" style="position:relative" href="guide/security" title="Angular 应用开发中的内容安全性。" target="_self"><span>安全</span></a></div></aio-nav-item></div></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><button type="button" class="vertical-menu-item heading level-1 collapsed ng-star-inserted" title="在你的环境中使用 Angular 的其它技术" aria-pressed="false"><span>其它技术</span><mat-icon role="img" svgicon="keyboard_arrow_right" class="mat-icon notranslate rotating-icon mat-icon-no-color" aria-hidden="true"><svg focusable="false" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"></path></svg></mat-icon></button><div class="heading-children level-1 collapsed"><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><button type="button" class="vertical-menu-item heading level-2 collapsed ng-star-inserted" title="通过动画增强用户体验。" aria-pressed="false"><span>动画</span><mat-icon role="img" svgicon="keyboard_arrow_right" class="mat-icon notranslate rotating-icon mat-icon-no-color" aria-hidden="true"><svg focusable="false" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"></path></svg></mat-icon></button><div class="heading-children level-2 collapsed"><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="guide/animations" title="Angular 动画的基础技术。" target="_self"><span>简介</span></a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="guide/transition-and-triggers" title="转场与触发器的高级技术。" target="_self"><span>转场与触发器</span></a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="guide/complex-animation-sequences" title="复杂的 Angular 动画序列。" target="_self"><span>复杂序列</span></a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="guide/reusable-animations" title="创建可复用的动画。" target="_self"><span>可复用动画</span></a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="guide/route-animations" title="为路由提供转场动画。" target="_self"><span>路由转场动画</span></a></div></aio-nav-item></div></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-2 collapsed ng-star-inserted" style="position:relative" href="guide/i18n" title="把应用模板中的文本翻译成多种语言。" target="_self"><span>国际化（i18n）</span></a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-2 collapsed ng-star-inserted" style="position:relative" href="guide/accessibility" title="设计能被所有用户访问的应用" target="_self"><span>无障碍（a11y）</span></a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><button type="button" class="vertical-menu-item heading level-2 collapsed ng-star-inserted" title="Angular Service Worker: 控制应用资源的缓存。" aria-pressed="false"><span>Service Worker 与 PWA</span><mat-icon role="img" svgicon="keyboard_arrow_right" class="mat-icon notranslate rotating-icon mat-icon-no-color" aria-hidden="true"><svg focusable="false" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"></path></svg></mat-icon></button><div class="heading-children level-2 collapsed"><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="guide/service-worker-intro" title="Angular 对 Service Worker 的实现提升了慢速或不稳定的网络连接下的用户体验。" target="_self"><span>简介</span></a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="guide/service-worker-getting-started" title="在 CLI 项目中启用 Service Worker，并在浏览器中查看效果。" target="_self"><span>快速上手</span></a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="guide/app-shell" title="快速渲染应用的一部分，以增强启动时的体验。" target="_self"><span>应用外壳</span></a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="guide/service-worker-communications" title="那些能让你和 Angular 的 Service Worker 通讯的服务类。" target="_self"><span>与 Service Worker 通讯</span></a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="guide/service-worker-devops" title="运行带有 Service Worker 的应用、管理应用的更新、调试以及杀死应用。" target="_self"><span>生产环境下的 Service Worker</span></a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="guide/service-worker-config" title="配置 Service Worker 的缓存行为。" target="_self"><span>Service Worker 配置</span></a></div></aio-nav-item></div></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-2 collapsed ng-star-inserted" style="position:relative" href="guide/web-worker" title="Using web workers for background processing." target="_self"><span>Web Workers</span></a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-2 collapsed ng-star-inserted" style="position:relative" href="guide/universal" title="使用 Angular Universal 在服务端渲染 HTML。" target="_self"><span>服务端渲染</span></a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><button type="button" class="vertical-menu-item heading level-2 collapsed ng-star-inserted" title="把 AngularJS 应用增量式的升级到 Angular。" aria-pressed="false"><span>从 AngularJS 升级</span><mat-icon role="img" svgicon="keyboard_arrow_right" class="mat-icon notranslate rotating-icon mat-icon-no-color" aria-hidden="true"><svg focusable="false" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"></path></svg></mat-icon></button><div class="heading-children level-2 collapsed"><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="guide/upgrade" title="把 AngularJS 应用增量式的升级到 Angular。" target="_self"><span>升级步骤</span></a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="guide/upgrade-performance" title="用更灵活的方式把 AngularJS 升级到 Angular。" target="_self"><span>更关注性能的升级方式</span></a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="guide/ajs-quick-reference" title="学习如何把 AngularJS 的概念映射到 Angular 中。" target="_self"><span>AngularJS 与 Angular 的概念对照</span></a></div></aio-nav-item></div></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><button type="button" class="vertical-menu-item heading level-2 collapsed ng-star-inserted" title="使用共享库扩展 Angular" aria-pressed="false"><span>开发 Angular 库</span><mat-icon role="img" svgicon="keyboard_arrow_right" class="mat-icon notranslate rotating-icon mat-icon-no-color" aria-hidden="true"><svg focusable="false" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"></path></svg></mat-icon></button><div class="heading-children level-2 collapsed"><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="guide/libraries" title="理解何时以及如何使用和创建库。" target="_self"><span>库概览</span></a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="guide/using-libraries" title="把已发布的库集成进你的应用中。" target="_self"><span>使用已发布的库</span></a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="guide/creating-libraries" title="通过创建、发布和使用你自己的库来扩展 Angular。" target="_self"><span>创建库</span></a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="guide/lightweight-injection-tokens" title="使用轻量级注入令牌来设计库中的服务，以优化客户端应用的大小。" target="_self"><span>供库使用的轻量级注入令牌</span></a></div></aio-nav-item></div></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><button type="button" class="vertical-menu-item heading level-2 collapsed ng-star-inserted" title="使用 CLI 原理图进行代码生成。" aria-pressed="false"><span>原理图（Schematics）</span><mat-icon role="img" svgicon="keyboard_arrow_right" class="mat-icon notranslate rotating-icon mat-icon-no-color" aria-hidden="true"><svg focusable="false" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"></path></svg></mat-icon></button><div class="heading-children level-2 collapsed"><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="guide/schematics" title="CLI 如何使用原理图来生成代码。" target="_self"><span>原理图概览</span></a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="guide/schematics-authoring" title="理解原理图的结构。" target="_self"><span>制作原理图</span></a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="guide/schematics-for-libraries" title="使用原理图来把你的库集成进 Angular CLI 中。" target="_self"><span>库的原理图</span></a></div></aio-nav-item></div></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-2 collapsed ng-star-inserted" style="position:relative" href="guide/cli-builder" title="使用构建器定制 Angular CLI。" target="_self"><span>CLI 构建器</span></a></div></aio-nav-item></div></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><button type="button" class="vertical-menu-item heading level-1 collapsed ng-star-inserted" title="关于构建、测试和部署的信息" aria-pressed="false"><span>开发工作流</span><mat-icon role="img" svgicon="keyboard_arrow_right" class="mat-icon notranslate rotating-icon mat-icon-no-color" aria-hidden="true"><svg focusable="false" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"></path></svg></mat-icon></button><div class="heading-children level-1 collapsed"><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><button type="button" class="vertical-menu-item heading level-2 collapsed ng-star-inserted" title="理解（AOT）预先编译器" aria-pressed="false"><span>AOT 预先编译器</span><mat-icon role="img" svgicon="keyboard_arrow_right" class="mat-icon notranslate rotating-icon mat-icon-no-color" aria-hidden="true"><svg focusable="false" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"></path></svg></mat-icon></button><div class="heading-children level-2 collapsed"><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="guide/aot-compiler" title="学习为何以及如何使用预先编译器。" target="_self"><span>预先编译</span></a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="guide/angular-compiler-options" title="配置 AOT 编译。" target="_self"><span>Angular 编译器选项</span></a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="guide/aot-metadata-errors" title="解决 AOT 编译错误。" target="_self"><span>AOT 元数据错误</span></a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="guide/template-typecheck" title="Angular 中的模板类型检查。" target="_self"><span>模板类型检查</span></a></div></aio-nav-item></div></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-2 collapsed ng-star-inserted" style="position:relative" href="guide/build" title="构建应用及为应用启动开发服务器。" target="_self"><span>构建与运行</span></a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-2 collapsed ng-star-inserted" style="position:relative" href="guide/testing" title="测试 Angular 应用的技巧与实践。" target="_self"><span>测试</span></a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-2 collapsed ng-star-inserted" style="position:relative" href="guide/deployment" title="了解如何部署 Angular 应用。" target="_self"><span>发布</span></a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><button type="button" class="vertical-menu-item heading level-2 collapsed ng-star-inserted" title="与开发环境和工具集成起来" aria-pressed="false"><span>开发工具集成</span><mat-icon role="img" svgicon="keyboard_arrow_right" class="mat-icon notranslate rotating-icon mat-icon-no-color" aria-hidden="true"><svg focusable="false" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"></path></svg></mat-icon></button><div class="heading-children level-2 collapsed"><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="guide/language-service" title="使用 Angular 语言服务加速开发。" target="_self"><span>语言服务</span></a></div></aio-nav-item></div></div></aio-nav-item></div></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><button type="button" class="vertical-menu-item heading level-1 collapsed ng-star-inserted" title="工作空间与项目的结构，及其配置。" aria-pressed="false"><span>配置</span><mat-icon role="img" svgicon="keyboard_arrow_right" class="mat-icon notranslate rotating-icon mat-icon-no-color" aria-hidden="true"><svg focusable="false" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"></path></svg></mat-icon></button><div class="heading-children level-1 collapsed"><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-2 collapsed ng-star-inserted" style="position:relative" href="guide/file-structure" title="Angular 工作区在文件系统中是怎样的。" target="_self"><span>项目文件结构</span></a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-2 collapsed ng-star-inserted" style="position:relative" href="guide/workspace-config" title="&quot;angular.json&quot; 包含供 CLI 命令使用的工作区和项目默认配置。" target="_self"><span>工作区配置</span></a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-2 collapsed ng-star-inserted" style="position:relative" href="guide/npm-packages" title="开发期间和运行期间所需的 npm 包的说明。" target="_self"><span>npm 包</span></a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-2 collapsed ng-star-inserted" style="position:relative" href="guide/typescript-configuration" title="给 Angular 开发者的 TypeScript 配置。" target="_self"><span>TypeScript 配置</span></a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-2 collapsed ng-star-inserted" style="position:relative" href="guide/browser-support" title="浏览器支持与腻子脚本指南。" target="_self"><span>浏览器支持</span></a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-2 collapsed ng-star-inserted" style="position:relative" href="guide/strict-mode" title="Reference documentation for Angular's strict mode." target="_self"><span>Strict mode</span></a></div></aio-nav-item></div></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><button type="button" class="vertical-menu-item heading level-1 collapsed ng-star-inserted" title="使用库，以及扩展 Angular CLI" aria-pressed="false"><span>扩展 Angular</span><mat-icon role="img" svgicon="keyboard_arrow_right" class="mat-icon notranslate rotating-icon mat-icon-no-color" aria-hidden="true"><svg focusable="false" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"></path></svg></mat-icon></button><div class="heading-children level-1 collapsed"><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><button type="button" class="vertical-menu-item heading level-2 collapsed ng-star-inserted" title="使用共享库扩展 Angular" aria-pressed="false"><span>Angular 库</span><mat-icon role="img" svgicon="keyboard_arrow_right" class="mat-icon notranslate rotating-icon mat-icon-no-color" aria-hidden="true"><svg focusable="false" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"></path></svg></mat-icon></button><div class="heading-children level-2 collapsed"><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="guide/libraries" title="理解如何以及何时使用或创建库" target="_self"><span>库概览</span></a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="guide/using-libraries" title="把已发布的库集成到应用中" target="_self"><span>使用已发布的库</span></a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="guide/creating-libraries" title="通过创建、发布和使用自定义库来扩展 Angular" target="_self"><span>创建库</span></a></div></aio-nav-item></div></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><button type="button" class="vertical-menu-item heading level-2 collapsed ng-star-inserted" title="理解原理图" aria-pressed="false"><span>原理图（Schematic）</span><mat-icon role="img" svgicon="keyboard_arrow_right" class="mat-icon notranslate rotating-icon mat-icon-no-color" aria-hidden="true"><svg focusable="false" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"></path></svg></mat-icon></button><div class="heading-children level-2 collapsed"><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="guide/schematics" title="扩展 CLI 的生成能力" target="_self"><span>原理图概览</span></a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="guide/schematics-authoring" title="理解原理图的结构" target="_self"><span>创作原理图</span></a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="guide/schematics-for-libraries" title="使用原理图把你的库整合进 Angular CLI" target="_self"><span>库的原理图</span></a></div></aio-nav-item></div></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-2 collapsed ng-star-inserted" style="position:relative" href="guide/cli-builder" title="使用构建器定制 Angular CLI" target="_self"><span>CLI 构建器</span></a></div></aio-nav-item></div></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><button type="button" class="vertical-menu-item heading level-1 collapsed ng-star-inserted" title="一个端到端教程，用来学习 Angular 的概念和模式。" aria-pressed="false"><span>教程</span><mat-icon role="img" svgicon="keyboard_arrow_right" class="mat-icon notranslate rotating-icon mat-icon-no-color" aria-hidden="true"><svg focusable="false" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"></path></svg></mat-icon></button><div class="heading-children level-1 collapsed"><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-2 collapsed ng-star-inserted" style="position:relative" href="guide/router-tutorial" title="一个与 Angular 路由有关的、涵盖很多模式的教程。" target="_self"><span>在单页面应用中使用 Angular 路由</span></a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-2 collapsed ng-star-inserted" style="position:relative" href="guide/forms" title="使用指令和 Angular 模板语法来创建模板驱动表单。" target="_self"><span>构建模板驱动表单</span></a></div></aio-nav-item></div></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><button type="button" class="vertical-menu-item heading level-1 collapsed ng-star-inserted" title="Angular 的版本发布实践、更新与升级。" aria-pressed="false"><span>发布信息</span><mat-icon role="img" svgicon="keyboard_arrow_right" class="mat-icon notranslate rotating-icon mat-icon-no-color" aria-hidden="true"><svg focusable="false" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"></path></svg></mat-icon></button><div class="heading-children level-1 collapsed"><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-2 collapsed ng-star-inserted" style="position:relative" href="guide/updating" title="如何把 Angular 应用和库升级到最新版本。" target="_self"><span>保持最新</span></a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-2 collapsed ng-star-inserted" style="position:relative" href="guide/releases" title="Angular 的版本、发布、支持、弃用策略及实践。" target="_self"><span>发布实践</span></a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><button type="button" class="vertical-menu-item heading level-2 collapsed ng-star-inserted" title="支持把你的应用从 9 升级到 10。" aria-pressed="false"><span>升级到 Angular 10</span><mat-icon role="img" svgicon="keyboard_arrow_right" class="mat-icon notranslate rotating-icon mat-icon-no-color" aria-hidden="true"><svg focusable="false" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"></path></svg></mat-icon></button><div class="heading-children level-2 collapsed"><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="guide/updating-to-version-10" title="当把应用从 9 升到 10 时你需要知道的一切。" target="_self"><span>概览</span></a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="guide/ivy-compatibility" title="确保你的应用和 Ivy 兼容的详细指南。" target="_self"><span>Ivy 兼容性指南</span></a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><button type="button" class="vertical-menu-item heading level-3 collapsed ng-star-inserted" title="升级到 Angular 10 时一些可选的迁移工作。" aria-pressed="false"><span>可选的迁移工作</span><mat-icon role="img" svgicon="keyboard_arrow_right" class="mat-icon notranslate rotating-icon mat-icon-no-color" aria-hidden="true"><svg focusable="false" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"></path></svg></mat-icon></button><div class="heading-children level-3 collapsed"><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-4 collapsed ng-star-inserted" style="position:relative" href="guide/migration-module-with-providers" title="为任何缺失了泛型的 ModuleWithProviders 添加泛型类型。" target="_self"><span>缺少 ModuleWithProviders 泛型</span></a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-4 collapsed ng-star-inserted" style="position:relative" href="guide/migration-undecorated-classes" title="添加缺失的 @Directive()/@Component() 装饰器。" target="_self"><span>缺少 @Directive() 装饰器</span></a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-4 collapsed ng-star-inserted" style="position:relative" href="guide/migration-injectable" title="添加缺失的 @Injectable() 装饰器，补齐不完整的服务提供者定义。" target="_self"><span>缺少 @Injectable() 装饰器</span></a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-4 collapsed ng-star-inserted" style="position:relative" href="guide/migration-solution-style-tsconfig" title="创建解决方案型的 `tsconfig.json`." target="_self"><span>解决方案型的 `tsconfig.json`</span></a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-4 collapsed ng-star-inserted" style="position:relative" href="guide/migration-update-libraries-tslib" title="直接依赖 `tslib` npm 包。" target="_self"><span>`tslib` 直接依赖</span></a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-4 collapsed ng-star-inserted" style="position:relative" href="guide/migration-update-module-and-target-compiler-options" title="修改 `module` 和 `target` 编译器选项。" target="_self"><span>`module` 和 `target` 编译器选项</span></a></div></aio-nav-item></div></div></aio-nav-item></div></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-2 collapsed ng-star-inserted" style="position:relative" href="guide/deprecations" title="弃用的 Angular API 和特性汇总。" target="_self"><span>弃用清单</span></a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-2 collapsed ng-star-inserted" style="position:relative" href="guide/ivy" title="关于 Angular Ivy 的编译与渲染管道。" target="_self"><span>Angular Ivy</span></a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><button type="button" class="vertical-menu-item heading level-2 collapsed ng-star-inserted" title="把 AngularJS 应用增量式的升级到 Angular。" aria-pressed="false"><span>从 AngularJS 升级</span><mat-icon role="img" svgicon="keyboard_arrow_right" class="mat-icon notranslate rotating-icon mat-icon-no-color" aria-hidden="true"><svg focusable="false" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"></path></svg></mat-icon></button><div class="heading-children level-2 collapsed"><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="guide/upgrade" title="把 AngularJS 应用增量式的升级到 Angular。" target="_self"><span>升级步骤</span></a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="guide/upgrade-performance" title="用更灵活的方式把 AngularJS 升级到 Angular。" target="_self"><span>更关注性能的升级方式</span></a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-3 collapsed ng-star-inserted" style="position:relative" href="guide/ajs-quick-reference" title="学习如何把 AngularJS 的概念映射到 Angular 中。" target="_self"><span>AngularJS 与 Angular 的概念对照</span></a></div></aio-nav-item></div></div></aio-nav-item></div></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><button type="button" class="vertical-menu-item heading level-1 collapsed ng-star-inserted" title="Angular 的语法、代码、文档风格汇总。" aria-pressed="false"><span>Angular 的风格与用法</span><mat-icon role="img" svgicon="keyboard_arrow_right" class="mat-icon notranslate rotating-icon mat-icon-no-color" aria-hidden="true"><svg focusable="false" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"></path></svg></mat-icon></button><div class="heading-children level-1 collapsed"><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-2 collapsed ng-star-inserted" style="position:relative" href="guide/cheatsheet" title="关于 Angular 常用编码技术的快速指南。" target="_self"><span>速查表</span></a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-2 collapsed ng-star-inserted" style="position:relative" href="guide/styleguide" title="编写 Angular 代码的指南。" target="_self"><span>代码风格指南</span></a></div></aio-nav-item></div></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><button type="button" class="vertical-menu-item heading level-1 collapsed ng-star-inserted" title="Angular CLI 命令参考手册。" aria-pressed="false"><span>CLI 命令参考手册</span><mat-icon role="img" svgicon="keyboard_arrow_right" class="mat-icon notranslate rotating-icon mat-icon-no-color" aria-hidden="true"><svg focusable="false" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"></path></svg></mat-icon></button><div class="heading-children level-1 collapsed"><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-2 collapsed ng-star-inserted" style="position:relative" href="cli" title="CLI 工具介绍、命令、语法" target="_self"><span>概览</span></a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-2 collapsed ng-star-inserted" style="position:relative" href="cli/usage-analytics-gathering" title="管理员如何从用户那里收集使用情况分析。" target="_self"><span>使用情况分析</span></a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-2 collapsed ng-star-inserted" style="position:relative" href="cli/add" title="ng add." target="_self"><span>ng add</span></a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-2 collapsed ng-star-inserted" style="position:relative" href="cli/analytics" title="ng analytics." target="_self"><span>ng analytics</span></a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-2 collapsed ng-star-inserted" style="position:relative" href="cli/build" title="ng build." target="_self"><span>ng build</span></a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-2 collapsed ng-star-inserted" style="position:relative" href="cli/config" title="ng config." target="_self"><span>ng config</span></a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-2 collapsed ng-star-inserted" style="position:relative" href="cli/deploy" title="ng deploy." target="_self"><span>ng deploy</span></a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-2 collapsed ng-star-inserted" style="position:relative" href="cli/doc" title="ng doc." target="_self"><span>ng doc</span></a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-2 collapsed ng-star-inserted" style="position:relative" href="cli/e2e" title="ng e2e." target="_self"><span>ng e2e</span></a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-2 collapsed ng-star-inserted" style="position:relative" href="cli/generate" title="ng generate." target="_self"><span>ng generate</span></a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-2 collapsed ng-star-inserted" style="position:relative" href="cli/help" title="ng help." target="_self"><span>ng help</span></a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-2 collapsed ng-star-inserted" style="position:relative" href="cli/lint" title="ng lint." target="_self"><span>ng lint</span></a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-2 collapsed ng-star-inserted" style="position:relative" href="cli/new" title="ng new." target="_self"><span>ng new</span></a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-2 collapsed ng-star-inserted" style="position:relative" href="cli/run" title="ng run." target="_self"><span>ng run</span></a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-2 collapsed ng-star-inserted" style="position:relative" href="cli/serve" title="ng serve." target="_self"><span>ng serve</span></a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-2 collapsed ng-star-inserted" style="position:relative" href="cli/test" title="ng test." target="_self"><span>ng test</span></a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-2 collapsed ng-star-inserted" style="position:relative" href="cli/update" title="ng update." target="_self"><span>ng update</span></a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-2 collapsed ng-star-inserted" style="position:relative" href="cli/version" title="ng version." target="_self"><span>ng version</span></a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-2 collapsed ng-star-inserted" style="position:relative" href="cli/xi18n" title="ng xi18n." target="_self"><span>ng xi18n</span></a></div></aio-nav-item></div></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-1 collapsed ng-star-inserted" style="position:relative" href="api" title="Angular 中的包、类、接口和其它类型的详情。" target="_self"><span>API 参考手册</span></a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><div class="mat-divider ng-star-inserted" style="margin:4px 20px;border-top:1px solid #d3d3d3"></div></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-1 collapsed ng-star-inserted" style="position:relative" href="https://github.com/ng-docs/ng-docs.github.io/issues" title="github 上的中文互助问答区" target="_blank"><span>互助问答</span><mat-icon role="img" class="mat-icon notranslate material-icons mat-icon-no-color ng-star-inserted" aria-hidden="true">open_in_new</mat-icon></a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-1 collapsed ng-star-inserted" style="position:relative" href="https://material.angular.cn" title="Angular Material 组件库的中文文档" target="_blank"><span>官方 Material 组件库</span><mat-icon role="img" class="mat-icon notranslate material-icons mat-icon-no-color ng-star-inserted" aria-hidden="true">open_in_new</mat-icon></a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-1 collapsed ng-star-inserted" style="position:relative" href="https://ng.ant.design/" title="Ant Design 的 Angular 实现，服务于企业级后台产品。" target="_blank"><span>ng-zorro 组件库</span><mat-icon role="img" class="mat-icon notranslate material-icons mat-icon-no-color ng-star-inserted" aria-hidden="true">open_in_new</mat-icon></a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-1 collapsed ng-star-inserted" style="position:relative" href="https://devui.design/" title="“华为云” 开源的企业级组件库，核心设计思想是：致简、沉浸、灵活" target="_blank"><span>华为 DevUI 组件库</span><mat-icon role="img" class="mat-icon notranslate material-icons mat-icon-no-color ng-star-inserted" aria-hidden="true">open_in_new</mat-icon></a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-1 collapsed ng-star-inserted" style="position:relative" href="https://ngnest.com/" title="基于 Angular 和 Nest 的 Web 应用程序框架，UI 库中涵盖了企业开发中需要的大部分组件，table、form、tree、message、dialog、menu、tabs 等一共 60+ 基础组件" target="_blank"><span>ng-nest 组件库</span><mat-icon role="img" class="mat-icon notranslate material-icons mat-icon-no-color ng-star-inserted" aria-hidden="true">open_in_new</mat-icon></a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-1 collapsed ng-star-inserted" style="position:relative" href="https://ng.mobile.ant.design/" title="Ant Design Mobile 的 Angular 实现，服务于无线产品。" target="_blank"><span>ng-zorro mobile 组件库</span><mat-icon role="img" class="mat-icon notranslate material-icons mat-icon-no-color ng-star-inserted" aria-hidden="true">open_in_new</mat-icon></a></div></aio-nav-item><aio-nav-item class="ng-star-inserted"><div class="ng-star-inserted"><a class="vertical-menu-item level-1 collapsed ng-star-inserted" style="position:relative" href="https://flutter.cn/" title="Flutter 中文文档站" target="_blank"><span>友站：Flutter 中文</span><mat-icon role="img" class="mat-icon notranslate material-icons mat-icon-no-color ng-star-inserted" aria-hidden="true">open_in_new</mat-icon></a></div></aio-nav-item></aio-nav-menu><div class="doc-version ng-tns-c18-1"><aio-select><div class="form-select-menu"><button class="form-select-button"><span><strong></strong></span><span>同步翻译版 (v10.0.0-rc.0)</span></button></div></aio-select></div></div></mat-sidenav><div class="cdk-visually-hidden cdk-focus-trap-anchor" aria-hidden="true"></div><mat-sidenav-content cdkscrollable="" class="mat-drawer-content mat-sidenav-content ng-star-inserted" style="margin-left:261px"><main role="main" class="sidenav-content" id="guide-dependency-injection-in-action"><aio-mode-banner></aio-mode-banner><aio-doc-viewer class=""><div style="opacity:1"><div class="github-links"><a href="https://github.com/angular/angular-cn/edit/aio/aio/content/guide/dependency-injection-in-action.md?message=docs%3A%20请简述你的修改..." aria-label="提供编辑建议" title="提供编辑建议"><i class="material-icons" aria-hidden="true" role="img">mode_edit</i></a></div><div class="content"><h1 id="dependency-injection-in-action" translation-result="on">依赖注入实战<a title="Link to this heading" class="header-link" aria-hidden="true" href="guide/dependency-injection-in-action#dependency-injection-in-action"><i class="material-icons">link</i></a></h1><aio-toc class="embedded" ng-version="10.0.0-rc.2"><div class="toc-inner no-print collapsed ng-star-inserted"><button type="button" title="Expand/collapse contents" aria-label="Expand/collapse contents" class="toc-heading embedded secondary ng-star-inserted" aria-pressed="false">目录<mat-icon role="img" svgicon="keyboard_arrow_right" class="mat-icon notranslate rotating-icon collapsed mat-icon-no-color" aria-hidden="true"><svg focusable="false" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"></path></svg></mat-icon></button><ul class="toc-list embedded"><li class="h2 ng-star-inserted" title="嵌套的服务依赖"><a href="guide/dependency-injection-in-action#nested-service-dependencies">嵌套的服务依赖</a></li><li class="h2 ng-star-inserted" title="把服务的范围限制到某个组件的子树下"><a href="guide/dependency-injection-in-action#limit-service-scope-to-a-component-subtree">把服务的范围限制到某个组件的子树下</a></li><li class="h2 ng-star-inserted" title="多个服务实例(沙箱式隔离)"><a href="guide/dependency-injection-in-action#multiple-service-instances-sandboxing">多个服务实例(沙箱式隔离)</a></li><li class="h2 secondary ng-star-inserted" title="使用参数装饰器来限定依赖查找方式"><a href="guide/dependency-injection-in-action#qualify-dependency-lookup-with-parameter-decorators">使用参数装饰器来限定依赖查找方式</a></li><li class="h3 secondary ng-star-inserted" title="用 @Optional 来让依赖是可选的，以及使用 @Host 来限定搜索方式"><a href="guide/dependency-injection-in-action#make-a-dependency-optional-and-limit-search-with-host">用 <code>@Optional</code> 来让依赖是可选的，以及使用 <code>@Host</code> 来限定搜索方式</a></li><li class="h3 secondary ng-star-inserted" title="使用 @Inject 指定自定义提供者"><a href="guide/dependency-injection-in-action#supply-a-custom-provider-with-inject">使用 <code>@Inject</code> 指定自定义提供者</a></li><li class="h3 secondary ng-star-inserted" title="使用 @Self 和 @SkipSelf 来修改提供者的搜索方式"><a href="guide/dependency-injection-in-action#modify-the-provider-search-with-self-and-skipself">使用 <code>@Self</code> 和 <code>@SkipSelf</code> 来修改提供者的搜索方式</a></li><li class="h2 secondary ng-star-inserted" title="注入组件的 DOM 元素"><a href="guide/dependency-injection-in-action#inject-the-components-dom-element">注入组件的 DOM 元素</a></li><li class="h2 secondary ng-star-inserted" title="使用提供者来定义依赖"><a href="guide/dependency-injection-in-action#define-dependencies-with-providers">使用提供者来定义依赖</a></li><li class="h3 secondary ng-star-inserted" title="定义提供者"><a href="guide/dependency-injection-in-action#defining-providers">定义提供者</a></li><li class="h2 secondary ng-star-inserted" title="提供替代令牌：类接口与 'InjectionToken'"><a href="guide/dependency-injection-in-action#provider-token-alternatives-class-interface-and-injectiontoken">提供替代令牌：类接口与 'InjectionToken'</a></li><li class="h3 secondary ng-star-inserted" title="类-接口"><a href="guide/dependency-injection-in-action#classinterface">类-接口</a></li><li class="h3 secondary ng-star-inserted" title="'InjectionToken' 对象"><a href="guide/dependency-injection-in-action#injectiontoken-objects">'InjectionToken' 对象</a></li><li class="h2 secondary ng-star-inserted" title="注入到派生类"><a href="guide/dependency-injection-in-action#inject-into-a-derived-class">注入到派生类</a></li><li class="h3 secondary ng-star-inserted" title="让构造函数保持简单"><a href="guide/dependency-injection-in-action#keep-constructors-simple">让构造函数保持简单</a></li><li class="h2 secondary ng-star-inserted" title="使用一个前向引用(forwardRef)来打破循环"><a href="guide/dependency-injection-in-action#break-circularities-with-a-forward-class-reference-forwardref">使用一个前向引用(<em>forwardRef</em>)来打破循环</a></li></ul><button type="button" title="Expand/collapse contents" aria-label="Expand/collapse contents" class="toc-more-items embedded material-icons collapsed ng-star-inserted" aria-pressed="false"></button></div></aio-toc><h1 translation-origin="off" id="dependency-injection-in-action">Dependency injection in action<a title="Link to this heading" class="header-link" aria-hidden="true" href="guide/dependency-injection-in-action#dependency-injection-in-action"><i class="material-icons">link</i></a></h1><p translation-result="on">本节将会涉及 Angular 依赖注入（DI）的很多特性。</p><p translation-origin="off">This section explores many of the features of dependency injection (DI) in Angular.</p><a id="toc"></a><p translation-result="on">要获取本文的代码，<strong>参见<live-example name="dependency-injection-in-action" ng-version="10.0.0-rc.2"><span style="display:none"></span><span><span class="ng-star-inserted"><a target="_blank" title="现场演练" href="generated/live-examples/dependency-injection-in-action/stackblitz.html">现场演练</a><span class="ng-star-inserted"> / <a download="" title="下载范例" href="generated/zips/dependency-injection-in-action/dependency-injection-in-action.zip">下载范例</a></span></span></span></live-example></strong>。</p><p translation-origin="off">See the<live-example name="dependency-injection-in-action" ng-version="10.0.0-rc.2"><span style="display:none"></span><span><span class="ng-star-inserted"><a target="_blank" title="现场演练" href="generated/live-examples/dependency-injection-in-action/stackblitz.html">现场演练</a><span class="ng-star-inserted"> / <a download="" title="下载范例" href="generated/zips/dependency-injection-in-action/dependency-injection-in-action.zip">下载范例</a></span></span></span></live-example>of the code in this cookbook.</p><a id="nested-dependencies"></a><h2 id="nested-service-dependencies" translation-result="on">嵌套的服务依赖<a title="Link to this heading" class="header-link" aria-hidden="true" href="guide/dependency-injection-in-action#nested-service-dependencies"><i class="material-icons">link</i></a></h2><h2 translation-origin="off" id="nested-service-dependencies">Nested service dependencies<a title="Link to this heading" class="header-link" aria-hidden="true" href="guide/dependency-injection-in-action#nested-service-dependencies"><i class="material-icons">link</i></a></h2><p translation-result="on">这些被注入服务的消费者不需要知道如何创建这个服务。新建和缓存这个服务是依赖注入器的工作。消费者只要让依赖注入框架知道它需要哪些依赖项就可以了。</p><p translation-origin="off">The <em>consumer</em> of an injected service doesn't need to know how to create that service. It's the job of the DI framework to create and cache dependencies. The consumer just needs to let the DI framework know which dependencies it needs.</p><p translation-result="on">有时候一个服务依赖其它服务...而其它服务可能依赖另外的更多服务。 依赖注入框架会负责正确的顺序解析这些嵌套的依赖项。 在每一步，依赖的使用者只要在它的构造函数里简单声明它需要什么，框架就会完成所有剩下的事情。</p><p translation-origin="off">Sometimes a service depends on other services, which may depend on yet other services. The dependency injection framework resolves these nested dependencies in the correct order. At each step, the consumer of dependencies declares what it requires in its constructor, and lets the framework provide them.</p><p translation-result="on">下面的例子往 <code>AppComponent</code> 里声明它依赖 <code>LoggerService</code> 和 <code>UserContext</code>。</p><p translation-origin="off">The following example shows that <code>AppComponent</code> declares its dependence on <code>LoggerService</code> and <code>UserContext</code>.</p><code-example path="dependency-injection-in-action/src/app/app.component.ts" region="ctor" header="src/app/app.component.ts" ng-version="10.0.0-rc.2"><div style="display:none">constructor(logger: LoggerService, public userContext: UserContextService) { userContext.loadUser(this.userId); logger.logInfo('AppComponent initialized'); }</div><header class="ng-star-inserted">src/app/app.component.ts</header><aio-code class="headed-code"><pre class="lang- prettyprint">      <button title="Copy code snippet" class="material-icons copy-button no-print ng-star-inserted" aria-label="Copy code snippet from src/app/app.component.ts">
        <span aria-hidden="true">content_copy</span>
      </button>
      <code class="animated fadeIn"><span class="kwd">constructor</span><span class="pun">(</span><span class="pln">logger</span><span class="pun">:</span><span class="pln"> </span><span class="typ">LoggerService</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">public</span><span class="pln"> userContext</span><span class="pun">:</span><span class="pln"> </span><span class="typ">UserContextService</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  userContext</span><span class="pun">.</span><span class="pln">loadUser</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">userId</span><span class="pun">);</span><span class="pln">
  logger</span><span class="pun">.</span><span class="pln">logInfo</span><span class="pun">(</span><span class="str">'AppComponent initialized'</span><span class="pun">);</span><span class="pln">
</span><span class="pun">}</span></code>
    </pre></aio-code></code-example><p translation-result="on"><code>UserContext</code> 转而依赖 <code>LoggerService</code> 和 <code>UserService</code>（这个服务用来收集特定用户信息）。</p><p translation-origin="off"><code>UserContext</code> in turn depends on both <code>LoggerService</code> and <code>UserService</code>, another service that gathers information about a particular user.</p><code-example path="dependency-injection-in-action/src/app/user-context.service.ts" region="injectables" header="user-context.service.ts (injection)" ng-version="10.0.0-rc.2"><div style="display:none">@<a href="api/core/Injectable" class="code-anchor">Injectable</a>({ providedIn: 'root' }) export class UserContextService { constructor(private userService: UserService, private loggerService: LoggerService) { } }</div><header class="ng-star-inserted">user-context.service.ts (injection)</header><aio-code class="headed-code"><pre class="lang- prettyprint">      <button title="Copy code snippet" class="material-icons copy-button no-print ng-star-inserted" aria-label="Copy code snippet from user-context.service.ts (injection)">
        <span aria-hidden="true">content_copy</span>
      </button>
      <code class="animated fadeIn"><span class="lit">@</span><a href="api/core/Injectable" class="code-anchor"><span class="lit">Injectable</span></a><span class="pun">({</span><span class="pln">
  providedIn</span><span class="pun">:</span><span class="pln"> </span><span class="str">'root'</span><span class="pln">
</span><span class="pun">})</span><span class="pln">
</span><span class="kwd">export</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">UserContextService</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  </span><span class="kwd">constructor</span><span class="pun">(</span><span class="kwd">private</span><span class="pln"> userService</span><span class="pun">:</span><span class="pln"> </span><span class="typ">UserService</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">private</span><span class="pln"> loggerService</span><span class="pun">:</span><span class="pln"> </span><span class="typ">LoggerService</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code>
    </pre></aio-code></code-example><p translation-result="on">当 Angular 新建 <code>AppComponent</code> 时，依赖注入框架会先创建一个 <code>LoggerService</code> 的实例，然后创建 <code>UserContextService</code> 实例。 <code>UserContextService</code> 也需要框架刚刚创建的这个 <code>LoggerService</code> 实例，这样框架才能为它提供同一个实例。<code>UserContextService</code> 还需要框架创建过的 <code>UserService</code>。 <code>UserService</code> 没有其它依赖，所以依赖注入框架可以直接 <code>new</code> 出该类的一个实例，并把它提供给 <code>UserContextService</code> 的构造函数。</p><p translation-origin="off">When Angular creates <code>AppComponent</code>, the DI framework creates an instance of <code>LoggerService</code> and starts to create <code>UserContextService</code>. <code>UserContextService</code> also needs <code>LoggerService</code>, which the framework already has, so the framework can provide the same instance. <code>UserContextService</code> also needs <code>UserService</code>, which the framework has yet to create. <code>UserService</code> has no further dependencies, so the framework can simply use <code>new</code> to instantiate the class and provide the instance to the <code>UserContextService</code> constructor.</p><p translation-result="on">父组件 <code>AppComponent</code> 不需要了解这些依赖的依赖。 只要在构造函数中声明自己需要的依赖即可（这里是 <code>LoggerService</code> 和 <code>UserContextService</code>），框架会帮你解析这些嵌套的依赖。</p><p translation-origin="off">The parent <code>AppComponent</code> doesn't need to know about the dependencies of dependencies. Declare what's needed in the constructor (in this case <code>LoggerService</code> and <code>UserContextService</code>) and the framework resolves the nested dependencies.</p><p translation-result="on">当所有的依赖都就位之后，<code>AppComponent</code> 就会显示该用户的信息。</p><p translation-origin="off">When all dependencies are in place, <code>AppComponent</code> displays the user information.</p><div class="lightbox"><img src="generated/images/guide/dependency-injection-in-action/logged-in-user.png" alt="Logged In User" width="145" height="99"></div><a id="service-scope"></a><h2 id="limit-service-scope-to-a-component-subtree" translation-result="on">把服务的范围限制到某个组件的子树下<a title="Link to this heading" class="header-link" aria-hidden="true" href="guide/dependency-injection-in-action#limit-service-scope-to-a-component-subtree"><i class="material-icons">link</i></a></h2><h2 translation-origin="off" id="limit-service-scope-to-a-component-subtree">Limit service scope to a component subtree<a title="Link to this heading" class="header-link" aria-hidden="true" href="guide/dependency-injection-in-action#limit-service-scope-to-a-component-subtree"><i class="material-icons">link</i></a></h2><p translation-result="on">Angular 应用程序有多个依赖注入器，组织成一个与组件树平行的树状结构。 每个注入器都会创建依赖的一个单例。在所有该注入器负责提供服务的地方，所提供的都是同一个实例。 可以在注入器树的任何层级提供和建立特定的服务。这意味着，如果在多个注入器中提供该服务，那么该服务也就会有多个实例。</p><p translation-origin="off">An Angular application has multiple injectors, arranged in a tree hierarchy that parallels the component tree. Each injector creates a singleton instance of a dependency. That same instance is injected wherever that injector provides that service. A particular service can be provided and created at any level of the injector hierarchy, which means that there can be multiple instances of a service if it is provided by multiple injectors.</p><p translation-result="on">由根注入器提供的依赖可以注入到应用中任何地方的任何组件中。 但有时候你可能希望把服务的有效性限制到应用程序的一个特定区域。 比如，你可能希望用户明确选择一个服务，而不是让根注入器自动提供它。</p><p translation-origin="off">Dependencies provided by the root injector can be injected into <em>any</em> component <em>anywhere</em> in the application. In some cases, you might want to restrict service availability to a particular region of the application. For instance, you might want to let users explicitly opt in to use a service, rather than letting the root injector provide it automatically.</p><p translation-result="on">通过<em>在组件树的子级根组件</em>中提供服务，可以把一个被注入服务的作用域局限在应用程序结构中的某个<em>分支</em>中。 这个例子中展示了如何通过把服务添加到子组件 <code>@<a href="api/core/Component" class="code-anchor">Component</a>()</code> 装饰器的 <code>providers</code> 数组中，来为 <code>HeroesBaseComponent</code> 提供另一个 <code>HeroService</code> 实例：</p><p translation-origin="off">You can limit the scope of an injected service to a <em>branch</em> of the application hierarchy by providing that service <em>at the sub-root component for that branch</em>. This example shows how to make a different instance of <code>HeroService</code> available to <code>HeroesBaseComponent</code> by adding it to the <code>providers</code> array of the <code>@<a href="api/core/Component" class="code-anchor">Component</a>()</code> decorator of the sub-component.</p><code-example path="dependency-injection-in-action/src/app/sorted-heroes.component.ts" region="injection" header="src/app/sorted-heroes.component.ts (HeroesBaseComponent excerpt)" ng-version="10.0.0-rc.2"><div style="display:none">@<a href="api/core/Component" class="code-anchor">Component</a>({ selector: 'app-unsorted-heroes', template: `&lt;div *<a href="api/common/NgForOf" class="code-anchor">ngFor</a>="let hero of heroes"&gt;{{hero.name}}&lt;/div&gt;`, providers: [HeroService] }) export class HeroesBaseComponent implements <a href="api/core/OnInit" class="code-anchor">OnInit</a> { constructor(private heroService: HeroService) { } }</div><header class="ng-star-inserted">src/app/sorted-heroes.component.ts (HeroesBaseComponent excerpt)</header><aio-code class="headed-code"><pre class="lang- prettyprint">      <button title="Copy code snippet" class="material-icons copy-button no-print ng-star-inserted" aria-label="Copy code snippet from src/app/sorted-heroes.component.ts (HeroesBaseComponent excerpt)">
        <span aria-hidden="true">content_copy</span>
      </button>
      <code class="animated fadeIn"><span class="lit">@</span><a href="api/core/Component" class="code-anchor"><span class="lit">Component</span></a><span class="pun">({</span><span class="pln">
  selector</span><span class="pun">:</span><span class="pln"> </span><span class="str">'app-unsorted-heroes'</span><span class="pun">,</span><span class="pln">
  </span><span class="kwd">template</span><span class="pun">:</span><span class="pln"> </span><span class="str">`&lt;div *</span><a href="api/common/NgForOf" class="code-anchor"><span class="str">ngFor</span></a><span class="str">="let hero of heroes"&gt;{{hero.name}}&lt;/div&gt;`</span><span class="pun">,</span><span class="pln">
  providers</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span><span class="typ">HeroService</span><span class="pun">]</span><span class="pln">
</span><span class="pun">})</span><span class="pln">
</span><span class="kwd">export</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">HeroesBaseComponent</span><span class="pln"> </span><span class="kwd">implements</span><span class="pln"> </span><a href="api/core/OnInit" class="code-anchor"><span class="typ">OnInit</span></a><span class="pln"> </span><span class="pun">{</span><span class="pln">
  </span><span class="kwd">constructor</span><span class="pun">(</span><span class="kwd">private</span><span class="pln"> heroService</span><span class="pun">:</span><span class="pln"> </span><span class="typ">HeroService</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code>
    </pre></aio-code></code-example><p translation-result="on">当 Angular 新建 <code>HeroBaseComponent</code> 的时候，它会同时新建一个 <code>HeroService</code> 实例，该实例只在该组件及其子组件(如果有)中可见。</p><p translation-origin="off">When Angular creates <code>HeroesBaseComponent</code>, it also creates a new instance of <code>HeroService</code> that is visible only to that component and its children, if any.</p><p translation-result="on">也可以在应用程序别处的另一个组件里提供 <code>HeroService</code>。这样就会导致在另一个注入器中存在该服务的另一个实例。</p><p translation-origin="off">You could also provide <code>HeroService</code> to a different component elsewhere in the application. That would result in a different instance of the service, living in a different injector.</p><div class="alert is-helpful"><p translation-result="on">这个例子中，局部化的 <code>HeroService</code> 单例，遍布整份范例代码，包括 <code>HeroBiosComponent</code>、<code>HeroOfTheMonthComponent</code> 和 <code>HeroBaseComponent</code>。 这些组件每个都有自己的 <code>HeroService</code> 实例，用来管理独立的英雄库。</p><p translation-origin="off">Examples of such scoped <code>HeroService</code> singletons appear throughout the accompanying sample code, including <code>HeroBiosComponent</code>, <code>HeroOfTheMonthComponent</code>, and <code>HeroesBaseComponent</code>. Each of these components has its own <code>HeroService</code> instance managing its own independent collection of heroes.</p></div><a id="multiple-service-instances"></a><h2 id="multiple-service-instances-sandboxing" translation-result="on">多个服务实例(沙箱式隔离)<a title="Link to this heading" class="header-link" aria-hidden="true" href="guide/dependency-injection-in-action#multiple-service-instances-sandboxing"><i class="material-icons">link</i></a></h2><h2 translation-origin="off" id="multiple-service-instances-sandboxing">Multiple service instances (sandboxing)<a title="Link to this heading" class="header-link" aria-hidden="true" href="guide/dependency-injection-in-action#multiple-service-instances-sandboxing"><i class="material-icons">link</i></a></h2><p translation-result="on">在组件树的<em>同一个级别</em>上，有时需要一个服务的多个实例。</p><p translation-origin="off">Sometimes you want multiple instances of a service at <em>the same level</em> of the component hierarchy.</p><p translation-result="on">一个用来保存其伴生组件的实例状态的服务就是个好例子。 每个组件都需要该服务的单独实例。 每个服务有自己的工作状态，与其它组件的服务和状态隔离。这叫做<em>沙箱化</em>，因为每个服务和组件实例都在自己的沙箱里运行。</p><p translation-origin="off">A good example is a service that holds state for its companion component instance. You need a separate instance of the service for each component. Each service has its own work-state, isolated from the service-and-state of a different component. This is called <em>sandboxing</em> because each service and component instance has its own sandbox to play in.</p><a id="hero-bios-component"></a><p translation-result="on">在这个例子中，<code>HeroBiosComponent</code> 渲染了 <code>HeroBioComponent</code> 的三个实例。</p><p translation-origin="off">In this example, <code>HeroBiosComponent</code> presents three instances of <code>HeroBioComponent</code>.</p><code-example path="dependency-injection-in-action/src/app/hero-bios.component.ts" region="simple" header="ap/hero-bios.component.ts" ng-version="10.0.0-rc.2"><div style="display:none">@<a href="api/core/Component" class="code-anchor">Component</a>({ selector: 'app-hero-bios', template: ` &lt;app-hero-bio [heroId]="1"&gt;&lt;/app-hero-bio&gt; &lt;app-hero-bio [heroId]="2"&gt;&lt;/app-hero-bio&gt; &lt;app-hero-bio [heroId]="3"&gt;&lt;/app-hero-bio&gt;`, providers: [HeroService] }) export class HeroBiosComponent { }</div><header class="ng-star-inserted">ap/hero-bios.component.ts</header><aio-code class="headed-code"><pre class="lang- prettyprint">      <button title="Copy code snippet" class="material-icons copy-button no-print ng-star-inserted" aria-label="Copy code snippet from ap/hero-bios.component.ts">
        <span aria-hidden="true">content_copy</span>
      </button>
      <code class="animated fadeIn"><span class="lit">@</span><a href="api/core/Component" class="code-anchor"><span class="lit">Component</span></a><span class="pun">({</span><span class="pln">
  selector</span><span class="pun">:</span><span class="pln"> </span><span class="str">'app-hero-bios'</span><span class="pun">,</span><span class="pln">
  </span><span class="kwd">template</span><span class="pun">:</span><span class="pln"> </span><span class="str">`
    &lt;app-hero-bio [heroId]="1"&gt;&lt;/app-hero-bio&gt;
    &lt;app-hero-bio [heroId]="2"&gt;&lt;/app-hero-bio&gt;
    &lt;app-hero-bio [heroId]="3"&gt;&lt;/app-hero-bio&gt;`</span><span class="pun">,</span><span class="pln">
  providers</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span><span class="typ">HeroService</span><span class="pun">]</span><span class="pln">
</span><span class="pun">})</span><span class="pln">
</span><span class="kwd">export</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">HeroBiosComponent</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
</span><span class="pun">}</span></code>
    </pre></aio-code></code-example><p translation-result="on">每个 <code>HeroBioComponent</code> 都能编辑一个英雄的生平。<code>HeroBioComponent</code> 依赖 <code>HeroCacheService</code> 服务来对该英雄进行读取、缓存和执行其它持久化操作。</p><p translation-origin="off">Each <code>HeroBioComponent</code> can edit a single hero's biography. <code>HeroBioComponent</code> relies on <code>HeroCacheService</code> to fetch, cache, and perform other persistence operations on that hero.</p><code-example path="dependency-injection-in-action/src/app/hero-cache.service.ts" region="service" header="src/app/hero-cache.service.ts" ng-version="10.0.0-rc.2"><div style="display:none">@<a href="api/core/Injectable" class="code-anchor">Injectable</a>() export class HeroCacheService { hero: Hero; constructor(private heroService: HeroService) {} fetchCachedHero(id: number) { if (!this.hero) { this.hero = this.heroService.getHeroById(id); } return this.hero; } }</div><header class="ng-star-inserted">src/app/hero-cache.service.ts</header><aio-code class="headed-code"><pre class="lang- prettyprint">      <button title="Copy code snippet" class="material-icons copy-button no-print ng-star-inserted" aria-label="Copy code snippet from src/app/hero-cache.service.ts">
        <span aria-hidden="true">content_copy</span>
      </button>
      <code class="animated fadeIn"><span class="lit">@</span><a href="api/core/Injectable" class="code-anchor"><span class="lit">Injectable</span></a><span class="pun">()</span><span class="pln">
</span><span class="kwd">export</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">HeroCacheService</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  hero</span><span class="pun">:</span><span class="pln"> </span><span class="typ">Hero</span><span class="pun">;</span><span class="pln">
  </span><span class="kwd">constructor</span><span class="pun">(</span><span class="kwd">private</span><span class="pln"> heroService</span><span class="pun">:</span><span class="pln"> </span><span class="typ">HeroService</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{}</span><span class="pln">

  fetchCachedHero</span><span class="pun">(</span><span class="pln">id</span><span class="pun">:</span><span class="pln"> number</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(!</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">hero</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
      </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">hero </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">heroService</span><span class="pun">.</span><span class="pln">getHeroById</span><span class="pun">(</span><span class="pln">id</span><span class="pun">);</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
    </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">hero</span><span class="pun">;</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code>
    </pre></aio-code></code-example><p translation-result="on">这三个 <code>HeroBioComponent</code> 实例不能共享同一个 <code>HeroCacheService</code> 实例。否则它们会相互冲突，争相把自己的英雄放在缓存里面。</p><p translation-origin="off">Three instances of <code>HeroBioComponent</code> can't share the same instance of <code>HeroCacheService</code>, as they'd be competing with each other to determine which hero to cache.</p><p translation-result="on">它们应该通过在自己的元数据(metadata)<code>providers</code> 数组里面列出 <code>HeroCacheService</code>, 这样每个 <code>HeroBioComponent</code> 就能<em>拥有</em>自己独立的 <code>HeroCacheService</code> 实例了。</p><p translation-origin="off">Instead, each <code>HeroBioComponent</code> gets its <em>own</em> <code>HeroCacheService</code> instance by listing <code>HeroCacheService</code> in its metadata <code>providers</code> array.</p><code-example path="dependency-injection-in-action/src/app/hero-bio.component.ts" region="component" header="src/app/hero-bio.component.ts" ng-version="10.0.0-rc.2"><div style="display:none">@<a href="api/core/Component" class="code-anchor">Component</a>({ selector: 'app-hero-bio', template: ` &lt;h4&gt;{{hero.name}}&lt;/h4&gt; &lt;ng-content&gt;&lt;/ng-content&gt; &lt;<a href="api/forms/DefaultValueAccessor" class="code-anchor">textarea</a> cols="25" [(<a href="api/forms/NgModel" class="code-anchor">ngModel</a>)]="hero.description"&gt;&lt;/<a href="api/forms/DefaultValueAccessor" class="code-anchor">textarea</a>&gt;`, providers: [HeroCacheService] }) export class HeroBioComponent implements <a href="api/core/OnInit" class="code-anchor">OnInit</a> { @<a href="api/core/Input" class="code-anchor">Input</a>() heroId: number; constructor(private heroCache: HeroCacheService) { } ngOnInit() { this.heroCache.fetchCachedHero(this.heroId); } get hero() { return this.heroCache.hero; } }</div><header class="ng-star-inserted">src/app/hero-bio.component.ts</header><aio-code class="headed-code"><pre class="lang- prettyprint">      <button title="Copy code snippet" class="material-icons copy-button no-print ng-star-inserted" aria-label="Copy code snippet from src/app/hero-bio.component.ts">
        <span aria-hidden="true">content_copy</span>
      </button>
      <code class="animated fadeIn"><span class="lit">@</span><a href="api/core/Component" class="code-anchor"><span class="lit">Component</span></a><span class="pun">({</span><span class="pln">
  selector</span><span class="pun">:</span><span class="pln"> </span><span class="str">'app-hero-bio'</span><span class="pun">,</span><span class="pln">
  </span><span class="kwd">template</span><span class="pun">:</span><span class="pln"> </span><span class="str">`
    &lt;h4&gt;{{hero.name}}&lt;/h4&gt;
    &lt;ng-content&gt;&lt;/ng-content&gt;
    &lt;</span><a href="api/forms/DefaultValueAccessor" class="code-anchor"><span class="str">textarea</span></a><span class="str"> cols="25" [(</span><a href="api/forms/NgModel" class="code-anchor"><span class="str">ngModel</span></a><span class="str">)]="hero.description"&gt;&lt;/</span><a href="api/forms/DefaultValueAccessor" class="code-anchor"><span class="str">textarea</span></a><span class="str">&gt;`</span><span class="pun">,</span><span class="pln">
  providers</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span><span class="typ">HeroCacheService</span><span class="pun">]</span><span class="pln">
</span><span class="pun">})</span><span class="pln">

</span><span class="kwd">export</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">HeroBioComponent</span><span class="pln"> </span><span class="kwd">implements</span><span class="pln"> </span><a href="api/core/OnInit" class="code-anchor"><span class="typ">OnInit</span></a><span class="pln">  </span><span class="pun">{</span><span class="pln">
  </span><span class="lit">@</span><a href="api/core/Input" class="code-anchor"><span class="lit">Input</span></a><span class="pun">()</span><span class="pln"> heroId</span><span class="pun">:</span><span class="pln"> number</span><span class="pun">;</span><span class="pln">

  </span><span class="kwd">constructor</span><span class="pun">(</span><span class="kwd">private</span><span class="pln"> heroCache</span><span class="pun">:</span><span class="pln"> </span><span class="typ">HeroCacheService</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="pun">}</span><span class="pln">

  ngOnInit</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">heroCache</span><span class="pun">.</span><span class="pln">fetchCachedHero</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">heroId</span><span class="pun">);</span><span class="pln"> </span><span class="pun">}</span><span class="pln">

  </span><span class="kwd">get</span><span class="pln"> hero</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">heroCache</span><span class="pun">.</span><span class="pln">hero</span><span class="pun">;</span><span class="pln"> </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code>
    </pre></aio-code></code-example><p translation-result="on">父组件 <code>HeroBiosComponent</code> 把一个值绑定到 <code>heroId</code>。<code>ngOnInit</code> 把该 <code>id</code> 传递到服务，然后服务获取和缓存英雄。<code>hero</code> 属性的 getter 从服务里面获取缓存的英雄，并在模板里显示它绑定到属性值。</p><p translation-origin="off">The parent <code>HeroBiosComponent</code> binds a value to <code>heroId</code>. <code>ngOnInit</code> passes that ID to the service, which fetches and caches the hero. The getter for the <code>hero</code> property pulls the cached hero from the service. The template displays this data-bound property.</p><p translation-result="on">到<live-example name="dependency-injection-in-action" ng-version="10.0.0-rc.2"><span style="display:none">现场演练</span><span><span class="ng-star-inserted"><a target="_blank" title="现场演练" href="generated/live-examples/dependency-injection-in-action/stackblitz.html">现场演练</a><span class="ng-star-inserted"> / <a download="" title="下载范例" href="generated/zips/dependency-injection-in-action/dependency-injection-in-action.zip">下载范例</a></span></span></span></live-example>中找到这个例子，确认三个 <code>HeroBioComponent</code> 实例拥有自己独立的英雄数据缓存。</p><p translation-origin="off">Find this example in<live-example name="dependency-injection-in-action" ng-version="10.0.0-rc.2"><span style="display:none">live code</span><span><span class="ng-star-inserted"><a target="_blank" title="live code" href="generated/live-examples/dependency-injection-in-action/stackblitz.html">live code</a><span class="ng-star-inserted"> / <a download="" title="下载范例" href="generated/zips/dependency-injection-in-action/dependency-injection-in-action.zip">下载范例</a></span></span></span></live-example>and confirm that the three <code>HeroBioComponent</code> instances have their own cached hero data.</p><div class="lightbox"><img src="generated/images/guide/dependency-injection-in-action/hero-bios.png" alt="Bios" width="199" height="317"></div><a id="qualify-dependency-lookup"></a><h2 id="qualify-dependency-lookup-with-parameter-decorators" translation-result="on">使用参数装饰器来限定依赖查找方式<a title="Link to this heading" class="header-link" aria-hidden="true" href="guide/dependency-injection-in-action#qualify-dependency-lookup-with-parameter-decorators"><i class="material-icons">link</i></a></h2><h2 translation-origin="off" id="qualify-dependency-lookup-with-parameter-decorators">Qualify dependency lookup with parameter decorators<a title="Link to this heading" class="header-link" aria-hidden="true" href="guide/dependency-injection-in-action#qualify-dependency-lookup-with-parameter-decorators"><i class="material-icons">link</i></a></h2><p translation-result="on">当类需要某个依赖项时，该依赖项就会作为参数添加到类的构造函数中。 当 Angular 需要实例化该类时，就会调用 DI 框架来提供该依赖。 默认情况下，DI 框架会在注入器树中查找一个提供者，从该组件的局部注入器开始，如果需要，则沿着注入器树向上冒泡，直到根注入器。</p><p translation-origin="off">When a class requires a dependency, that dependency is added to the constructor as a parameter. When Angular needs to instantiate the class, it calls upon the DI framework to supply the dependency. By default, the DI framework searches for a provider in the injector hierarchy, starting at the component's local injector of the component, and if necessary bubbling up through the injector tree until it reaches the root injector.</p><ul><li><p translation-result="on">第一个配置过该提供者的注入器就会把依赖（服务实例或值）提供给这个构造函数。</p><p translation-origin="off">The first injector configured with a provider supplies the dependency (a service instance or value) to the constructor.</p></li><li><p translation-result="on">如果在根注入器中也没有找到提供者，则 DI 框架将会抛出一个错误。</p><p translation-origin="off">If no provider is found in the root injector, the DI framework throws an error.</p></li></ul><p translation-result="on">通过在类的构造函数中对服务参数使用<em>参数装饰器</em>，可以提供一些选项来修改默认的搜索行为。</p><p translation-origin="off">There are a number of options for modifying the default search behavior, using <em>parameter decorators</em> on the service-valued parameters of a class constructor.</p><a id="optional"></a><h3 id="make-a-dependency-optional-and-limit-search-with-host" translation-result="on">用 <code>@<a href="api/core/Optional" class="code-anchor">Optional</a></code> 来让依赖是可选的，以及使用 <code>@<a href="api/core/Host" class="code-anchor">Host</a></code> 来限定搜索方式<a title="Link to this heading" class="header-link" aria-hidden="true" href="guide/dependency-injection-in-action#make-a-dependency-optional-and-limit-search-with-host"><i class="material-icons">link</i></a></h3><h3 translation-origin="off" id="make-a-dependency-optional-and-limit-search-with-host">Make a dependency <code>@<a href="api/core/Optional" class="code-anchor">Optional</a></code> and limit search with <code>@<a href="api/core/Host" class="code-anchor">Host</a></code><a title="Link to this heading" class="header-link" aria-hidden="true" href="guide/dependency-injection-in-action#make-a-dependency-optional-and-limit-search-with-host"><i class="material-icons">link</i></a></h3><p translation-result="on">依赖可以注册在组件树的任何层级上。 当组件请求某个依赖时，Angular 会从该组件的注入器找起，沿着注入器树向上，直到找到了第一个满足要求的提供者。如果没找到依赖，Angular 就会抛出一个错误。</p><p translation-origin="off">Dependencies can be registered at any level in the component hierarchy. When a component requests a dependency, Angular starts with that component's injector and walks up the injector tree until it finds the first suitable provider. Angular throws an error if it can't find the dependency during that walk.</p><p translation-result="on">某些情况下，你需要限制搜索，或容忍依赖项的缺失。 你可以使用组件构造函数参数上的 <code>@<a href="api/core/Host" class="code-anchor">Host</a></code> 和 <code>@<a href="api/core/Optional" class="code-anchor">Optional</a></code> 这两个限定装饰器来修改 Angular 的搜索行为。</p><p translation-origin="off">In some cases, you need to limit the search or accommodate a missing dependency. You can modify Angular's search behavior with the <code>@<a href="api/core/Host" class="code-anchor">Host</a></code> and <code>@<a href="api/core/Optional" class="code-anchor">Optional</a></code> qualifying decorators on a service-valued parameter of the component's constructor.</p><ul><li><p translation-result="on"><code>@<a href="api/core/Optional" class="code-anchor">Optional</a></code> 属性装饰器告诉 Angular 当找不到依赖时就返回 null。</p><p translation-origin="off">The <code>@<a href="api/core/Optional" class="code-anchor">Optional</a></code> property decorator tells Angular to return null when it can't find the dependency.</p></li><li><p translation-result="on"> <code>@<a href="api/core/Host" class="code-anchor">Host</a></code> 属性装饰器会禁止在<em>宿主组件</em>以上的搜索。宿主组件通常就是请求该依赖的那个组件。 不过，当该组件投影进某个<em>父</em>组件时，那个父组件就会变成宿主。下面的例子中介绍了第二种情况。</p><p translation-origin="off">The <code>@<a href="api/core/Host" class="code-anchor">Host</a></code> property decorator stops the upward search at the <em>host component</em>. The host component is typically the component requesting the dependency. However, when this component is projected into a <em>parent</em> component, that parent component becomes the host. The following example covers this second case.</p></li></ul><p translation-result="on">如下例所示，这些装饰器可以独立使用，也可以同时使用。这个 <code>HeroBiosAndContactsComponent</code> 是你<a href="guide/dependency-injection-in-action#hero-bios-component">以前</a>见过的那个 <code>HeroBiosComponent</code> 的修改版。</p><p translation-origin="off">These decorators can be used individually or together, as shown in the example. This <code>HeroBiosAndContactsComponent</code> is a revision of <code>HeroBiosComponent</code> which you looked at <a href="guide/dependency-injection-in-action#hero-bios-component">above</a>.</p><code-example path="dependency-injection-in-action/src/app/hero-bios.component.ts" region="hero-bios-and-contacts" header="src/app/hero-bios.component.ts (HeroBiosAndContactsComponent)" ng-version="10.0.0-rc.2"><div style="display:none">@<a href="api/core/Component" class="code-anchor">Component</a>({ selector: 'app-hero-bios-and-contacts', template: ` &lt;app-hero-bio [heroId]="1"&gt; &lt;app-hero-contact&gt;&lt;/app-hero-contact&gt; &lt;/app-hero-bio&gt; &lt;app-hero-bio [heroId]="2"&gt; &lt;app-hero-contact&gt;&lt;/app-hero-contact&gt; &lt;/app-hero-bio&gt; &lt;app-hero-bio [heroId]="3"&gt; &lt;app-hero-contact&gt;&lt;/app-hero-contact&gt; &lt;/app-hero-bio&gt;`, providers: [HeroService] }) export class HeroBiosAndContactsComponent { constructor(logger: LoggerService) { logger.logInfo('Creating HeroBiosAndContactsComponent'); } }</div><header class="ng-star-inserted">src/app/hero-bios.component.ts (HeroBiosAndContactsComponent)</header><aio-code class="headed-code"><pre class="lang- prettyprint">      <button title="Copy code snippet" class="material-icons copy-button no-print ng-star-inserted" aria-label="Copy code snippet from src/app/hero-bios.component.ts (HeroBiosAndContactsComponent)">
        <span aria-hidden="true">content_copy</span>
      </button>
      <code class="animated fadeIn"><span class="lit">@</span><a href="api/core/Component" class="code-anchor"><span class="lit">Component</span></a><span class="pun">({</span><span class="pln">
  selector</span><span class="pun">:</span><span class="pln"> </span><span class="str">'app-hero-bios-and-contacts'</span><span class="pun">,</span><span class="pln">
  </span><span class="kwd">template</span><span class="pun">:</span><span class="pln"> </span><span class="str">`
    &lt;app-hero-bio [heroId]="1"&gt; &lt;app-hero-contact&gt;&lt;/app-hero-contact&gt; &lt;/app-hero-bio&gt;
    &lt;app-hero-bio [heroId]="2"&gt; &lt;app-hero-contact&gt;&lt;/app-hero-contact&gt; &lt;/app-hero-bio&gt;
    &lt;app-hero-bio [heroId]="3"&gt; &lt;app-hero-contact&gt;&lt;/app-hero-contact&gt; &lt;/app-hero-bio&gt;`</span><span class="pun">,</span><span class="pln">
  providers</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span><span class="typ">HeroService</span><span class="pun">]</span><span class="pln">
</span><span class="pun">})</span><span class="pln">
</span><span class="kwd">export</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">HeroBiosAndContactsComponent</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  </span><span class="kwd">constructor</span><span class="pun">(</span><span class="pln">logger</span><span class="pun">:</span><span class="pln"> </span><span class="typ">LoggerService</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    logger</span><span class="pun">.</span><span class="pln">logInfo</span><span class="pun">(</span><span class="str">'Creating HeroBiosAndContactsComponent'</span><span class="pun">);</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code>
    </pre></aio-code></code-example><p translation-result="on">注意看模板：</p><p translation-origin="off">Focus on the template:</p><code-example path="dependency-injection-in-action/src/app/hero-bios.component.ts" region="template" header="dependency-injection-in-action/src/app/hero-bios.component.ts" ng-version="10.0.0-rc.2"><div style="display:none">template: ` &lt;app-hero-bio [heroId]="1"&gt; &lt;app-hero-contact&gt;&lt;/app-hero-contact&gt; &lt;/app-hero-bio&gt; &lt;app-hero-bio [heroId]="2"&gt; &lt;app-hero-contact&gt;&lt;/app-hero-contact&gt; &lt;/app-hero-bio&gt; &lt;app-hero-bio [heroId]="3"&gt; &lt;app-hero-contact&gt;&lt;/app-hero-contact&gt; &lt;/app-hero-bio&gt;`,</div><header class="ng-star-inserted">dependency-injection-in-action/src/app/hero-bios.component.ts</header><aio-code class="headed-code"><pre class="lang- prettyprint">      <button title="Copy code snippet" class="material-icons copy-button no-print ng-star-inserted" aria-label="Copy code snippet from dependency-injection-in-action/src/app/hero-bios.component.ts">
        <span aria-hidden="true">content_copy</span>
      </button>
      <code class="animated fadeIn"><span class="kwd">template</span><span class="pun">:</span><span class="pln"> </span><span class="str">`
  &lt;app-hero-bio [heroId]="1"&gt; &lt;app-hero-contact&gt;&lt;/app-hero-contact&gt; &lt;/app-hero-bio&gt;
  &lt;app-hero-bio [heroId]="2"&gt; &lt;app-hero-contact&gt;&lt;/app-hero-contact&gt; &lt;/app-hero-bio&gt;
  &lt;app-hero-bio [heroId]="3"&gt; &lt;app-hero-contact&gt;&lt;/app-hero-contact&gt; &lt;/app-hero-bio&gt;`</span><span class="pun">,</span></code>
    </pre></aio-code></code-example><p translation-result="on">在 <code>&lt;hero-bio&gt;</code> 标签中是一个新的 <code>&lt;hero-contact&gt;</code> 元素。Angular 就会把相应的 <code>HeroContactComponent</code><em>投影</em>(<em>transclude</em>)进 <code>HeroBioComponent</code> 的视图里， 将它放在 <code>HeroBioComponent</code> 模板的 <code>&lt;ng-content&gt;</code> 标签槽里。</p><p translation-origin="off">Now there's a new <code>&lt;hero-contact&gt;</code> element between the <code>&lt;hero-bio&gt;</code> tags. Angular <em>projects</em>, or <em>transcludes</em>, the corresponding <code>HeroContactComponent</code> into the <code>HeroBioComponent</code> view, placing it in the <code>&lt;ng-content&gt;</code> slot of the <code>HeroBioComponent</code> template.</p><code-example path="dependency-injection-in-action/src/app/hero-bio.component.ts" region="template" header="src/app/hero-bio.component.ts (template)" ng-version="10.0.0-rc.2"><div style="display:none">template: ` &lt;h4&gt;{{hero.name}}&lt;/h4&gt; &lt;ng-content&gt;&lt;/ng-content&gt; &lt;<a href="api/forms/DefaultValueAccessor" class="code-anchor">textarea</a> cols="25" [(<a href="api/forms/NgModel" class="code-anchor">ngModel</a>)]="hero.description"&gt;&lt;/<a href="api/forms/DefaultValueAccessor" class="code-anchor">textarea</a>&gt;`,</div><header class="ng-star-inserted">src/app/hero-bio.component.ts (template)</header><aio-code class="headed-code"><pre class="lang- prettyprint">      <button title="Copy code snippet" class="material-icons copy-button no-print ng-star-inserted" aria-label="Copy code snippet from src/app/hero-bio.component.ts (template)">
        <span aria-hidden="true">content_copy</span>
      </button>
      <code class="animated fadeIn"><span class="kwd">template</span><span class="pun">:</span><span class="pln"> </span><span class="str">`
  &lt;h4&gt;{{hero.name}}&lt;/h4&gt;
  &lt;ng-content&gt;&lt;/ng-content&gt;
  &lt;</span><a href="api/forms/DefaultValueAccessor" class="code-anchor"><span class="str">textarea</span></a><span class="str"> cols="25" [(</span><a href="api/forms/NgModel" class="code-anchor"><span class="str">ngModel</span></a><span class="str">)]="hero.description"&gt;&lt;/</span><a href="api/forms/DefaultValueAccessor" class="code-anchor"><span class="str">textarea</span></a><span class="str">&gt;`</span><span class="pun">,</span></code>
    </pre></aio-code></code-example><p translation-result="on">从 <code>HeroContactComponent</code> 获得的英雄电话号码，被投影到上面的英雄描述里，结果如下：</p><p translation-origin="off">The result is shown below, with the hero's telephone number from <code>HeroContactComponent</code> projected above the hero description.</p><div class="lightbox"><img src="generated/images/guide/dependency-injection-in-action/hero-bio-and-content.png" alt="bio and contact" width="199" height="92"></div><p translation-result="on">这里的 <code>HeroContactComponent</code> 演示了限定型装饰器。</p><p translation-origin="off">Here's <code>HeroContactComponent</code>, which demonstrates the qualifying decorators.</p><code-example path="dependency-injection-in-action/src/app/hero-contact.component.ts" region="component" header="src/app/hero-contact.component.ts" ng-version="10.0.0-rc.2"><div style="display:none">@<a href="api/core/Component" class="code-anchor">Component</a>({ selector: 'app-hero-contact', template: ` &lt;div&gt;Phone #: {{phoneNumber}} &lt;span *<a href="api/common/NgIf" class="code-anchor">ngIf</a>="hasLogger"&gt;!!!&lt;/span&gt;&lt;/div&gt;` }) export class HeroContactComponent { hasLogger = false; constructor( @<a href="api/core/Host" class="code-anchor">Host</a>() // limit to the host component's instance of the HeroCacheService private heroCache: HeroCacheService, @<a href="api/core/Host" class="code-anchor">Host</a>() // limit search for logger; hides the application-wide logger @<a href="api/core/Optional" class="code-anchor">Optional</a>() // ok if the logger doesn't exist private loggerService?: LoggerService ) { if (loggerService) { this.hasLogger = true; loggerService.logInfo('HeroContactComponent can log!'); } } get phoneNumber() { return this.heroCache.hero.phone; } }</div><header class="ng-star-inserted">src/app/hero-contact.component.ts</header><aio-code class="headed-code"><pre class="lang- prettyprint">      <button title="Copy code snippet" class="material-icons copy-button no-print ng-star-inserted" aria-label="Copy code snippet from src/app/hero-contact.component.ts">
        <span aria-hidden="true">content_copy</span>
      </button>
      <code class="animated fadeIn"><span class="lit">@</span><a href="api/core/Component" class="code-anchor"><span class="lit">Component</span></a><span class="pun">({</span><span class="pln">
  selector</span><span class="pun">:</span><span class="pln"> </span><span class="str">'app-hero-contact'</span><span class="pun">,</span><span class="pln">
  </span><span class="kwd">template</span><span class="pun">:</span><span class="pln"> </span><span class="str">`
  &lt;div&gt;Phone #: {{phoneNumber}}
  &lt;span *</span><a href="api/common/NgIf" class="code-anchor"><span class="str">ngIf</span></a><span class="str">="hasLogger"&gt;!!!&lt;/span&gt;&lt;/div&gt;`</span><span class="pln">
</span><span class="pun">})</span><span class="pln">
</span><span class="kwd">export</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">HeroContactComponent</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

  hasLogger </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span><span class="pln">

  </span><span class="kwd">constructor</span><span class="pun">(</span><span class="pln">
      </span><span class="lit">@</span><a href="api/core/Host" class="code-anchor"><span class="lit">Host</span></a><span class="pun">()</span><span class="pln"> </span><span class="com">// limit to the host component's instance of the HeroCacheService</span><span class="pln">
      </span><span class="kwd">private</span><span class="pln"> heroCache</span><span class="pun">:</span><span class="pln"> </span><span class="typ">HeroCacheService</span><span class="pun">,</span><span class="pln">

      </span><span class="lit">@</span><a href="api/core/Host" class="code-anchor"><span class="lit">Host</span></a><span class="pun">()</span><span class="pln">     </span><span class="com">// limit search for logger; hides the application-wide logger</span><span class="pln">
      </span><span class="lit">@</span><a href="api/core/Optional" class="code-anchor"><span class="lit">Optional</span></a><span class="pun">()</span><span class="pln"> </span><span class="com">// ok if the logger doesn't exist</span><span class="pln">
      </span><span class="kwd">private</span><span class="pln"> loggerService</span><span class="pun">?:</span><span class="pln"> </span><span class="typ">LoggerService</span><span class="pln">
  </span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">loggerService</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
      </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">hasLogger </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">;</span><span class="pln">
      loggerService</span><span class="pun">.</span><span class="pln">logInfo</span><span class="pun">(</span><span class="str">'HeroContactComponent can log!'</span><span class="pun">);</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">

  </span><span class="kwd">get</span><span class="pln"> phoneNumber</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">heroCache</span><span class="pun">.</span><span class="pln">hero</span><span class="pun">.</span><span class="pln">phone</span><span class="pun">;</span><span class="pln"> </span><span class="pun">}</span><span class="pln">

</span><span class="pun">}</span></code>
    </pre></aio-code></code-example><p translation-result="on">注意构造函数的参数。</p><p translation-origin="off">Focus on the constructor parameters.</p><code-example path="dependency-injection-in-action/src/app/hero-contact.component.ts" region="ctor-params" header="src/app/hero-contact.component.ts" ng-version="10.0.0-rc.2"><div style="display:none">@<a href="api/core/Host" class="code-anchor">Host</a>() // limit to the host component's instance of the HeroCacheService private heroCache: HeroCacheService, @<a href="api/core/Host" class="code-anchor">Host</a>() // limit search for logger; hides the application-wide logger @<a href="api/core/Optional" class="code-anchor">Optional</a>() // ok if the logger doesn't exist private loggerService?: LoggerService</div><header class="ng-star-inserted">src/app/hero-contact.component.ts</header><aio-code class="headed-code"><pre class="lang- prettyprint">      <button title="Copy code snippet" class="material-icons copy-button no-print ng-star-inserted" aria-label="Copy code snippet from src/app/hero-contact.component.ts">
        <span aria-hidden="true">content_copy</span>
      </button>
      <code class="animated fadeIn"><span class="lit">@</span><a href="api/core/Host" class="code-anchor"><span class="lit">Host</span></a><span class="pun">()</span><span class="pln"> </span><span class="com">// limit to the host component's instance of the HeroCacheService</span><span class="pln">
</span><span class="kwd">private</span><span class="pln"> heroCache</span><span class="pun">:</span><span class="pln"> </span><span class="typ">HeroCacheService</span><span class="pun">,</span><span class="pln">

</span><span class="lit">@</span><a href="api/core/Host" class="code-anchor"><span class="lit">Host</span></a><span class="pun">()</span><span class="pln">     </span><span class="com">// limit search for logger; hides the application-wide logger</span><span class="pln">
</span><span class="lit">@</span><a href="api/core/Optional" class="code-anchor"><span class="lit">Optional</span></a><span class="pun">()</span><span class="pln"> </span><span class="com">// ok if the logger doesn't exist</span><span class="pln">
</span><span class="kwd">private</span><span class="pln"> loggerService</span><span class="pun">?:</span><span class="pln"> </span><span class="typ">LoggerService</span></code>
    </pre></aio-code></code-example><p translation-result="on"><code>@<a href="api/core/Host" class="code-anchor">Host</a>()</code> 函数是构造函数属性 <code>heroCache</code> 的装饰器，确保从其父组件 <code>HeroBioComponent</code> 得到一个缓存服务。如果该父组件中没有该服务，Angular 就会抛出错误，即使组件树里的再上级有某个组件拥有这个服务，还是会抛出错误。</p><p translation-origin="off">The <code>@<a href="api/core/Host" class="code-anchor">Host</a>()</code> function decorating the <code>heroCache</code> constructor property ensures that you get a reference to the cache service from the parent <code>HeroBioComponent</code>. Angular throws an error if the parent lacks that service, even if a component higher in the component tree includes it.</p><p translation-result="on">另一个 <code>@<a href="api/core/Host" class="code-anchor">Host</a>()</code> 函数是构造函数属性 <code>loggerService</code> 的装饰器。 在本应用程序中只有一个在 <code>AppComponent</code> 级提供的 <code>LoggerService</code> 实例。 该宿主 <code>HeroBioComponent</code> 没有自己的 <code>LoggerService</code> 提供者。</p><p translation-origin="off">A second <code>@<a href="api/core/Host" class="code-anchor">Host</a>()</code> function decorates the <code>loggerService</code> constructor property. The only <code>LoggerService</code> instance in the app is provided at the <code>AppComponent</code> level. The host <code>HeroBioComponent</code> doesn't have its own <code>LoggerService</code> provider.</p><p translation-result="on">如果没有同时使用 <code>@<a href="api/core/Optional" class="code-anchor">Optional</a>()</code> 装饰器的话，Angular 就会抛出错误。当该属性带有 <code>@<a href="api/core/Optional" class="code-anchor">Optional</a>()</code> 标记时，Angular 就会把 <code>loggerService</code> 设置为 null，并继续执行组件而不会抛出错误。</p><p translation-origin="off">Angular throws an error if you haven't also decorated the property with <code>@<a href="api/core/Optional" class="code-anchor">Optional</a>()</code>. When the property is marked as optional, Angular sets <code>loggerService</code> to null and the rest of the component adapts.</p><p translation-result="on">下面是 <code>HeroBiosAndContactsComponent</code> 的执行结果：</p><p translation-origin="off">Here's <code>HeroBiosAndContactsComponent</code> in action.</p><div class="lightbox"><img src="generated/images/guide/dependency-injection-in-action/hero-bios-and-contacts.png" alt="Bios with contact into" width="206" height="393"></div><p translation-result="on">如果注释掉 <code>@<a href="api/core/Host" class="code-anchor">Host</a>()</code> 装饰器，Angular 就会沿着注入器树往上走，直到在 <code>AppComponent</code> 中找到该日志服务。日志服务的逻辑加了进来，所显示的英雄信息增加了 "!!!" 标记，这表明确实找到了日志服务。</p><p translation-origin="off">If you comment out the <code>@<a href="api/core/Host" class="code-anchor">Host</a>()</code> decorator, Angular walks up the injector ancestor tree until it finds the logger at the <code>AppComponent</code> level. The logger logic kicks in and the hero display updates with the "!!!" marker to indicate that the logger was found.</p><div class="lightbox"><img src="generated/images/guide/dependency-injection-in-action/hero-bio-contact-no-host.png" alt="Without @Host" width="199" height="93"></div><p translation-result="on">如果你恢复了 <code>@<a href="api/core/Host" class="code-anchor">Host</a>()</code> 装饰器，并且注释掉 <code>@<a href="api/core/Optional" class="code-anchor">Optional</a></code> 装饰器，应用就会抛出一个错误，因为它在宿主组件这一层找不到所需的 <code>Logger</code>。<code>EXCEPTION: No provider for LoggerService! (HeroContactComponent -&gt; LoggerService)</code></p><p translation-origin="off">If you restore the <code>@<a href="api/core/Host" class="code-anchor">Host</a>()</code> decorator and comment out <code>@<a href="api/core/Optional" class="code-anchor">Optional</a></code>, the app throws an exception when it cannot find the required logger at the host component level. <code>EXCEPTION: No provider for LoggerService! (HeroContactComponent -&gt; LoggerService)</code></p><h3 id="supply-a-custom-provider-with-inject" translation-result="on">使用 <code>@<a href="api/core/Inject" class="code-anchor">Inject</a></code> 指定自定义提供者<a title="Link to this heading" class="header-link" aria-hidden="true" href="guide/dependency-injection-in-action#supply-a-custom-provider-with-inject"><i class="material-icons">link</i></a></h3><h3 translation-origin="off" id="supply-a-custom-provider-with-inject">Supply a custom provider with <code>@<a href="api/core/Inject" class="code-anchor">Inject</a></code><a title="Link to this heading" class="header-link" aria-hidden="true" href="guide/dependency-injection-in-action#supply-a-custom-provider-with-inject"><i class="material-icons">link</i></a></h3><p translation-result="on">自定义提供者让你可以为隐式依赖提供一个具体的实现，比如内置浏览器 API。下面的例子使用 <code><a href="api/core/InjectionToken" class="code-anchor">InjectionToken</a></code> 来提供 <a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/localStorage">localStorage</a>，将其作为 <code>BrowserStorageService</code> 的依赖项。</p><p translation-origin="off">Using a custom provider allows you to provide a concrete implementation for implicit dependencies, such as built-in browser APIs. The following example uses an <code><a href="api/core/InjectionToken" class="code-anchor">InjectionToken</a></code> to provide the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/localStorage">localStorage</a> browser API as a dependency in the <code>BrowserStorageService</code>.</p><code-example path="dependency-injection-in-action/src/app/storage.service.ts" header="src/app/storage.service.ts" ng-version="10.0.0-rc.2"><div style="display:none">import { <a href="api/core/Inject" class="code-anchor">Inject</a>, <a href="api/core/Injectable" class="code-anchor">Injectable</a>, <a href="api/core/InjectionToken" class="code-anchor">InjectionToken</a> } from '@angular/core'; export const BROWSER_STORAGE = new <a href="api/core/InjectionToken" class="code-anchor">InjectionToken</a>&lt;Storage&gt;('Browser Storage', { providedIn: 'root', factory: () =&gt; localStorage }); @<a href="api/core/Injectable" class="code-anchor">Injectable</a>({ providedIn: 'root' }) export class BrowserStorageService { constructor(@<a href="api/core/Inject" class="code-anchor">Inject</a>(BROWSER_STORAGE) public storage: Storage) {} get(key: string) { this.storage.getItem(key); } set(key: string, value: string) { this.storage.setItem(key, value); } remove(key: string) { this.storage.removeItem(key); } clear() { this.storage.clear(); } }</div><header class="ng-star-inserted">src/app/storage.service.ts</header><aio-code class="headed-code"><pre class="lang- prettyprint">      <button title="Copy code snippet" class="material-icons copy-button no-print ng-star-inserted" aria-label="Copy code snippet from src/app/storage.service.ts">
        <span aria-hidden="true">content_copy</span>
      </button>
      <code class="animated fadeIn"><span class="kwd">import</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><a href="api/core/Inject" class="code-anchor"><span class="typ">Inject</span></a><span class="pun">,</span><span class="pln"> </span><a href="api/core/Injectable" class="code-anchor"><span class="typ">Injectable</span></a><span class="pun">,</span><span class="pln"> </span><a href="api/core/InjectionToken" class="code-anchor"><span class="typ">InjectionToken</span></a><span class="pln"> </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">from</span><span class="pln"> </span><span class="str">'@angular/core'</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">export</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> BROWSER_STORAGE </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><a href="api/core/InjectionToken" class="code-anchor"><span class="typ">InjectionToken</span></a><span class="pun">&lt;</span><span class="typ">Storage</span><span class="pun">&gt;(</span><span class="str">'Browser Storage'</span><span class="pun">,</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  providedIn</span><span class="pun">:</span><span class="pln"> </span><span class="str">'root'</span><span class="pun">,</span><span class="pln">
  factory</span><span class="pun">:</span><span class="pln"> </span><span class="pun">()</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> localStorage
</span><span class="pun">});</span><span class="pln">

</span><span class="lit">@</span><a href="api/core/Injectable" class="code-anchor"><span class="lit">Injectable</span></a><span class="pun">({</span><span class="pln">
  providedIn</span><span class="pun">:</span><span class="pln"> </span><span class="str">'root'</span><span class="pln">
</span><span class="pun">})</span><span class="pln">
</span><span class="kwd">export</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">BrowserStorageService</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  </span><span class="kwd">constructor</span><span class="pun">(</span><span class="lit">@</span><a href="api/core/Inject" class="code-anchor"><span class="lit">Inject</span></a><span class="pun">(</span><span class="pln">BROWSER_STORAGE</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">public</span><span class="pln"> storage</span><span class="pun">:</span><span class="pln"> </span><span class="typ">Storage</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{}</span><span class="pln">

  </span><span class="kwd">get</span><span class="pun">(</span><span class="pln">key</span><span class="pun">:</span><span class="pln"> </span><span class="kwd">string</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">storage</span><span class="pun">.</span><span class="pln">getItem</span><span class="pun">(</span><span class="pln">key</span><span class="pun">);</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">

  </span><span class="kwd">set</span><span class="pun">(</span><span class="pln">key</span><span class="pun">:</span><span class="pln"> </span><span class="kwd">string</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">value</span><span class="pun">:</span><span class="pln"> </span><span class="kwd">string</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">storage</span><span class="pun">.</span><span class="pln">setItem</span><span class="pun">(</span><span class="pln">key</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">value</span><span class="pun">);</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">

  </span><span class="kwd">remove</span><span class="pun">(</span><span class="pln">key</span><span class="pun">:</span><span class="pln"> </span><span class="kwd">string</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">storage</span><span class="pun">.</span><span class="pln">removeItem</span><span class="pun">(</span><span class="pln">key</span><span class="pun">);</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">

  clear</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">storage</span><span class="pun">.</span><span class="pln">clear</span><span class="pun">();</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code>
    </pre></aio-code></code-example><p translation-result="on"><code>factory</code> 函数返回 window 对象上的 <code>localStorage</code> 属性。<code><a href="api/core/Inject" class="code-anchor">Inject</a></code> 装饰器修饰一个构造函数参数，用于为某个依赖提供自定义提供者。现在，就可以在测试期间使用 <code>localStorage</code> 的 Mock API 来覆盖这个提供者了，而不必与真实的浏览器 API 进行交互。</p><p translation-origin="off">The <code>factory</code> function returns the <code>localStorage</code> property that is attached to the browser window object. The <code><a href="api/core/Inject" class="code-anchor">Inject</a></code> decorator is a constructor parameter used to specify a custom provider of a dependency. This custom provider can now be overridden during testing with a mock API of <code>localStorage</code> instead of interacting with real browser APIs.</p><a id="skip"></a><h3 id="modify-the-provider-search-with-self-and-skipself" translation-result="on">使用 <code>@<a href="api/core/Self" class="code-anchor">Self</a></code> 和 <code>@<a href="api/core/SkipSelf" class="code-anchor">SkipSelf</a></code> 来修改提供者的搜索方式<a title="Link to this heading" class="header-link" aria-hidden="true" href="guide/dependency-injection-in-action#modify-the-provider-search-with-self-and-skipself"><i class="material-icons">link</i></a></h3><h3 translation-origin="off" id="modify-the-provider-search-with-self-and-skipself">Modify the provider search with <code>@<a href="api/core/Self" class="code-anchor">Self</a></code> and <code>@<a href="api/core/SkipSelf" class="code-anchor">SkipSelf</a></code><a title="Link to this heading" class="header-link" aria-hidden="true" href="guide/dependency-injection-in-action#modify-the-provider-search-with-self-and-skipself"><i class="material-icons">link</i></a></h3><p translation-result="on">注入器也可以通过构造函数的参数装饰器来指定范围。下面的例子就在 <code><a href="api/core/Component" class="code-anchor">Component</a></code> 类的 <code>providers</code> 中使用浏览器的 <code>sessionStorage</code> API 覆盖了 <code>BROWSER_STORAGE</code> 令牌。同一个 <code>BrowserStorageService</code> 在构造函数中使用 <code>@<a href="api/core/Self" class="code-anchor">Self</a></code> 和 <code>@<a href="api/core/SkipSelf" class="code-anchor">SkipSelf</a></code> 装饰器注入了两次，来分别指定由哪个注入器来提供依赖。</p><p translation-origin="off">Providers can also be scoped by injector through constructor parameter decorators. The following example overrides the <code>BROWSER_STORAGE</code> token in the <code><a href="api/core/Component" class="code-anchor">Component</a></code> class <code>providers</code> with the <code>sessionStorage</code> browser API. The same <code>BrowserStorageService</code> is injected twice in the constructor, decorated with <code>@<a href="api/core/Self" class="code-anchor">Self</a></code> and <code>@<a href="api/core/SkipSelf" class="code-anchor">SkipSelf</a></code> to define which injector handles the provider dependency.</p><code-example path="dependency-injection-in-action/src/app/storage.component.ts" header="src/app/storage.component.ts" ng-version="10.0.0-rc.2"><div style="display:none">import { <a href="api/core/Component" class="code-anchor">Component</a>, <a href="api/core/OnInit" class="code-anchor">OnInit</a>, <a href="api/core/Self" class="code-anchor">Self</a>, <a href="api/core/SkipSelf" class="code-anchor">SkipSelf</a> } from '@angular/core'; import { BROWSER_STORAGE, BrowserStorageService } from './storage.service'; @<a href="api/core/Component" class="code-anchor">Component</a>({ selector: 'app-storage', template: ` Open the inspector to see the local/session storage keys: &lt;h3&gt;Session Storage&lt;/h3&gt; &lt;button (click)="setSession()"&gt;Set Session Storage&lt;/button&gt; &lt;h3&gt;Local Storage&lt;/h3&gt; &lt;button (click)="setLocal()"&gt;Set Local Storage&lt;/button&gt; `, providers: [ BrowserStorageService, { provide: BROWSER_STORAGE, useFactory: () =&gt; sessionStorage } ] }) export class StorageComponent implements <a href="api/core/OnInit" class="code-anchor">OnInit</a> { constructor( @<a href="api/core/Self" class="code-anchor">Self</a>() private sessionStorageService: BrowserStorageService, @<a href="api/core/SkipSelf" class="code-anchor">SkipSelf</a>() private localStorageService: BrowserStorageService, ) { } ngOnInit() { } setSession() { this.sessionStorageService.set('hero', 'Dr Nice - Session'); } setLocal() { this.localStorageService.set('hero', 'Dr Nice - Local'); } }</div><header class="ng-star-inserted">src/app/storage.component.ts</header><aio-code class="headed-code"><pre class="lang- prettyprint">      <button title="Copy code snippet" class="material-icons copy-button no-print ng-star-inserted" aria-label="Copy code snippet from src/app/storage.component.ts">
        <span aria-hidden="true">content_copy</span>
      </button>
      <code class="animated fadeIn"><span class="kwd">import</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><a href="api/core/Component" class="code-anchor"><span class="typ">Component</span></a><span class="pun">,</span><span class="pln"> </span><a href="api/core/OnInit" class="code-anchor"><span class="typ">OnInit</span></a><span class="pun">,</span><span class="pln"> </span><a href="api/core/Self" class="code-anchor"><span class="typ">Self</span></a><span class="pun">,</span><span class="pln"> </span><a href="api/core/SkipSelf" class="code-anchor"><span class="typ">SkipSelf</span></a><span class="pln"> </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">from</span><span class="pln"> </span><span class="str">'@angular/core'</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> BROWSER_STORAGE</span><span class="pun">,</span><span class="pln"> </span><span class="typ">BrowserStorageService</span><span class="pln"> </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">from</span><span class="pln"> </span><span class="str">'./storage.service'</span><span class="pun">;</span><span class="pln">

</span><span class="lit">@</span><a href="api/core/Component" class="code-anchor"><span class="lit">Component</span></a><span class="pun">({</span><span class="pln">
  selector</span><span class="pun">:</span><span class="pln"> </span><span class="str">'app-storage'</span><span class="pun">,</span><span class="pln">
  </span><span class="kwd">template</span><span class="pun">:</span><span class="pln"> </span><span class="str">`
    Open the inspector to see the local/session storage keys:

    &lt;h3&gt;Session Storage&lt;/h3&gt;
    &lt;button (click)="setSession()"&gt;Set Session Storage&lt;/button&gt;

    &lt;h3&gt;Local Storage&lt;/h3&gt;
    &lt;button (click)="setLocal()"&gt;Set Local Storage&lt;/button&gt;
  `</span><span class="pun">,</span><span class="pln">
  providers</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span><span class="pln">
    </span><span class="typ">BrowserStorageService</span><span class="pun">,</span><span class="pln">
    </span><span class="pun">{</span><span class="pln"> provide</span><span class="pun">:</span><span class="pln"> BROWSER_STORAGE</span><span class="pun">,</span><span class="pln"> useFactory</span><span class="pun">:</span><span class="pln"> </span><span class="pun">()</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> sessionStorage </span><span class="pun">}</span><span class="pln">
  </span><span class="pun">]</span><span class="pln">
</span><span class="pun">})</span><span class="pln">
</span><span class="kwd">export</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">StorageComponent</span><span class="pln"> </span><span class="kwd">implements</span><span class="pln"> </span><a href="api/core/OnInit" class="code-anchor"><span class="typ">OnInit</span></a><span class="pln"> </span><span class="pun">{</span><span class="pln">

  </span><span class="kwd">constructor</span><span class="pun">(</span><span class="pln">
    </span><span class="lit">@</span><a href="api/core/Self" class="code-anchor"><span class="lit">Self</span></a><span class="pun">()</span><span class="pln"> </span><span class="kwd">private</span><span class="pln"> sessionStorageService</span><span class="pun">:</span><span class="pln"> </span><span class="typ">BrowserStorageService</span><span class="pun">,</span><span class="pln">
    </span><span class="lit">@</span><a href="api/core/SkipSelf" class="code-anchor"><span class="lit">SkipSelf</span></a><span class="pun">()</span><span class="pln"> </span><span class="kwd">private</span><span class="pln"> localStorageService</span><span class="pun">:</span><span class="pln"> </span><span class="typ">BrowserStorageService</span><span class="pun">,</span><span class="pln">
  </span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="pun">}</span><span class="pln">

  ngOnInit</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">

  setSession</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">sessionStorageService</span><span class="pun">.</span><span class="kwd">set</span><span class="pun">(</span><span class="str">'hero'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'Dr Nice - Session'</span><span class="pun">);</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">

  setLocal</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">localStorageService</span><span class="pun">.</span><span class="kwd">set</span><span class="pun">(</span><span class="str">'hero'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'Dr Nice - Local'</span><span class="pun">);</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code>
    </pre></aio-code></code-example><p translation-result="on">使用 <code>@<a href="api/core/Self" class="code-anchor">Self</a></code> 装饰器时，注入器只在该组件的注入器中查找提供者。<code>@<a href="api/core/SkipSelf" class="code-anchor">SkipSelf</a></code> 装饰器可以让你跳过局部注入器，并在注入器树中向上查找，以发现哪个提供者满足该依赖。 <code>sessionStorageService</code> 实例使用浏览器的 <code>sessionStorage</code> 来跟 <code>BrowserStorageService</code> 打交道，而 <code>localStorageService</code> 跳过了局部注入器，使用根注入器提供的 <code>BrowserStorageService</code>，它使用浏览器的 <code>localStorage</code> API。</p><p translation-origin="off">Using the <code>@<a href="api/core/Self" class="code-anchor">Self</a></code> decorator, the injector only looks at the component's injector for its providers. The <code>@<a href="api/core/SkipSelf" class="code-anchor">SkipSelf</a></code> decorator allows you to skip the local injector and look up in the hierarchy to find a provider that satisfies this dependency. The <code>sessionStorageService</code> instance interacts with the <code>BrowserStorageService</code> using the <code>sessionStorage</code> browser API, while the <code>localStorageService</code> skips the local injector and uses the root <code>BrowserStorageService</code> that uses the <code>localStorage</code> browser API.</p><a id="component-element"></a><h2 id="inject-the-components-dom-element" translation-result="on">注入组件的 DOM 元素<a title="Link to this heading" class="header-link" aria-hidden="true" href="guide/dependency-injection-in-action#inject-the-components-dom-element"><i class="material-icons">link</i></a></h2><h2 translation-origin="off" id="inject-the-components-dom-element">Inject the component's DOM element<a title="Link to this heading" class="header-link" aria-hidden="true" href="guide/dependency-injection-in-action#inject-the-components-dom-element"><i class="material-icons">link</i></a></h2><p translation-result="on">即便开发者极力避免，仍然会有很多视觉效果和第三方工具 (比如 jQuery) 需要访问 DOM。这会让你不得不访问组件所在的 DOM 元素。</p><p translation-origin="off">Although developers strive to avoid it, many visual effects and third-party tools, such as jQuery, require DOM access. As a result, you might need to access a component's DOM element.</p><p translation-result="on">为了说明这一点，请看<a href="guide/attribute-directives">属性型指令</a>中那个 <code>HighlightDirective</code> 的简化版。</p><p translation-origin="off">To illustrate, here's a simplified version of <code>HighlightDirective</code> from the <a href="guide/attribute-directives">Attribute Directives</a> page.</p><code-example path="dependency-injection-in-action/src/app/highlight.directive.ts" header="src/app/highlight.directive.ts" ng-version="10.0.0-rc.2"><div style="display:none">import { <a href="api/core/Directive" class="code-anchor">Directive</a>, <a href="api/core/ElementRef" class="code-anchor">ElementRef</a>, <a href="api/core/HostListener" class="code-anchor">HostListener</a>, <a href="api/core/Input" class="code-anchor">Input</a> } from '@angular/core'; @<a href="api/core/Directive" class="code-anchor">Directive</a>({ selector: '[appHighlight]' }) export class HighlightDirective { @<a href="api/core/Input" class="code-anchor">Input</a>('appHighlight') highlightColor: string; private el: HTMLElement; constructor(el: <a href="api/core/ElementRef" class="code-anchor">ElementRef</a>) { this.el = el.nativeElement; } @<a href="api/core/HostListener" class="code-anchor">HostListener</a>('mouseenter') onMouseEnter() { this.highlight(this.highlightColor || 'cyan'); } @<a href="api/core/HostListener" class="code-anchor">HostListener</a>('mouseleave') onMouseLeave() { this.highlight(null); } private highlight(color: string) { this.el.style.backgroundColor = color; } }</div><header class="ng-star-inserted">src/app/highlight.directive.ts</header><aio-code class="headed-code"><pre class="lang- prettyprint">      <button title="Copy code snippet" class="material-icons copy-button no-print ng-star-inserted" aria-label="Copy code snippet from src/app/highlight.directive.ts">
        <span aria-hidden="true">content_copy</span>
      </button>
      <code class="animated fadeIn"><span class="kwd">import</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><a href="api/core/Directive" class="code-anchor"><span class="typ">Directive</span></a><span class="pun">,</span><span class="pln"> </span><a href="api/core/ElementRef" class="code-anchor"><span class="typ">ElementRef</span></a><span class="pun">,</span><span class="pln"> </span><a href="api/core/HostListener" class="code-anchor"><span class="typ">HostListener</span></a><span class="pun">,</span><span class="pln"> </span><a href="api/core/Input" class="code-anchor"><span class="typ">Input</span></a><span class="pln"> </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">from</span><span class="pln"> </span><span class="str">'@angular/core'</span><span class="pun">;</span><span class="pln">

</span><span class="lit">@</span><a href="api/core/Directive" class="code-anchor"><span class="lit">Directive</span></a><span class="pun">({</span><span class="pln">
  selector</span><span class="pun">:</span><span class="pln"> </span><span class="str">'[appHighlight]'</span><span class="pln">
</span><span class="pun">})</span><span class="pln">
</span><span class="kwd">export</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">HighlightDirective</span><span class="pln"> </span><span class="pun">{</span><span class="pln">

  </span><span class="lit">@</span><a href="api/core/Input" class="code-anchor"><span class="lit">Input</span></a><span class="pun">(</span><span class="str">'appHighlight'</span><span class="pun">)</span><span class="pln"> highlightColor</span><span class="pun">:</span><span class="pln"> </span><span class="kwd">string</span><span class="pun">;</span><span class="pln">

  </span><span class="kwd">private</span><span class="pln"> el</span><span class="pun">:</span><span class="pln"> </span><span class="typ">HTMLElement</span><span class="pun">;</span><span class="pln">

  </span><span class="kwd">constructor</span><span class="pun">(</span><span class="pln">el</span><span class="pun">:</span><span class="pln"> </span><a href="api/core/ElementRef" class="code-anchor"><span class="typ">ElementRef</span></a><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">el </span><span class="pun">=</span><span class="pln"> el</span><span class="pun">.</span><span class="pln">nativeElement</span><span class="pun">;</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">

  </span><span class="lit">@</span><a href="api/core/HostListener" class="code-anchor"><span class="lit">HostListener</span></a><span class="pun">(</span><span class="str">'mouseenter'</span><span class="pun">)</span><span class="pln"> onMouseEnter</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">highlight</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">highlightColor </span><span class="pun">||</span><span class="pln"> </span><span class="str">'cyan'</span><span class="pun">);</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">

  </span><span class="lit">@</span><a href="api/core/HostListener" class="code-anchor"><span class="lit">HostListener</span></a><span class="pun">(</span><span class="str">'mouseleave'</span><span class="pun">)</span><span class="pln"> onMouseLeave</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">highlight</span><span class="pun">(</span><span class="kwd">null</span><span class="pun">);</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">

  </span><span class="kwd">private</span><span class="pln"> highlight</span><span class="pun">(</span><span class="pln">color</span><span class="pun">:</span><span class="pln"> </span><span class="kwd">string</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">el</span><span class="pun">.</span><span class="pln">style</span><span class="pun">.</span><span class="pln">backgroundColor </span><span class="pun">=</span><span class="pln"> color</span><span class="pun">;</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code>
    </pre></aio-code></code-example><p translation-result="on">当用户把鼠标移到 DOM 元素上时，指令将指令所在的元素的背景设置为一个高亮颜色。</p><p translation-origin="off">The directive sets the background to a highlight color when the user mouses over the DOM element to which the directive is applied.</p><p translation-result="on">Angular 把构造函数参数 <code>el</code> 设置为注入的 <code><a href="api/core/ElementRef" class="code-anchor">ElementRef</a></code>，该 <code><a href="api/core/ElementRef" class="code-anchor">ElementRef</a></code> 代表了宿主的 DOM 元素，它的 <code>nativeElement</code> 属性把该 DOM 元素暴露给了指令。</p><p translation-origin="off">Angular sets the constructor's <code>el</code> parameter to the injected <code><a href="api/core/ElementRef" class="code-anchor">ElementRef</a></code>. (An <code><a href="api/core/ElementRef" class="code-anchor">ElementRef</a></code> is a wrapper around a DOM element, whose <code>nativeElement</code> property exposes the DOM element for the directive to manipulate.)</p><p translation-result="on">下面的代码把指令的 <code>myHighlight</code> 属性(Attribute)填加到两个 <code>&lt;div&gt;</code> 标签里，一个没有赋值，一个赋值了颜色。</p><p translation-origin="off">The sample code applies the directive's <code>myHighlight</code> attribute to two <code>&lt;div&gt;</code> tags, first without a value (yielding the default color) and then with an assigned color value.</p><code-example path="dependency-injection-in-action/src/app/app.component.html" region="highlight" header="src/app/app.component.html (highlight)" ng-version="10.0.0-rc.2"><div style="display:none">&lt;div id="highlight" class="di-component" appHighlight&gt; &lt;h3&gt;Hero Bios and Contacts&lt;/h3&gt; &lt;div appHighlight="yellow"&gt; &lt;app-hero-bios-and-contacts&gt;&lt;/app-hero-bios-and-contacts&gt; &lt;/div&gt; &lt;/div&gt;</div><header class="ng-star-inserted">src/app/app.component.html (highlight)</header><aio-code class="headed-code"><pre class="lang- prettyprint">      <button title="Copy code snippet" class="material-icons copy-button no-print ng-star-inserted" aria-label="Copy code snippet from src/app/app.component.html (highlight)">
        <span aria-hidden="true">content_copy</span>
      </button>
      <code class="animated fadeIn"><span class="tag">&lt;div</span><span class="pln"> </span><span class="atn">id</span><span class="pun">=</span><span class="atv">"highlight"</span><span class="pln">  </span><span class="atn">class</span><span class="pun">=</span><span class="atv">"di-component"</span><span class="pln">  </span><span class="atn">appHighlight</span><span class="tag">&gt;</span><span class="pln">
  </span><span class="tag">&lt;h3&gt;</span><span class="pln">Hero Bios and Contacts</span><span class="tag">&lt;/h3&gt;</span><span class="pln">
  </span><span class="tag">&lt;div</span><span class="pln"> </span><span class="atn">appHighlight</span><span class="pun">=</span><span class="atv">"yellow"</span><span class="tag">&gt;</span><span class="pln">
    </span><span class="tag">&lt;app-hero-bios-and-contacts&gt;&lt;/app-hero-bios-and-contacts&gt;</span><span class="pln">
  </span><span class="tag">&lt;/div&gt;</span><span class="pln">
</span><span class="tag">&lt;/div&gt;</span></code>
    </pre></aio-code></code-example><p translation-result="on">下图显示了鼠标移到 <code>&lt;hero-bios-and-contacts&gt;</code> 标签上的效果：</p><p translation-origin="off">The following image shows the effect of mousing over the <code>&lt;hero-bios-and-contacts&gt;</code> tag.</p><div class="lightbox"><img src="generated/images/guide/dependency-injection-in-action/highlight.png" alt="Highlighted bios" width="318" height="196"></div><a id="providers"></a><h2 id="define-dependencies-with-providers" translation-result="on">使用提供者来定义依赖<a title="Link to this heading" class="header-link" aria-hidden="true" href="guide/dependency-injection-in-action#define-dependencies-with-providers"><i class="material-icons">link</i></a></h2><h2 translation-origin="off" id="define-dependencies-with-providers">Define dependencies with providers<a title="Link to this heading" class="header-link" aria-hidden="true" href="guide/dependency-injection-in-action#define-dependencies-with-providers"><i class="material-icons">link</i></a></h2><p translation-result="on">本节会示范如何编写提供者来交付被依赖的服务。</p><p translation-origin="off">This section demonstrates how to write providers that deliver dependent services.</p><p translation-result="on">为了从依赖注入器中获取服务，你必须传给它一个<a href="guide/glossary#token">令牌</a>。 Angular 通常会通过指定构造函数参数以及参数的类型来处理它。 参数的类型可以用作注入器的查阅令牌。 Angular 会把该令牌传给注入器，并把它的结果赋给相应的参数。</p><p translation-origin="off">In order to get a service from a dependency injector, you have to give it a <a href="guide/glossary#token">token</a>. Angular usually handles this transaction by specifying a constructor parameter and its type. The parameter type serves as the injector lookup token. Angular passes this token to the injector and assigns the result to the parameter.</p><p translation-result="on">下面是一个典型的例子。</p><p translation-origin="off">The following is a typical example.</p><code-example path="dependency-injection-in-action/src/app/hero-bios.component.ts" region="ctor" header="src/app/hero-bios.component.ts (component constructor injection)" ng-version="10.0.0-rc.2"><div style="display:none">constructor(logger: LoggerService) { logger.logInfo('Creating HeroBiosComponent'); }</div><header class="ng-star-inserted">src/app/hero-bios.component.ts (component constructor injection)</header><aio-code class="headed-code"><pre class="lang- prettyprint">      <button title="Copy code snippet" class="material-icons copy-button no-print ng-star-inserted" aria-label="Copy code snippet from src/app/hero-bios.component.ts (component constructor injection)">
        <span aria-hidden="true">content_copy</span>
      </button>
      <code class="animated fadeIn"><span class="kwd">constructor</span><span class="pun">(</span><span class="pln">logger</span><span class="pun">:</span><span class="pln"> </span><span class="typ">LoggerService</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  logger</span><span class="pun">.</span><span class="pln">logInfo</span><span class="pun">(</span><span class="str">'Creating HeroBiosComponent'</span><span class="pun">);</span><span class="pln">
</span><span class="pun">}</span></code>
    </pre></aio-code></code-example><p translation-result="on">Angular 会要求注入器提供与 <code>LoggerService</code> 相关的服务，并把返回的值赋给 <code>logger</code> 参数。</p><p translation-origin="off">Angular asks the injector for the service associated with <code>LoggerService</code> and assigns the returned value to the <code>logger</code> parameter.</p><p translation-result="on">如果注入器已经缓存了与该令牌相关的服务实例，那么它就会直接提供此实例。 如果它没有，它就要使用与该令牌相关的提供者来创建一个。</p><p translation-origin="off">If the injector has already cached an instance of the service associated with the token, it provides that instance. If it doesn't, it needs to make one using the provider associated with the token.</p><div class="alert is-helpful"><p translation-result="on">如果注入器无法根据令牌在自己内部找到对应的提供者，它便将请求移交给它的父级注入器，这个过程不断重复，直到没有更多注入器为止。 如果没找到，注入器就抛出一个错误...除非这个请求是<a href="guide/dependency-injection-in-action#optional">可选的</a>。</p><p translation-origin="off">If the injector doesn't have a provider for a requested token, it delegates the request to its parent injector, where the process repeats until there are no more injectors. If the search fails, the injector throws an error—unless the request was <a href="guide/dependency-injection-in-action#optional">optional</a>.</p></div><p translation-result="on">新的注入器没有提供者。 Angular 会使用一组首选提供者来初始化它本身的注入器。 你必须为自己应用程序特有的依赖项来配置提供者。</p><p translation-origin="off">A new injector has no providers. Angular initializes the injectors it creates with a set of preferred providers. You have to configure providers for your own app-specific dependencies.</p><a id="defining-providers"></a><h3 id="defining-providers" translation-result="on">定义提供者<a title="Link to this heading" class="header-link" aria-hidden="true" href="guide/dependency-injection-in-action#defining-providers"><i class="material-icons">link</i></a></h3><h3 translation-origin="off" id="defining-providers">Defining providers<a title="Link to this heading" class="header-link" aria-hidden="true" href="guide/dependency-injection-in-action#defining-providers"><i class="material-icons">link</i></a></h3><p translation-result="on">用于实例化类的默认方法不一定总适合用来创建依赖。你可以到<a href="guide/dependency-injection-providers">依赖提供者</a>部分查看其它方法。 <code>HeroOfTheMonthComponent</code> 例子示范了一些替代方案，展示了为什么需要它们。 它看起来很简单：一些属性和一些由 logger 生成的日志。</p><p translation-origin="off">A dependency can't always be created by the default method of instantiating a class. You learned about some other methods in <a href="guide/dependency-injection-providers">Dependency Providers</a>. The following <code>HeroOfTheMonthComponent</code> example demonstrates many of the alternatives and why you need them. It's visually simple: a few properties and the logs produced by a logger.</p><div class="lightbox"><img src="generated/images/guide/dependency-injection-in-action/hero-of-month.png" alt="Hero of the month" width="300" height="165"></div><p translation-result="on">它背后的代码定制了 DI 框架提供依赖项的方法和位置。 这个例子阐明了通过<a href="guide/dependency-injection-providers#provide"><em>提供</em>对象字面量</a>来把对象的定义和 DI 令牌关联起来的另一种方式。</p><p translation-origin="off">The code behind it customizes how and where the DI framework provides dependencies. The use cases illustrate different ways to use the <a href="guide/dependency-injection-providers#provide"><em>provide</em> object literal</a> to associate a definition object with a DI token.</p><code-example path="dependency-injection-in-action/src/app/hero-of-the-month.component.ts" region="hero-of-the-month" header="hero-of-the-month.component.ts" ng-version="10.0.0-rc.2"><div style="display:none">import { <a href="api/core/Component" class="code-anchor">Component</a>, <a href="api/core/Inject" class="code-anchor">Inject</a> } from '@angular/core'; import { DateLoggerService } from './date-logger.service'; import { Hero } from './hero'; import { HeroService } from './hero.service'; import { LoggerService } from './logger.service'; import { MinimalLogger } from './minimal-logger.service'; import { RUNNERS_UP, runnersUpFactory } from './runners-up'; @<a href="api/core/Component" class="code-anchor">Component</a>({ selector: 'app-hero-of-the-month', templateUrl: './hero-of-the-month.component.html', providers: [ { provide: Hero, useValue: someHero }, { provide: TITLE, useValue: 'Hero of the Month' }, { provide: HeroService, useClass: HeroService }, { provide: LoggerService, useClass: DateLoggerService }, { provide: MinimalLogger, useExisting: LoggerService }, { provide: RUNNERS_UP, useFactory: runnersUpFactory(2), deps: [Hero, HeroService] } ] }) export class HeroOfTheMonthComponent { logs: string[] = []; constructor( logger: MinimalLogger, public heroOfTheMonth: Hero, @<a href="api/core/Inject" class="code-anchor">Inject</a>(RUNNERS_UP) public runnersUp: string, @<a href="api/core/Inject" class="code-anchor">Inject</a>(TITLE) public title: string) { this.logs = logger.logs; logger.logInfo('starting up'); } }</div><header class="ng-star-inserted">hero-of-the-month.component.ts</header><aio-code class="headed-code"><pre class="lang- prettyprint">      <button title="Copy code snippet" class="material-icons copy-button no-print ng-star-inserted" aria-label="Copy code snippet from hero-of-the-month.component.ts">
        <span aria-hidden="true">content_copy</span>
      </button>
      <code class="animated fadeIn"><span class="kwd">import</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><a href="api/core/Component" class="code-anchor"><span class="typ">Component</span></a><span class="pun">,</span><span class="pln"> </span><a href="api/core/Inject" class="code-anchor"><span class="typ">Inject</span></a><span class="pln"> </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">from</span><span class="pln"> </span><span class="str">'@angular/core'</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">import</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="typ">DateLoggerService</span><span class="pln"> </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">from</span><span class="pln"> </span><span class="str">'./date-logger.service'</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="typ">Hero</span><span class="pln"> </span><span class="pun">}</span><span class="pln">              </span><span class="kwd">from</span><span class="pln"> </span><span class="str">'./hero'</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="typ">HeroService</span><span class="pln"> </span><span class="pun">}</span><span class="pln">       </span><span class="kwd">from</span><span class="pln"> </span><span class="str">'./hero.service'</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="typ">LoggerService</span><span class="pln"> </span><span class="pun">}</span><span class="pln">     </span><span class="kwd">from</span><span class="pln"> </span><span class="str">'./logger.service'</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="typ">MinimalLogger</span><span class="pln"> </span><span class="pun">}</span><span class="pln">     </span><span class="kwd">from</span><span class="pln"> </span><span class="str">'./minimal-logger.service'</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">import</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> RUNNERS_UP</span><span class="pun">,</span><span class="pln">
         runnersUpFactory </span><span class="pun">}</span><span class="pln">  </span><span class="kwd">from</span><span class="pln"> </span><span class="str">'./runners-up'</span><span class="pun">;</span><span class="pln">

</span><span class="lit">@</span><a href="api/core/Component" class="code-anchor"><span class="lit">Component</span></a><span class="pun">({</span><span class="pln">
  selector</span><span class="pun">:</span><span class="pln"> </span><span class="str">'app-hero-of-the-month'</span><span class="pun">,</span><span class="pln">
  templateUrl</span><span class="pun">:</span><span class="pln"> </span><span class="str">'./hero-of-the-month.component.html'</span><span class="pun">,</span><span class="pln">
  providers</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span><span class="pln">
    </span><span class="pun">{</span><span class="pln"> provide</span><span class="pun">:</span><span class="pln"> </span><span class="typ">Hero</span><span class="pun">,</span><span class="pln">          useValue</span><span class="pun">:</span><span class="pln">    someHero </span><span class="pun">},</span><span class="pln">
    </span><span class="pun">{</span><span class="pln"> provide</span><span class="pun">:</span><span class="pln"> TITLE</span><span class="pun">,</span><span class="pln">         useValue</span><span class="pun">:</span><span class="pln">   </span><span class="str">'Hero of the Month'</span><span class="pln"> </span><span class="pun">},</span><span class="pln">
    </span><span class="pun">{</span><span class="pln"> provide</span><span class="pun">:</span><span class="pln"> </span><span class="typ">HeroService</span><span class="pun">,</span><span class="pln">   useClass</span><span class="pun">:</span><span class="pln">    </span><span class="typ">HeroService</span><span class="pln"> </span><span class="pun">},</span><span class="pln">
    </span><span class="pun">{</span><span class="pln"> provide</span><span class="pun">:</span><span class="pln"> </span><span class="typ">LoggerService</span><span class="pun">,</span><span class="pln"> useClass</span><span class="pun">:</span><span class="pln">    </span><span class="typ">DateLoggerService</span><span class="pln"> </span><span class="pun">},</span><span class="pln">
    </span><span class="pun">{</span><span class="pln"> provide</span><span class="pun">:</span><span class="pln"> </span><span class="typ">MinimalLogger</span><span class="pun">,</span><span class="pln"> useExisting</span><span class="pun">:</span><span class="pln"> </span><span class="typ">LoggerService</span><span class="pln"> </span><span class="pun">},</span><span class="pln">
    </span><span class="pun">{</span><span class="pln"> provide</span><span class="pun">:</span><span class="pln"> RUNNERS_UP</span><span class="pun">,</span><span class="pln">    useFactory</span><span class="pun">:</span><span class="pln">  runnersUpFactory</span><span class="pun">(</span><span class="lit">2</span><span class="pun">),</span><span class="pln"> deps</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span><span class="typ">Hero</span><span class="pun">,</span><span class="pln"> </span><span class="typ">HeroService</span><span class="pun">]</span><span class="pln"> </span><span class="pun">}</span><span class="pln">
  </span><span class="pun">]</span><span class="pln">
</span><span class="pun">})</span><span class="pln">
</span><span class="kwd">export</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">HeroOfTheMonthComponent</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  logs</span><span class="pun">:</span><span class="pln"> </span><span class="kwd">string</span><span class="pun">[]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[];</span><span class="pln">

  </span><span class="kwd">constructor</span><span class="pun">(</span><span class="pln">
      logger</span><span class="pun">:</span><span class="pln"> </span><span class="typ">MinimalLogger</span><span class="pun">,</span><span class="pln">
      </span><span class="kwd">public</span><span class="pln"> heroOfTheMonth</span><span class="pun">:</span><span class="pln"> </span><span class="typ">Hero</span><span class="pun">,</span><span class="pln">
      </span><span class="lit">@</span><a href="api/core/Inject" class="code-anchor"><span class="lit">Inject</span></a><span class="pun">(</span><span class="pln">RUNNERS_UP</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">public</span><span class="pln"> runnersUp</span><span class="pun">:</span><span class="pln"> </span><span class="kwd">string</span><span class="pun">,</span><span class="pln">
      </span><span class="lit">@</span><a href="api/core/Inject" class="code-anchor"><span class="lit">Inject</span></a><span class="pun">(</span><span class="pln">TITLE</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">public</span><span class="pln"> title</span><span class="pun">:</span><span class="pln"> </span><span class="kwd">string</span><span class="pun">)</span><span class="pln">
  </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">logs </span><span class="pun">=</span><span class="pln"> logger</span><span class="pun">.</span><span class="pln">logs</span><span class="pun">;</span><span class="pln">
    logger</span><span class="pun">.</span><span class="pln">logInfo</span><span class="pun">(</span><span class="str">'starting up'</span><span class="pun">);</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code>
    </pre></aio-code></code-example><p translation-result="on"><code>providers</code> 数组展示了你可以如何使用其它的键来定义提供者：<code>useValue</code>、<code>useClass</code>、<code>useExisting</code> 或 <code>useFactory</code>。</p><p translation-origin="off">The <code>providers</code> array shows how you might use the different provider-definition keys; <code>useValue</code>, <code>useClass</code>, <code>useExisting</code>, or <code>useFactory</code>.</p><a id="usevalue"></a><h4 id="value-providers-usevalue" translation-result="on">值提供者：<code>useValue</code><a title="Link to this heading" class="header-link" aria-hidden="true" href="guide/dependency-injection-in-action#value-providers-usevalue"><i class="material-icons">link</i></a></h4><h4 translation-origin="off" id="value-providers-usevalue">Value providers: <code>useValue</code><a title="Link to this heading" class="header-link" aria-hidden="true" href="guide/dependency-injection-in-action#value-providers-usevalue"><i class="material-icons">link</i></a></h4><p translation-result="on"><code>useValue</code> 键让你可以为 DI 令牌关联一个固定的值。 使用该技巧来进行<em>运行期常量设置</em>，比如网站的基础地址和功能标志等。 你也可以在单元测试中使用<em>值提供者</em>，来用一个 Mock 数据来代替一个生产环境下的数据服务。</p><p translation-origin="off">The <code>useValue</code> key lets you associate a fixed value with a DI token. Use this technique to provide <em>runtime configuration constants</em> such as website base addresses and feature flags. You can also use a value provider in a unit test to provide mock data in place of a production data service.</p><p translation-result="on"><code>HeroOfTheMonthComponent</code> 例子中有两个<em>值-提供者</em>。</p><p translation-origin="off">The <code>HeroOfTheMonthComponent</code> example has two value providers.</p><code-example path="dependency-injection-in-action/src/app/hero-of-the-month.component.ts" region="use-value" header="dependency-injection-in-action/src/app/hero-of-the-month.component.ts" ng-version="10.0.0-rc.2"><div style="display:none">{ provide: Hero, useValue: someHero }, { provide: TITLE, useValue: 'Hero of the Month' },</div><header class="ng-star-inserted">dependency-injection-in-action/src/app/hero-of-the-month.component.ts</header><aio-code class="headed-code"><pre class="lang- prettyprint">      <button title="Copy code snippet" class="material-icons copy-button no-print ng-star-inserted" aria-label="Copy code snippet from dependency-injection-in-action/src/app/hero-of-the-month.component.ts">
        <span aria-hidden="true">content_copy</span>
      </button>
      <code class="animated fadeIn"><span class="pun">{</span><span class="pln"> provide</span><span class="pun">:</span><span class="pln"> </span><span class="typ">Hero</span><span class="pun">,</span><span class="pln">          useValue</span><span class="pun">:</span><span class="pln">    someHero </span><span class="pun">},</span><span class="pln">
</span><span class="pun">{</span><span class="pln"> provide</span><span class="pun">:</span><span class="pln"> TITLE</span><span class="pun">,</span><span class="pln">         useValue</span><span class="pun">:</span><span class="pln">   </span><span class="str">'Hero of the Month'</span><span class="pln"> </span><span class="pun">},</span></code>
    </pre></aio-code></code-example><ul><li><p translation-result="on">第一处提供了用于 <code>Hero</code> 令牌的 <code>Hero</code> 类的现有实例，而不是要求注入器使用 <code>new</code> 来创建一个新实例或使用它自己的缓存实例。这里令牌就是这个类本身。</p><p translation-origin="off">The first provides an existing instance of the <code>Hero</code> class to use for the <code>Hero</code> token, rather than requiring the injector to create a new instance with <code>new</code> or use its own cached instance. Here, the token is the class itself.</p></li><li><p translation-result="on">第二处为 <code>TITLE</code> 令牌指定了一个字符串字面量资源。 <code>TITLE</code> 提供者的令牌<em>不是一个类</em>，而是一个特别的提供者查询键，名叫<a href="guide/dependency-injection-in-action#injection-token">InjectionToken</a>，表示一个 <code><a href="api/core/InjectionToken" class="code-anchor">InjectionToken</a></code> 实例。</p><p translation-origin="off">The second specifies a literal string resource to use for the <code>TITLE</code> token. The <code>TITLE</code> provider token is <em>not</em> a class, but is instead a special kind of provider lookup key called an <a href="guide/dependency-injection-in-action#injection-token">injection token</a>, represented by an <code><a href="api/core/InjectionToken" class="code-anchor">InjectionToken</a></code> instance.</p></li></ul><p translation-result="on">你可以把 <code><a href="api/core/InjectionToken" class="code-anchor">InjectionToken</a></code> 用作任何类型的提供者的令牌，但是当依赖是简单类型（比如字符串、数字、函数）时，它会特别有用。</p><p translation-origin="off">You can use an injection token for any kind of provider but it's particularly helpful when the dependency is a simple value like a string, a number, or a function.</p><p translation-result="on">一个<em>值-提供者</em>的值必须在指定之前定义。 比如标题字符串就是立即可用的。 该例中的 <code>someHero</code> 变量是以前在如下的文件中定义的。 你不能使用那些要等以后才能定义其值的变量。</p><p translation-origin="off">The value of a <em>value provider</em> must be defined before you specify it here. The title string literal is immediately available. The <code>someHero</code> variable in this example was set earlier in the file as shown below. You can't use a variable whose value will be defined later.</p><code-example path="dependency-injection-in-action/src/app/hero-of-the-month.component.ts" region="some-hero" header="dependency-injection-in-action/src/app/hero-of-the-month.component.ts" ng-version="10.0.0-rc.2"><div style="display:none">const someHero = new Hero(42, 'Magma', 'Had a great month!', '555-555-5555');</div><header class="ng-star-inserted">dependency-injection-in-action/src/app/hero-of-the-month.component.ts</header><aio-code class="headed-code"><pre class="lang- prettyprint">      <button title="Copy code snippet" class="material-icons copy-button no-print ng-star-inserted" aria-label="Copy code snippet from dependency-injection-in-action/src/app/hero-of-the-month.component.ts">
        <span aria-hidden="true">content_copy</span>
      </button>
      <code class="animated fadeIn"><span class="kwd">const</span><span class="pln"> someHero </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Hero</span><span class="pun">(</span><span class="lit">42</span><span class="pun">,</span><span class="pln"> </span><span class="str">'Magma'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'Had a great month!'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'555-555-5555'</span><span class="pun">);</span></code>
    </pre></aio-code></code-example><p translation-result="on">其它类型的提供者都会<em>惰性创建</em>它们的值，也就是说只在需要注入它们的时候才创建。</p><p translation-origin="off">Other types of providers can create their values <em>lazily</em>; that is, when they're needed for injection.</p><a id="useclass"></a><h4 id="class-providers-useclass" translation-result="on">类提供者：<code>useClass</code><a title="Link to this heading" class="header-link" aria-hidden="true" href="guide/dependency-injection-in-action#class-providers-useclass"><i class="material-icons">link</i></a></h4><h4 translation-origin="off" id="class-providers-useclass">Class providers: <code>useClass</code><a title="Link to this heading" class="header-link" aria-hidden="true" href="guide/dependency-injection-in-action#class-providers-useclass"><i class="material-icons">link</i></a></h4><p translation-result="on"><code>useClass</code> 提供的键让你可以创建并返回指定类的新实例。</p><p translation-origin="off">The <code>useClass</code> provider key lets you create and return a new instance of the specified class.</p><p translation-result="on">你可以使用这类提供者来为公共类或默认类换上一个<em>替代实现</em>。比如，这个替代实现可以实现一种不同的策略来扩展默认类，或在测试环境中模拟真实类的行为。</p><p translation-origin="off">You can use this type of provider to substitute an <em>alternative implementation</em> for a common or default class. The alternative implementation could, for example, implement a different strategy, extend the default class, or emulate the behavior of the real class in a test case.</p><p translation-result="on">请看下面 <code>HeroOfTheMonthComponent</code> 里的两个例子：</p><p translation-origin="off">The following code shows two examples in <code>HeroOfTheMonthComponent</code>.</p><code-example path="dependency-injection-in-action/src/app/hero-of-the-month.component.ts" region="use-class" header="dependency-injection-in-action/src/app/hero-of-the-month.component.ts" ng-version="10.0.0-rc.2"><div style="display:none">{ provide: HeroService, useClass: HeroService }, { provide: LoggerService, useClass: DateLoggerService },</div><header class="ng-star-inserted">dependency-injection-in-action/src/app/hero-of-the-month.component.ts</header><aio-code class="headed-code"><pre class="lang- prettyprint">      <button title="Copy code snippet" class="material-icons copy-button no-print ng-star-inserted" aria-label="Copy code snippet from dependency-injection-in-action/src/app/hero-of-the-month.component.ts">
        <span aria-hidden="true">content_copy</span>
      </button>
      <code class="animated fadeIn"><span class="pun">{</span><span class="pln"> provide</span><span class="pun">:</span><span class="pln"> </span><span class="typ">HeroService</span><span class="pun">,</span><span class="pln">   useClass</span><span class="pun">:</span><span class="pln">    </span><span class="typ">HeroService</span><span class="pln"> </span><span class="pun">},</span><span class="pln">
</span><span class="pun">{</span><span class="pln"> provide</span><span class="pun">:</span><span class="pln"> </span><span class="typ">LoggerService</span><span class="pun">,</span><span class="pln"> useClass</span><span class="pun">:</span><span class="pln">    </span><span class="typ">DateLoggerService</span><span class="pln"> </span><span class="pun">},</span></code>
    </pre></aio-code></code-example><p translation-result="on">第一个提供者是<em>展开了语法糖的</em>，是一个典型情况的展开。一般来说，被新建的类(<code>HeroService</code>)同时也是该提供者的注入令牌。 通常都选用缩写形式，完整形式可以让细节更明确。</p><p translation-origin="off">The first provider is the <em>de-sugared</em>, expanded form of the most typical case in which the class to be created (<code>HeroService</code>) is also the provider's dependency injection token. The short form is generally preferred; this long form makes the details explicit.</p><p translation-result="on">第二个提供者使用 <code>DateLoggerService</code> 来满足 <code>LoggerService</code>。该 <code>LoggerService</code> 在 <code>AppComponent</code> 级别已经被注册。当<em>这个组件</em>要求 <code>LoggerService</code> 的时候，它得到的却是 <code>DateLoggerService</code> 服务的实例。</p><p translation-origin="off">The second provider substitutes <code>DateLoggerService</code> for <code>LoggerService</code>. <code>LoggerService</code> is already registered at the <code>AppComponent</code> level. When this child component requests <code>LoggerService</code>, it receives a <code>DateLoggerService</code> instance instead.</p><div class="alert is-helpful"><p translation-result="on">这个组件及其子组件会得到 <code>DateLoggerService</code> 实例。这个组件树之外的组件得到的仍是 <code>LoggerService</code> 实例。</p><p translation-origin="off">This component and its tree of child components receive <code>DateLoggerService</code> instance. Components outside the tree continue to receive the original <code>LoggerService</code> instance.</p></div><p translation-result="on"><code>DateLoggerService</code> 从 <code>LoggerService</code> 继承；它把当前的日期/时间附加到每条信息上。</p><p translation-origin="off"><code>DateLoggerService</code> inherits from <code>LoggerService</code>; it appends the current date/time to each message:</p><code-example path="dependency-injection-in-action/src/app/date-logger.service.ts" region="date-logger-service" header="src/app/date-logger.service.ts" ng-version="10.0.0-rc.2"><div style="display:none">@<a href="api/core/Injectable" class="code-anchor">Injectable</a>({ providedIn: 'root' }) export class DateLoggerService extends LoggerService { logInfo(msg: any) { super.logInfo(stamp(msg)); } logDebug(msg: any) { super.logInfo(stamp(msg)); } logError(msg: any) { super.logError(stamp(msg)); } } function stamp(msg: any) { return msg + ' at ' + new Date(); }</div><header class="ng-star-inserted">src/app/date-logger.service.ts</header><aio-code class="headed-code"><pre class="lang- prettyprint">      <button title="Copy code snippet" class="material-icons copy-button no-print ng-star-inserted" aria-label="Copy code snippet from src/app/date-logger.service.ts">
        <span aria-hidden="true">content_copy</span>
      </button>
      <code class="animated fadeIn"><span class="lit">@</span><a href="api/core/Injectable" class="code-anchor"><span class="lit">Injectable</span></a><span class="pun">({</span><span class="pln">
  providedIn</span><span class="pun">:</span><span class="pln"> </span><span class="str">'root'</span><span class="pln">
</span><span class="pun">})</span><span class="pln">
</span><span class="kwd">export</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">DateLoggerService</span><span class="pln"> </span><span class="kwd">extends</span><span class="pln"> </span><span class="typ">LoggerService</span><span class="pln">
</span><span class="pun">{</span><span class="pln">
  logInfo</span><span class="pun">(</span><span class="pln">msg</span><span class="pun">:</span><span class="pln"> any</span><span class="pun">)</span><span class="pln">  </span><span class="pun">{</span><span class="pln"> </span><span class="kwd">super</span><span class="pun">.</span><span class="pln">logInfo</span><span class="pun">(</span><span class="pln">stamp</span><span class="pun">(</span><span class="pln">msg</span><span class="pun">));</span><span class="pln"> </span><span class="pun">}</span><span class="pln">
  logDebug</span><span class="pun">(</span><span class="pln">msg</span><span class="pun">:</span><span class="pln"> any</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="kwd">super</span><span class="pun">.</span><span class="pln">logInfo</span><span class="pun">(</span><span class="pln">stamp</span><span class="pun">(</span><span class="pln">msg</span><span class="pun">));</span><span class="pln"> </span><span class="pun">}</span><span class="pln">
  logError</span><span class="pun">(</span><span class="pln">msg</span><span class="pun">:</span><span class="pln"> any</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="kwd">super</span><span class="pun">.</span><span class="pln">logError</span><span class="pun">(</span><span class="pln">stamp</span><span class="pun">(</span><span class="pln">msg</span><span class="pun">));</span><span class="pln"> </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span><span class="pln">

</span><span class="kwd">function</span><span class="pln"> stamp</span><span class="pun">(</span><span class="pln">msg</span><span class="pun">:</span><span class="pln"> any</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> msg </span><span class="pun">+</span><span class="pln"> </span><span class="str">' at '</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Date</span><span class="pun">();</span><span class="pln"> </span><span class="pun">}</span></code>
    </pre></aio-code></code-example><a id="useexisting"></a><h4 id="alias-providers-useexisting" translation-result="on">别名提供者：<code>useExisting</code><a title="Link to this heading" class="header-link" aria-hidden="true" href="guide/dependency-injection-in-action#alias-providers-useexisting"><i class="material-icons">link</i></a></h4><h4 translation-origin="off" id="alias-providers-useexisting">Alias providers: <code>useExisting</code><a title="Link to this heading" class="header-link" aria-hidden="true" href="guide/dependency-injection-in-action#alias-providers-useexisting"><i class="material-icons">link</i></a></h4><p translation-result="on"><code>useExisting</code> 提供了一个键，让你可以把一个令牌映射成另一个令牌。实际上，第一个令牌就是第二个令牌所关联的服务的<em>别名</em>，这样就创建了访问同一个服务对象的两种途径。</p><p translation-origin="off">The <code>useExisting</code> provider key lets you map one token to another. In effect, the first token is an <em>alias</em> for the service associated with the second token, creating two ways to access the same service object.</p><code-example path="dependency-injection-in-action/src/app/hero-of-the-month.component.ts" region="use-existing" header="dependency-injection-in-action/src/app/hero-of-the-month.component.ts" ng-version="10.0.0-rc.2"><div style="display:none">{ provide: MinimalLogger, useExisting: LoggerService },</div><header class="ng-star-inserted">dependency-injection-in-action/src/app/hero-of-the-month.component.ts</header><aio-code class="headed-code"><pre class="lang- prettyprint">      <button title="Copy code snippet" class="material-icons copy-button no-print ng-star-inserted" aria-label="Copy code snippet from dependency-injection-in-action/src/app/hero-of-the-month.component.ts">
        <span aria-hidden="true">content_copy</span>
      </button>
      <code class="animated fadeIn"><span class="pun">{</span><span class="pln"> provide</span><span class="pun">:</span><span class="pln"> </span><span class="typ">MinimalLogger</span><span class="pun">,</span><span class="pln"> useExisting</span><span class="pun">:</span><span class="pln"> </span><span class="typ">LoggerService</span><span class="pln"> </span><span class="pun">},</span></code>
    </pre></aio-code></code-example><p translation-result="on">你可以使用别名接口来窄化 API。下面的例子中使用别名就是为了这个目的。</p><p translation-origin="off">You can use this technique to narrow an API through an aliasing interface. The following example shows an alias introduced for that purpose.</p><p translation-result="on">想象 <code>LoggerService</code> 有个很大的 API 接口，远超过现有的三个方法和一个属性。你可能希望把 API 接口收窄到只有两个你确实需要的成员。在这个例子中，<code>MinimalLogger</code><a href="guide/dependency-injection-in-action#class-interface"><em>类-接口</em></a>，就这个 API 成功缩小到了只有两个成员：</p><p translation-origin="off">Imagine that <code>LoggerService</code> had a large API, much larger than the actual three methods and a property. You might want to shrink that API surface to just the members you actually need. In this example, the <code>MinimalLogger</code> <a href="guide/dependency-injection-in-action#class-interface">class-interface</a> reduces the API to two members:</p><code-example path="dependency-injection-in-action/src/app/minimal-logger.service.ts" header="src/app/minimal-logger.service.ts" ng-version="10.0.0-rc.2"><div style="display:none">// Class used as a "narrowing" interface that exposes a minimal logger // Other members of the actual implementation are invisible export abstract class MinimalLogger { logs: string[]; logInfo: (msg: string) =&gt; void; }</div><header class="ng-star-inserted">src/app/minimal-logger.service.ts</header><aio-code class="headed-code"><pre class="lang- prettyprint">      <button title="Copy code snippet" class="material-icons copy-button no-print ng-star-inserted" aria-label="Copy code snippet from src/app/minimal-logger.service.ts">
        <span aria-hidden="true">content_copy</span>
      </button>
      <code class="animated fadeIn"><span class="com">// Class used as a "narrowing" interface that exposes a minimal logger</span><span class="pln">
</span><span class="com">// Other members of the actual implementation are invisible</span><span class="pln">
</span><span class="kwd">export</span><span class="pln"> </span><span class="kwd">abstract</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">MinimalLogger</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  logs</span><span class="pun">:</span><span class="pln"> </span><span class="kwd">string</span><span class="pun">[];</span><span class="pln">
  logInfo</span><span class="pun">:</span><span class="pln"> </span><span class="pun">(</span><span class="pln">msg</span><span class="pun">:</span><span class="pln"> </span><span class="kwd">string</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="kwd">void</span><span class="pun">;</span><span class="pln">
</span><span class="pun">}</span></code>
    </pre></aio-code></code-example><p translation-result="on">下面的例子在一个简化版的 <code>HeroOfTheMonthComponent</code> 中使用 <code>MinimalLogger</code>。</p><p translation-origin="off">The following example puts <code>MinimalLogger</code> to use in a simplified version of <code>HeroOfTheMonthComponent</code>.</p><code-example path="dependency-injection-in-action/src/app/hero-of-the-month.component.1.ts" header="src/app/hero-of-the-month.component.ts (minimal version)" ng-version="10.0.0-rc.2"><div style="display:none">@<a href="api/core/Component" class="code-anchor">Component</a>({ selector: 'app-hero-of-the-month', templateUrl: './hero-of-the-month.component.html', // TODO: move this aliasing, `useExisting` provider to the AppModule providers: [{ provide: MinimalLogger, useExisting: LoggerService }] }) export class HeroOfTheMonthComponent { logs: string[] = []; constructor(logger: MinimalLogger) { logger.logInfo('starting up'); } }</div><header class="ng-star-inserted">src/app/hero-of-the-month.component.ts (minimal version)</header><aio-code class="headed-code"><pre class="lang- prettyprint">      <button title="Copy code snippet" class="material-icons copy-button no-print ng-star-inserted" aria-label="Copy code snippet from src/app/hero-of-the-month.component.ts (minimal version)">
        <span aria-hidden="true">content_copy</span>
      </button>
      <code class="animated fadeIn"><span class="lit">@</span><a href="api/core/Component" class="code-anchor"><span class="lit">Component</span></a><span class="pun">({</span><span class="pln">
  selector</span><span class="pun">:</span><span class="pln"> </span><span class="str">'app-hero-of-the-month'</span><span class="pun">,</span><span class="pln">
  templateUrl</span><span class="pun">:</span><span class="pln"> </span><span class="str">'./hero-of-the-month.component.html'</span><span class="pun">,</span><span class="pln">
  </span><span class="com">// TODO: move this aliasing, `useExisting` provider to the AppModule</span><span class="pln">
  providers</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[{</span><span class="pln"> provide</span><span class="pun">:</span><span class="pln"> </span><span class="typ">MinimalLogger</span><span class="pun">,</span><span class="pln"> useExisting</span><span class="pun">:</span><span class="pln"> </span><span class="typ">LoggerService</span><span class="pln"> </span><span class="pun">}]</span><span class="pln">
</span><span class="pun">})</span><span class="pln">
</span><span class="kwd">export</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">HeroOfTheMonthComponent</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  logs</span><span class="pun">:</span><span class="pln"> </span><span class="kwd">string</span><span class="pun">[]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[];</span><span class="pln">
  </span><span class="kwd">constructor</span><span class="pun">(</span><span class="pln">logger</span><span class="pun">:</span><span class="pln"> </span><span class="typ">MinimalLogger</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    logger</span><span class="pun">.</span><span class="pln">logInfo</span><span class="pun">(</span><span class="str">'starting up'</span><span class="pun">);</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code>
    </pre></aio-code></code-example><p translation-result="on"><code>HeroOfTheMonthComponent</code> 构造函数的 <code>logger</code> 参数是一个 <code>MinimalLogger</code> 类型，在支持 TypeScript 感知的编辑器里，只能看到它的两个成员 <code>logs</code> 和 <code>logInfo</code>：</p><p translation-origin="off">The <code>HeroOfTheMonthComponent</code> constructor's <code>logger</code> parameter is typed as <code>MinimalLogger</code>, so only the <code>logs</code> and <code>logInfo</code> members are visible in a TypeScript-aware editor.</p><div class="lightbox"><img src="generated/images/guide/dependency-injection-in-action/minimal-logger-intellisense.png" alt="MinimalLogger restricted API" width="532" height="60"></div><p translation-result="on">实际上，Angular 把 <code>logger</code> 参数设置为注入器里 <code>LoggerService</code> 令牌下注册的完整服务，该令牌恰好是<a href="guide/dependency-injection-in-action#useclass">以前提供的那个</a> <code>DateLoggerService</code> 实例。</p><p translation-origin="off">Behind the scenes, Angular sets the <code>logger</code> parameter to the full service registered under the <code>LoggingService</code> token, which happens to be the <code>DateLoggerService</code> instance that was <a href="guide/dependency-injection-in-action#useclass">provided above</a>.</p><div class="alert is-helpful"><p translation-result="on">在下面的图片中，显示了日志日期，可以确认这一点：</p><p translation-origin="off">This is illustrated in the following image, which displays the logging date.</p><div class="lightbox"><img src="generated/images/guide/dependency-injection-in-action/date-logger-entry.png" alt="DateLoggerService entry" width="300" height="32"></div></div><a id="usefactory"></a><h4 id="factory-providers-usefactory" translation-result="on">工厂提供者：<code>useFactory</code><a title="Link to this heading" class="header-link" aria-hidden="true" href="guide/dependency-injection-in-action#factory-providers-usefactory"><i class="material-icons">link</i></a></h4><h4 translation-origin="off" id="factory-providers-usefactory">Factory providers: <code>useFactory</code><a title="Link to this heading" class="header-link" aria-hidden="true" href="guide/dependency-injection-in-action#factory-providers-usefactory"><i class="material-icons">link</i></a></h4><p translation-result="on"><code>useFactory</code> 提供了一个键，让你可以通过调用一个工厂函数来创建依赖实例，如下面的例子所示。</p><p translation-origin="off">The <code>useFactory</code> provider key lets you create a dependency object by calling a factory function, as in the following example.</p><code-example path="dependency-injection-in-action/src/app/hero-of-the-month.component.ts" region="use-factory" header="dependency-injection-in-action/src/app/hero-of-the-month.component.ts" ng-version="10.0.0-rc.2"><div style="display:none">{ provide: RUNNERS_UP, useFactory: runnersUpFactory(2), deps: [Hero, HeroService] }</div><header class="ng-star-inserted">dependency-injection-in-action/src/app/hero-of-the-month.component.ts</header><aio-code class="headed-code"><pre class="lang- prettyprint">      <button title="Copy code snippet" class="material-icons copy-button no-print ng-star-inserted" aria-label="Copy code snippet from dependency-injection-in-action/src/app/hero-of-the-month.component.ts">
        <span aria-hidden="true">content_copy</span>
      </button>
      <code class="animated fadeIn"><span class="pun">{</span><span class="pln"> provide</span><span class="pun">:</span><span class="pln"> RUNNERS_UP</span><span class="pun">,</span><span class="pln">    useFactory</span><span class="pun">:</span><span class="pln">  runnersUpFactory</span><span class="pun">(</span><span class="lit">2</span><span class="pun">),</span><span class="pln"> deps</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span><span class="typ">Hero</span><span class="pun">,</span><span class="pln"> </span><span class="typ">HeroService</span><span class="pun">]</span><span class="pln"> </span><span class="pun">}</span></code>
    </pre></aio-code></code-example><p translation-result="on">注入器通过调用你用 <code>useFactory</code> 键指定的工厂函数来提供该依赖的值。 注意，提供者的这种形态还有第三个键 <code>deps</code>，它指定了供 <code>useFactory</code> 函数使用的那些依赖。</p><p translation-origin="off">The injector provides the dependency value by invoking a factory function, that you provide as the value of the <code>useFactory</code> key. Notice that this form of provider has a third key, <code>deps</code>, which specifies dependencies for the <code>useFactory</code> function.</p><p translation-result="on">使用这项技术，可以用包含了一些<strong><em>依赖服务和本地状态</em></strong>输入的工厂函数来<strong><em>建立一个依赖对象</em></strong>。</p><p translation-origin="off">Use this technique to create a dependency object with a factory function whose inputs are a combination of <em>injected services</em> and <em>local state</em>.</p><p translation-result="on">这个依赖对象（由工厂函数返回的）通常是一个类实例，不过也可以是任何其它东西。 在这个例子中，依赖对象是一个表示 "月度英雄" 参赛者名称的字符串。</p><p translation-origin="off">The dependency object (returned by the factory function) is typically a class instance, but can be other things as well. In this example, the dependency object is a string of the names of the runners up to the "Hero of the Month" contest.</p><p translation-result="on">在这个例子中，局部状态是数字 <code>2</code>，也就是组件应该显示的参赛者数量。 该状态的值传给了 <code>runnersUpFactory()</code> 作为参数。 <code>runnersUpFactory()</code> 返回了<em>提供者的工厂函数</em>，它可以使用传入的状态值和注入的服务 <code>Hero</code> 和 <code>HeroService</code>。</p><p translation-origin="off">In the example, the local state is the number <code>2</code>, the number of runners up that the component should show. The state value is passed as an argument to <code>runnersUpFactory()</code>. The <code>runnersUpFactory()</code> returns the <em>provider factory function</em>, which can use both the passed-in state value and the injected services <code>Hero</code> and <code>HeroService</code>.</p><code-example path="dependency-injection-in-action/src/app/runners-up.ts" region="factory-synopsis" header="runners-up.ts (excerpt)" ng-version="10.0.0-rc.2"><div style="display:none">export function runnersUpFactory(take: number) { return (winner: Hero, heroService: HeroService): string =&gt; { /* ... */ }; };</div><header class="ng-star-inserted">runners-up.ts (excerpt)</header><aio-code class="headed-code"><pre class="lang- prettyprint">      <button title="Copy code snippet" class="material-icons copy-button no-print ng-star-inserted" aria-label="Copy code snippet from runners-up.ts (excerpt)">
        <span aria-hidden="true">content_copy</span>
      </button>
      <code class="animated fadeIn"><span class="kwd">export</span><span class="pln"> </span><span class="kwd">function</span><span class="pln"> runnersUpFactory</span><span class="pun">(</span><span class="pln">take</span><span class="pun">:</span><span class="pln"> number</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">(</span><span class="pln">winner</span><span class="pun">:</span><span class="pln"> </span><span class="typ">Hero</span><span class="pun">,</span><span class="pln"> heroService</span><span class="pun">:</span><span class="pln"> </span><span class="typ">HeroService</span><span class="pun">):</span><span class="pln"> </span><span class="kwd">string</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="com">/* ... */</span><span class="pln">
  </span><span class="pun">};</span><span class="pln">
</span><span class="pun">};</span></code>
    </pre></aio-code></code-example><p translation-result="on">由 <code>runnersUpFactory()</code> 返回的提供者的工厂函数返回了实际的依赖对象，也就是表示名字的字符串。</p><p translation-origin="off">The provider factory function (returned by <code>runnersUpFactory()</code>) returns the actual dependency object, the string of names.</p><ul><li><p translation-result="on">这个返回的函数需要一个 <code>Hero</code> 和一个 <code>HeroService</code> 参数。</p><p translation-origin="off">The function takes a winning <code>Hero</code> and a <code>HeroService</code> as arguments.</p></li></ul><p translation-result="on">Angular 根据 <code>deps</code> 数组中指定的两个<em>令牌</em>来提供这些注入参数。</p><p translation-origin="off">Angular supplies these arguments from injected values identified by the two <em>tokens</em> in the <code>deps</code> array.</p><ul><li><p translation-result="on">该函数返回名字的字符串，Angular 可以把它们注入到 <code>HeroOfTheMonthComponent</code> 的 <code>runnersUp</code> 参数中。</p><p translation-origin="off">The function returns the string of names, which Angular than injects into the <code>runnersUp</code> parameter of <code>HeroOfTheMonthComponent</code>.</p></li></ul><div class="alert is-helpful"><p translation-result="on">该函数从 <code>HeroService</code> 中接受候选的英雄，从中取 <code>2</code> 个参加竞赛，并把他们的名字串接起来返回。 参见<live-example name="dependency-injection-in-action" ng-version="10.0.0-rc.2"><span style="display:none"></span><span><span class="ng-star-inserted"><a target="_blank" title="现场演练" href="generated/live-examples/dependency-injection-in-action/stackblitz.html">现场演练</a><span class="ng-star-inserted"> / <a download="" title="下载范例" href="generated/zips/dependency-injection-in-action/dependency-injection-in-action.zip">下载范例</a></span></span></span></live-example>查看完整源码。</p><p translation-origin="off">The function retrieves candidate heroes from the <code>HeroService</code>, takes <code>2</code> of them to be the runners-up, and returns their concatenated names. Look at the<live-example name="dependency-injection-in-action" ng-version="10.0.0-rc.2"><span style="display:none"></span><span><span class="ng-star-inserted"><a target="_blank" title="现场演练" href="generated/live-examples/dependency-injection-in-action/stackblitz.html">现场演练</a><span class="ng-star-inserted"> / <a download="" title="下载范例" href="generated/zips/dependency-injection-in-action/dependency-injection-in-action.zip">下载范例</a></span></span></span></live-example>for the full source code.</p></div><a id="tokens"></a><h2 id="provider-token-alternatives-class-interface-and-injectiontoken" translation-result="on">提供替代令牌：类接口与 'InjectionToken'<a title="Link to this heading" class="header-link" aria-hidden="true" href="guide/dependency-injection-in-action#provider-token-alternatives-class-interface-and-injectiontoken"><i class="material-icons">link</i></a></h2><h2 translation-origin="off" id="provider-token-alternatives-class-interface-and-injectiontoken">Provider token alternatives: class interface and 'InjectionToken'<a title="Link to this heading" class="header-link" aria-hidden="true" href="guide/dependency-injection-in-action#provider-token-alternatives-class-interface-and-injectiontoken"><i class="material-icons">link</i></a></h2><p translation-result="on">当使用类作为令牌，同时也把它作为返回依赖对象或服务的类型时，Angular 依赖注入使用起来最容易。</p><p translation-origin="off">Angular dependency injection is easiest when the provider token is a class that is also the type of the returned dependency object, or service.</p><p translation-result="on">但令牌不一定都是类，就算它是一个类，它也不一定都返回类型相同的对象。这是下一节的主题。</p><p translation-origin="off">However, a token doesn't have to be a class and even when it is a class, it doesn't have to be the same type as the returned object. That's the subject of the next section.</p><a id="class-interface"></a><h3 id="classinterface" translation-result="on">类-接口<a title="Link to this heading" class="header-link" aria-hidden="true" href="guide/dependency-injection-in-action#classinterface"><i class="material-icons">link</i></a></h3><h3 translation-origin="off" id="classinterface">Classinterface<a title="Link to this heading" class="header-link" aria-hidden="true" href="guide/dependency-injection-in-action#classinterface"><i class="material-icons">link</i></a></h3><p translation-result="on">前面的<em>月度英雄</em>的例子使用了 <code>MinimalLogger</code> 类作为 <code>LoggerService</code> 提供者的令牌。</p><p translation-origin="off">The previous <em>Hero of the Month</em> example used the <code>MinimalLogger</code> class as the token for a provider of <code>LoggerService</code>.</p><code-example path="dependency-injection-in-action/src/app/hero-of-the-month.component.ts" region="use-existing" header="dependency-injection-in-action/src/app/hero-of-the-month.component.ts" ng-version="10.0.0-rc.2"><div style="display:none">{ provide: MinimalLogger, useExisting: LoggerService },</div><header class="ng-star-inserted">dependency-injection-in-action/src/app/hero-of-the-month.component.ts</header><aio-code class="headed-code"><pre class="lang- prettyprint">      <button title="Copy code snippet" class="material-icons copy-button no-print ng-star-inserted" aria-label="Copy code snippet from dependency-injection-in-action/src/app/hero-of-the-month.component.ts">
        <span aria-hidden="true">content_copy</span>
      </button>
      <code class="animated fadeIn"><span class="pun">{</span><span class="pln"> provide</span><span class="pun">:</span><span class="pln"> </span><span class="typ">MinimalLogger</span><span class="pun">,</span><span class="pln"> useExisting</span><span class="pun">:</span><span class="pln"> </span><span class="typ">LoggerService</span><span class="pln"> </span><span class="pun">},</span></code>
    </pre></aio-code></code-example><p translation-result="on">该 <code>MinimalLogger</code> 是一个抽象类。</p><p translation-origin="off"><code>MinimalLogger</code> is an abstract class.</p><code-example path="dependency-injection-in-action/src/app/minimal-logger.service.ts" header="dependency-injection-in-action/src/app/minimal-logger.service.ts" ng-version="10.0.0-rc.2"><div style="display:none">// Class used as a "narrowing" interface that exposes a minimal logger // Other members of the actual implementation are invisible export abstract class MinimalLogger { logs: string[]; logInfo: (msg: string) =&gt; void; }</div><header class="ng-star-inserted">dependency-injection-in-action/src/app/minimal-logger.service.ts</header><aio-code class="headed-code"><pre class="lang- prettyprint">      <button title="Copy code snippet" class="material-icons copy-button no-print ng-star-inserted" aria-label="Copy code snippet from dependency-injection-in-action/src/app/minimal-logger.service.ts">
        <span aria-hidden="true">content_copy</span>
      </button>
      <code class="animated fadeIn"><span class="com">// Class used as a "narrowing" interface that exposes a minimal logger</span><span class="pln">
</span><span class="com">// Other members of the actual implementation are invisible</span><span class="pln">
</span><span class="kwd">export</span><span class="pln"> </span><span class="kwd">abstract</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">MinimalLogger</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  logs</span><span class="pun">:</span><span class="pln"> </span><span class="kwd">string</span><span class="pun">[];</span><span class="pln">
  logInfo</span><span class="pun">:</span><span class="pln"> </span><span class="pun">(</span><span class="pln">msg</span><span class="pun">:</span><span class="pln"> </span><span class="kwd">string</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="kwd">void</span><span class="pun">;</span><span class="pln">
</span><span class="pun">}</span></code>
    </pre></aio-code></code-example><p translation-result="on">你通常从一个可扩展的抽象类继承。但这个应用中<em>并没有</em>类会继承 <code>MinimalLogger</code>。</p><p translation-origin="off">An abstract class is usually a base class that you can extend. In this app, however there is no class that inherits from <code>MinimalLogger</code>.</p><p translation-result="on"><code>LoggerService</code> 和 <code>DateLoggerService</code><em>本可以</em>从 <code>MinimalLogger</code> 中继承。 它们也可以实现 <code>MinimalLogger</code>，而不用单独定义接口。 但它们没有。 <code>MinimalLogger</code> 在这里仅仅被用作一个 "依赖注入令牌"。</p><p translation-origin="off">The <code>LoggerService</code> and the <code>DateLoggerService</code> could have inherited from <code>MinimalLogger</code>, or they could have implemented it instead, in the manner of an interface. But they did neither. <code>MinimalLogger</code> is used only as a dependency injection token.</p><p translation-result="on">当你通过这种方式使用类时，它称作<em>类接口</em>。</p><p translation-origin="off">When you use a class this way, it's called a <em>class interface</em>.</p><p translation-result="on">就像 <a href="guide/dependency-injection-providers#interface-not-valid-token">DI 提供者</a>中提到的那样，接口不是有效的 DI 令牌，因为它是 TypeScript 自己用的，在运行期间不存在。使用这种抽象类接口不但可以获得像接口一样的强类型，而且可以像普通类一样把它用作提供者令牌。</p><p translation-origin="off">As mentioned in <a href="guide/dependency-injection-providers#interface-not-valid-token">DI Providers</a>, an interface is not a valid DI token because it is a TypeScript artifact that doesn't exist at run time. Use this abstract class interface to get the strong typing of an interface, and also use it as a provider token in the way you would a normal class.</p><p translation-result="on">类接口应该<em>只</em>定义允许它的消费者调用的成员。窄的接口有助于解耦该类的具体实现和它的消费者。</p><p translation-origin="off">A class interface should define <em>only</em> the members that its consumers are allowed to call. Such a narrowing interface helps decouple the concrete class from its consumers.</p><div class="alert is-helpful"><p translation-result="on">用类作为接口可以让你获得真实 JavaScript 对象中的接口的特性。 但是，为了最小化内存开销，该类应该是<em>没有实现</em>的。 对于构造函数，<code>MinimalLogger</code> 会转译成未优化过的、预先最小化过的 JavaScript。</p><p translation-origin="off">Using a class as an interface gives you the characteristics of an interface in a real JavaScript object. To minimize memory cost, however, the class should have <em>no implementation</em>. The <code>MinimalLogger</code> transpiles to this unoptimized, pre-minified JavaScript for a constructor function.</p><code-example path="dependency-injection-in-action/src/app/minimal-logger.service.ts" region="minimal-logger-transpiled" header="dependency-injection-in-action/src/app/minimal-logger.service.ts" ng-version="10.0.0-rc.2"><div style="display:none">var MinimalLogger = (function () { function MinimalLogger() {} return MinimalLogger; }()); exports("MinimalLogger", MinimalLogger);</div><header class="ng-star-inserted">dependency-injection-in-action/src/app/minimal-logger.service.ts</header><aio-code class="headed-code"><pre class="lang- prettyprint">      <button title="Copy code snippet" class="material-icons copy-button no-print ng-star-inserted" aria-label="Copy code snippet from dependency-injection-in-action/src/app/minimal-logger.service.ts">
        <span aria-hidden="true">content_copy</span>
      </button>
      <code class="animated fadeIn"><span class="kwd">var</span><span class="pln"> </span><span class="typ">MinimalLogger</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">function</span><span class="pln"> </span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  </span><span class="kwd">function</span><span class="pln"> </span><span class="typ">MinimalLogger</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{}</span><span class="pln">
  </span><span class="kwd">return</span><span class="pln"> </span><span class="typ">MinimalLogger</span><span class="pun">;</span><span class="pln">
</span><span class="pun">}());</span><span class="pln">
exports</span><span class="pun">(</span><span class="str">"MinimalLogger"</span><span class="pun">,</span><span class="pln"> </span><span class="typ">MinimalLogger</span><span class="pun">);</span></code>
    </pre></aio-code></code-example><p translation-result="on">注意，<strong><em>只要不实现它</em></strong>，不管添加多少成员，它都不会增长大小，因为这些成员虽然是有类型的，但却没有实现。</p><p translation-origin="off">Notice that it doesn't have any members. It never grows no matter how many members you add to the class, as long as those members are typed but not implemented.</p><p translation-result="on">你可以再看看 TypeScript 的 <code>MinimalLogger</code> 类，确定一下它是没有实现的。</p><p translation-origin="off">Look again at the TypeScript <code>MinimalLogger</code> class to confirm that it has no implementation.</p></div><a id="injection-token"></a><h3 id="injectiontoken-objects" translation-result="on">'InjectionToken' 对象<a title="Link to this heading" class="header-link" aria-hidden="true" href="guide/dependency-injection-in-action#injectiontoken-objects"><i class="material-icons">link</i></a></h3><h3 translation-origin="off" id="injectiontoken-objects">'InjectionToken' objects<a title="Link to this heading" class="header-link" aria-hidden="true" href="guide/dependency-injection-in-action#injectiontoken-objects"><i class="material-icons">link</i></a></h3><p translation-result="on">依赖对象可以是一个简单的值，比如日期，数字和字符串，或者一个无形的对象，比如数组和函数。</p><p translation-origin="off">Dependency objects can be simple values like dates, numbers and strings, or shapeless objects like arrays and functions.</p><p translation-result="on">这样的对象没有应用程序接口，所以不能用一个类来表示。更适合表示它们的是：唯一的和符号性的令牌，一个 JavaScript 对象，拥有一个友好的名字，但不会与其它的同名令牌发生冲突。</p><p translation-origin="off">Such objects don't have application interfaces and therefore aren't well represented by a class. They're better represented by a token that is both unique and symbolic, a JavaScript object that has a friendly name but won't conflict with another token that happens to have the same name.</p><p translation-result="on"><code><a href="api/core/InjectionToken" class="code-anchor">InjectionToken</a></code> 具有这些特征。在<em>Hero of the Month</em>例子中遇见它们两次，一个是 <em>title</em> 的值，一个是 <em>runnersUp</em> 工厂提供者。</p><p translation-origin="off"><code><a href="api/core/InjectionToken" class="code-anchor">InjectionToken</a></code> has these characteristics. You encountered them twice in the <em>Hero of the Month</em> example, in the <em>title</em> value provider and in the <em>runnersUp</em> factory provider.</p><code-example path="dependency-injection-in-action/src/app/hero-of-the-month.component.ts" region="provide-injection-token" header="dependency-injection-in-action/src/app/hero-of-the-month.component.ts" ng-version="10.0.0-rc.2"><div style="display:none">{ provide: TITLE, useValue: 'Hero of the Month' }, { provide: RUNNERS_UP, useFactory: runnersUpFactory(2), deps: [Hero, HeroService] }</div><header class="ng-star-inserted">dependency-injection-in-action/src/app/hero-of-the-month.component.ts</header><aio-code class="headed-code"><pre class="lang- prettyprint">      <button title="Copy code snippet" class="material-icons copy-button no-print ng-star-inserted" aria-label="Copy code snippet from dependency-injection-in-action/src/app/hero-of-the-month.component.ts">
        <span aria-hidden="true">content_copy</span>
      </button>
      <code class="animated fadeIn"><span class="pun">{</span><span class="pln"> provide</span><span class="pun">:</span><span class="pln"> TITLE</span><span class="pun">,</span><span class="pln">         useValue</span><span class="pun">:</span><span class="pln">   </span><span class="str">'Hero of the Month'</span><span class="pln"> </span><span class="pun">},</span><span class="pln">
</span><span class="pun">{</span><span class="pln"> provide</span><span class="pun">:</span><span class="pln"> RUNNERS_UP</span><span class="pun">,</span><span class="pln">    useFactory</span><span class="pun">:</span><span class="pln">  runnersUpFactory</span><span class="pun">(</span><span class="lit">2</span><span class="pun">),</span><span class="pln"> deps</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span><span class="typ">Hero</span><span class="pun">,</span><span class="pln"> </span><span class="typ">HeroService</span><span class="pun">]</span><span class="pln"> </span><span class="pun">}</span></code>
    </pre></aio-code></code-example><p translation-result="on">这样创建 <code>TITLE</code> 令牌：</p><p translation-origin="off">You created the <code>TITLE</code> token like this:</p><code-example path="dependency-injection-in-action/src/app/hero-of-the-month.component.ts" region="injection-token" header="dependency-injection-in-action/src/app/hero-of-the-month.component.ts" ng-version="10.0.0-rc.2"><div style="display:none">import { <a href="api/core/InjectionToken" class="code-anchor">InjectionToken</a> } from '@angular/core'; export const TITLE = new <a href="api/core/InjectionToken" class="code-anchor">InjectionToken</a>&lt;string&gt;('title');</div><header class="ng-star-inserted">dependency-injection-in-action/src/app/hero-of-the-month.component.ts</header><aio-code class="headed-code"><pre class="lang- prettyprint">      <button title="Copy code snippet" class="material-icons copy-button no-print ng-star-inserted" aria-label="Copy code snippet from dependency-injection-in-action/src/app/hero-of-the-month.component.ts">
        <span aria-hidden="true">content_copy</span>
      </button>
      <code class="animated fadeIn"><span class="kwd">import</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><a href="api/core/InjectionToken" class="code-anchor"><span class="typ">InjectionToken</span></a><span class="pln"> </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">from</span><span class="pln"> </span><span class="str">'@angular/core'</span><span class="pun">;</span><span class="pln">

</span><span class="kwd">export</span><span class="pln"> </span><span class="kwd">const</span><span class="pln"> TITLE </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><a href="api/core/InjectionToken" class="code-anchor"><span class="typ">InjectionToken</span></a><span class="str">&lt;string&gt;</span><span class="pun">(</span><span class="str">'title'</span><span class="pun">);</span></code>
    </pre></aio-code></code-example><p translation-result="on">类型参数，虽然是可选的，但可以向开发者和开发工具传达类型信息。 而且这个令牌的描述信息也可以为开发者提供帮助。</p><p translation-origin="off">The type parameter, while optional, conveys the dependency's type to developers and tooling. The token description is another developer aid.</p><a id="di-inheritance"></a><h2 id="inject-into-a-derived-class" translation-result="on">注入到派生类<a title="Link to this heading" class="header-link" aria-hidden="true" href="guide/dependency-injection-in-action#inject-into-a-derived-class"><i class="material-icons">link</i></a></h2><h2 translation-origin="off" id="inject-into-a-derived-class">Inject into a derived class<a title="Link to this heading" class="header-link" aria-hidden="true" href="guide/dependency-injection-in-action#inject-into-a-derived-class"><i class="material-icons">link</i></a></h2><p translation-result="on">当编写一个继承自另一个组件的组件时，要格外小心。如果基础组件有依赖注入，必须要在派生类中重新提供和重新注入它们，并将它们通过构造函数传给基类。</p><p translation-origin="off">Take care when writing a component that inherits from another component. If the base component has injected dependencies, you must re-provide and re-inject them in the derived class and then pass them down to the base class through the constructor.</p><p translation-result="on">在这个刻意生成的例子里，<code>SortedHeroesComponent</code> 继承自 <code>HeroesBaseComponent</code>，显示一个<em>被排序</em>的英雄列表。</p><p translation-origin="off">In this contrived example, <code>SortedHeroesComponent</code> inherits from <code>HeroesBaseComponent</code> to display a <em>sorted</em> list of heroes.</p><div class="lightbox"><img src="generated/images/guide/dependency-injection-in-action/sorted-heroes.png" alt="Sorted Heroes" width="135" height="107"></div><p translation-result="on"><code>HeroesBaseComponent</code> 能自己独立运行。它在自己的实例里要求 <code>HeroService</code>，用来得到英雄，并将他们按照数据库返回的顺序显示出来。</p><p translation-origin="off">The <code>HeroesBaseComponent</code> can stand on its own. It demands its own instance of <code>HeroService</code> to get heroes and displays them in the order they arrive from the database.</p><code-example path="dependency-injection-in-action/src/app/sorted-heroes.component.ts" region="heroes-base" header="src/app/sorted-heroes.component.ts (HeroesBaseComponent)" ng-version="10.0.0-rc.2"><div style="display:none">@<a href="api/core/Component" class="code-anchor">Component</a>({ selector: 'app-unsorted-heroes', template: `&lt;div *<a href="api/common/NgForOf" class="code-anchor">ngFor</a>="let hero of heroes"&gt;{{hero.name}}&lt;/div&gt;`, providers: [HeroService] }) export class HeroesBaseComponent implements <a href="api/core/OnInit" class="code-anchor">OnInit</a> { constructor(private heroService: HeroService) { } heroes: Array&lt;Hero&gt;; ngOnInit() { this.heroes = this.heroService.getAllHeroes(); this.afterGetHeroes(); } // Post-process heroes in derived class override. protected afterGetHeroes() {} }</div><header class="ng-star-inserted">src/app/sorted-heroes.component.ts (HeroesBaseComponent)</header><aio-code class="headed-code"><pre class="lang- prettyprint">      <button title="Copy code snippet" class="material-icons copy-button no-print ng-star-inserted" aria-label="Copy code snippet from src/app/sorted-heroes.component.ts (HeroesBaseComponent)">
        <span aria-hidden="true">content_copy</span>
      </button>
      <code class="animated fadeIn"><span class="lit">@</span><a href="api/core/Component" class="code-anchor"><span class="lit">Component</span></a><span class="pun">({</span><span class="pln">
  selector</span><span class="pun">:</span><span class="pln"> </span><span class="str">'app-unsorted-heroes'</span><span class="pun">,</span><span class="pln">
  </span><span class="kwd">template</span><span class="pun">:</span><span class="pln"> </span><span class="str">`&lt;div *</span><a href="api/common/NgForOf" class="code-anchor"><span class="str">ngFor</span></a><span class="str">="let hero of heroes"&gt;{{hero.name}}&lt;/div&gt;`</span><span class="pun">,</span><span class="pln">
  providers</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span><span class="typ">HeroService</span><span class="pun">]</span><span class="pln">
</span><span class="pun">})</span><span class="pln">
</span><span class="kwd">export</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">HeroesBaseComponent</span><span class="pln"> </span><span class="kwd">implements</span><span class="pln"> </span><a href="api/core/OnInit" class="code-anchor"><span class="typ">OnInit</span></a><span class="pln"> </span><span class="pun">{</span><span class="pln">
  </span><span class="kwd">constructor</span><span class="pun">(</span><span class="kwd">private</span><span class="pln"> heroService</span><span class="pun">:</span><span class="pln"> </span><span class="typ">HeroService</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln"> </span><span class="pun">}</span><span class="pln">

  heroes</span><span class="pun">:</span><span class="pln"> </span><span class="typ">Array</span><span class="pun">&lt;</span><span class="typ">Hero</span><span class="pun">&gt;;</span><span class="pln">

  ngOnInit</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">heroes </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">heroService</span><span class="pun">.</span><span class="pln">getAllHeroes</span><span class="pun">();</span><span class="pln">
    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">afterGetHeroes</span><span class="pun">();</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">

  </span><span class="com">// Post-process heroes in derived class override.</span><span class="pln">
  </span><span class="kwd">protected</span><span class="pln"> afterGetHeroes</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{}</span><span class="pln">

</span><span class="pun">}</span></code>
    </pre></aio-code></code-example><div class="alert is-helpful"><h3 id="keep-constructors-simple" translation-result="on">让构造函数保持简单<a title="Link to this heading" class="header-link" aria-hidden="true" href="guide/dependency-injection-in-action#keep-constructors-simple"><i class="material-icons">link</i></a></h3><h3 translation-origin="off" id="keep-constructors-simple">Keep constructors simple<a title="Link to this heading" class="header-link" aria-hidden="true" href="guide/dependency-injection-in-action#keep-constructors-simple"><i class="material-icons">link</i></a></h3><p translation-result="on">构造函数应该只用来初始化变量。 这条规则让组件在测试环境中可以放心地构造组件，以免在构造它们时，无意中做出一些非常戏剧化的动作(比如与服务器进行会话)。 这就是为什么你要在 <code>ngOnInit</code> 里面调用 <code>HeroService</code>，而不是在构造函数中。</p><p translation-origin="off">Constructors should do little more than initialize variables. This rule makes the component safe to construct under test without fear that it will do something dramatic like talk to the server. That's why you call the <code>HeroService</code> from within the <code>ngOnInit</code> rather than the constructor.</p></div><p translation-result="on">用户希望看到英雄按字母顺序排序。与其修改原始的组件，不如派生它，新建 <code>SortedHeroesComponent</code>，以便展示英雄之前进行排序。 <code>SortedHeroesComponent</code> 让基类来获取英雄。</p><p translation-origin="off">Users want to see the heroes in alphabetical order. Rather than modify the original component, sub-class it and create a <code>SortedHeroesComponent</code> that sorts the heroes before presenting them. The <code>SortedHeroesComponent</code> lets the base class fetch the heroes.</p><p translation-result="on">可惜，Angular 不能直接在基类里直接注入 <code>HeroService</code>。必须在<em>这个</em>组件里再次提供 <code>HeroService</code>，然后通过构造函数传给基类。</p><p translation-origin="off">Unfortunately, Angular cannot inject the <code>HeroService</code> directly into the base class. You must provide the <code>HeroService</code> again for <em>this</em> component, then pass it down to the base class inside the constructor.</p><code-example path="dependency-injection-in-action/src/app/sorted-heroes.component.ts" region="sorted-heroes" header="src/app/sorted-heroes.component.ts (SortedHeroesComponent)" ng-version="10.0.0-rc.2"><div style="display:none">@<a href="api/core/Component" class="code-anchor">Component</a>({ selector: 'app-sorted-heroes', template: `&lt;div *<a href="api/common/NgForOf" class="code-anchor">ngFor</a>="let hero of heroes"&gt;{{hero.name}}&lt;/div&gt;`, providers: [HeroService] }) export class SortedHeroesComponent extends HeroesBaseComponent { constructor(heroService: HeroService) { super(heroService); } protected afterGetHeroes() { this.heroes = this.heroes.sort((h1, h2) =&gt; { return h1.name &lt; h2.name ? -1 : (h1.name &gt; h2.name ? 1 : 0); }); } }</div><header class="ng-star-inserted">src/app/sorted-heroes.component.ts (SortedHeroesComponent)</header><aio-code class="headed-code"><pre class="lang- prettyprint">      <button title="Copy code snippet" class="material-icons copy-button no-print ng-star-inserted" aria-label="Copy code snippet from src/app/sorted-heroes.component.ts (SortedHeroesComponent)">
        <span aria-hidden="true">content_copy</span>
      </button>
      <code class="animated fadeIn"><span class="lit">@</span><a href="api/core/Component" class="code-anchor"><span class="lit">Component</span></a><span class="pun">({</span><span class="pln">
  selector</span><span class="pun">:</span><span class="pln"> </span><span class="str">'app-sorted-heroes'</span><span class="pun">,</span><span class="pln">
  </span><span class="kwd">template</span><span class="pun">:</span><span class="pln"> </span><span class="str">`&lt;div *</span><a href="api/common/NgForOf" class="code-anchor"><span class="str">ngFor</span></a><span class="str">="let hero of heroes"&gt;{{hero.name}}&lt;/div&gt;`</span><span class="pun">,</span><span class="pln">
  providers</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span><span class="typ">HeroService</span><span class="pun">]</span><span class="pln">
</span><span class="pun">})</span><span class="pln">
</span><span class="kwd">export</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">SortedHeroesComponent</span><span class="pln"> </span><span class="kwd">extends</span><span class="pln"> </span><span class="typ">HeroesBaseComponent</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  </span><span class="kwd">constructor</span><span class="pun">(</span><span class="pln">heroService</span><span class="pun">:</span><span class="pln"> </span><span class="typ">HeroService</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">super</span><span class="pun">(</span><span class="pln">heroService</span><span class="pun">);</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">

  </span><span class="kwd">protected</span><span class="pln"> afterGetHeroes</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">heroes </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">heroes</span><span class="pun">.</span><span class="pln">sort</span><span class="pun">((</span><span class="pln">h1</span><span class="pun">,</span><span class="pln"> h2</span><span class="pun">)</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
      </span><span class="kwd">return</span><span class="pln"> h1</span><span class="pun">.</span><span class="pln">name </span><span class="pun">&lt;</span><span class="pln"> h2</span><span class="pun">.</span><span class="pln">name </span><span class="pun">?</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pln"> </span><span class="pun">:</span><span class="pln">
            </span><span class="pun">(</span><span class="pln">h1</span><span class="pun">.</span><span class="pln">name </span><span class="pun">&gt;</span><span class="pln"> h2</span><span class="pun">.</span><span class="pln">name </span><span class="pun">?</span><span class="pln"> </span><span class="lit">1</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span><span class="pln">
    </span><span class="pun">});</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span></code>
    </pre></aio-code></code-example><p translation-result="on">现在，请注意 <code>afterGetHeroes()</code> 方法。 你的第一反应是在 <code>SortedHeroesComponent</code> 组件里面建一个 <code>ngOnInit</code> 方法来做排序。但是 Angular 会先调用<em>派生</em>类的 <code>ngOnInit</code>，后调用基类的 <code>ngOnInit</code>， 所以可能在<em>英雄到达之前</em>就开始排序。这就产生了一个讨厌的错误。</p><p translation-origin="off">Now take note of the <code>afterGetHeroes()</code> method. Your first instinct might have been to create an <code>ngOnInit</code> method in <code>SortedHeroesComponent</code> and do the sorting there. But Angular calls the <em>derived</em> class's <code>ngOnInit</code> <em>before</em> calling the base class's <code>ngOnInit</code> so you'd be sorting the heroes array <em>before they arrived</em>. That produces a nasty error.</p><p translation-result="on">覆盖基类的 <code>afterGetHeroes()</code> 方法可以解决这个问题。</p><p translation-origin="off">Overriding the base class's <code>afterGetHeroes()</code> method solves the problem.</p><p translation-result="on">分析上面的这些复杂性是为了强调<em>避免使用组件继承</em>这一点。</p><p translation-origin="off">These complications argue for <em>avoiding component inheritance</em>.</p><a id="forwardref"></a><h2 id="break-circularities-with-a-forward-class-reference-forwardref" translation-result="on">使用一个前向引用(<em>forwardRef</em>)来打破循环<a title="Link to this heading" class="header-link" aria-hidden="true" href="guide/dependency-injection-in-action#break-circularities-with-a-forward-class-reference-forwardref"><i class="material-icons">link</i></a></h2><h2 translation-origin="off" id="break-circularities-with-a-forward-class-reference-forwardref">Break circularities with a forward class reference (<em>forwardRef</em>)<a title="Link to this heading" class="header-link" aria-hidden="true" href="guide/dependency-injection-in-action#break-circularities-with-a-forward-class-reference-forwardref"><i class="material-icons">link</i></a></h2><p translation-result="on">在 TypeScript 里面，类声明的顺序是很重要的。如果一个类尚未定义，就不能引用它。</p><p translation-origin="off">The order of class declaration matters in TypeScript. You can't refer directly to a class until it's been defined.</p><p translation-result="on">这通常不是一个问题，特别是当你遵循<em>一个文件一个类</em>规则的时候。 但是有时候循环引用可能不能避免。当一个类<em>A 引用类 B</em>，同时'B'引用'A'的时候，你就陷入困境了：它们中间的某一个必须要先定义。</p><p translation-origin="off">This isn't usually a problem, especially if you adhere to the recommended <em>one class per file</em> rule. But sometimes circular references are unavoidable. You're in a bind when class 'A' refers to class 'B' and 'B' refers to 'A'. One of them has to be defined first.</p><p translation-result="on">Angular 的 <code><a href="api/core/forwardRef" class="code-anchor">forwardRef</a>()</code> 函数建立一个<em>间接地</em>引用，Angular 可以随后解析。</p><p translation-origin="off">The Angular <code><a href="api/core/forwardRef" class="code-anchor">forwardRef</a>()</code> function creates an <em>indirect</em> reference that Angular can resolve later.</p><p translation-result="on">这个关于<em>父查找器</em>的例子中全都是没办法打破的循环类引用。</p><p translation-origin="off">The <em>Parent Finder</em> sample is full of circular class references that are impossible to break.</p><p translation-result="on">当一个类<em>需要引用自身</em>的时候，你面临同样的困境，就像在 <code>AlexComponent</code> 的 <code>provdiers</code> 数组中遇到的困境一样。 该 <code>providers</code> 数组是一个 <code>@<a href="api/core/Component" class="code-anchor">Component</a>()</code> 装饰器函数的一个属性，它必须在类定义<em>之前</em>出现。</p><p translation-origin="off">You face this dilemma when a class makes <em>a reference to itself</em> as does <code>AlexComponent</code> in its <code>providers</code> array. The <code>providers</code> array is a property of the <code>@<a href="api/core/Component" class="code-anchor">Component</a>()</code> decorator function which must appear <em>above</em> the class definition.</p><p translation-result="on">使用 <code><a href="api/core/forwardRef" class="code-anchor">forwardRef</a></code> 来打破这种循环：</p><p translation-origin="off">Break the circularity with <code><a href="api/core/forwardRef" class="code-anchor">forwardRef</a></code>.</p><code-example path="dependency-injection-in-action/src/app/parent-finder.component.ts" region="alex-providers" header="parent-finder.component.ts (AlexComponent providers)" ng-version="10.0.0-rc.2"><div style="display:none">providers: [{ provide: Parent, useExisting: <a href="api/core/forwardRef" class="code-anchor">forwardRef</a>(() =&gt; AlexComponent) }],</div><header class="ng-star-inserted">parent-finder.component.ts (AlexComponent providers)</header><aio-code class="headed-code"><pre class="lang- prettyprint">      <button title="Copy code snippet" class="material-icons copy-button no-print ng-star-inserted" aria-label="Copy code snippet from parent-finder.component.ts (AlexComponent providers)">
        <span aria-hidden="true">content_copy</span>
      </button>
      <code class="animated fadeIn"><span class="pln">providers</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[{</span><span class="pln"> provide</span><span class="pun">:</span><span class="pln"> </span><span class="typ">Parent</span><span class="pun">,</span><span class="pln"> useExisting</span><span class="pun">:</span><span class="pln"> </span><a href="api/core/forwardRef" class="code-anchor"><span class="pln">forwardRef</span></a><span class="pun">(()</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="typ">AlexComponent</span><span class="pun">)</span><span class="pln"> </span><span class="pun">}],</span></code>
    </pre></aio-code></code-example></div></div></aio-doc-viewer></main></mat-sidenav-content></mat-sidenav-container><div class="toc-container no-print ng-star-inserted"><aio-lazy-ce selector="aio-toc"><aio-toc ng-version="10.0.0-rc.2"><div class="toc-inner no-print collapsed ng-star-inserted"><ul class="toc-list"><li class="h1 ng-star-inserted active" title="依赖注入实战"><a href="guide/dependency-injection-in-action#dependency-injection-in-action">依赖注入实战</a></li><li class="h2 ng-star-inserted" title="嵌套的服务依赖"><a href="guide/dependency-injection-in-action#nested-service-dependencies">嵌套的服务依赖</a></li><li class="h2 ng-star-inserted" title="把服务的范围限制到某个组件的子树下"><a href="guide/dependency-injection-in-action#limit-service-scope-to-a-component-subtree">把服务的范围限制到某个组件的子树下</a></li><li class="h2 ng-star-inserted" title="多个服务实例(沙箱式隔离)"><a href="guide/dependency-injection-in-action#multiple-service-instances-sandboxing">多个服务实例(沙箱式隔离)</a></li><li class="h2 ng-star-inserted" title="使用参数装饰器来限定依赖查找方式"><a href="guide/dependency-injection-in-action#qualify-dependency-lookup-with-parameter-decorators">使用参数装饰器来限定依赖查找方式</a></li><li class="h3 ng-star-inserted" title="用 @Optional 来让依赖是可选的，以及使用 @Host 来限定搜索方式"><a href="guide/dependency-injection-in-action#make-a-dependency-optional-and-limit-search-with-host">用 <code>@Optional</code> 来让依赖是可选的，以及使用 <code>@Host</code> 来限定搜索方式</a></li><li class="h3 ng-star-inserted" title="使用 @Inject 指定自定义提供者"><a href="guide/dependency-injection-in-action#supply-a-custom-provider-with-inject">使用 <code>@Inject</code> 指定自定义提供者</a></li><li class="h3 ng-star-inserted" title="使用 @Self 和 @SkipSelf 来修改提供者的搜索方式"><a href="guide/dependency-injection-in-action#modify-the-provider-search-with-self-and-skipself">使用 <code>@Self</code> 和 <code>@SkipSelf</code> 来修改提供者的搜索方式</a></li><li class="h2 ng-star-inserted" title="注入组件的 DOM 元素"><a href="guide/dependency-injection-in-action#inject-the-components-dom-element">注入组件的 DOM 元素</a></li><li class="h2 ng-star-inserted" title="使用提供者来定义依赖"><a href="guide/dependency-injection-in-action#define-dependencies-with-providers">使用提供者来定义依赖</a></li><li class="h3 ng-star-inserted" title="定义提供者"><a href="guide/dependency-injection-in-action#defining-providers">定义提供者</a></li><li class="h2 ng-star-inserted" title="提供替代令牌：类接口与 'InjectionToken'"><a href="guide/dependency-injection-in-action#provider-token-alternatives-class-interface-and-injectiontoken">提供替代令牌：类接口与 'InjectionToken'</a></li><li class="h3 ng-star-inserted" title="类-接口"><a href="guide/dependency-injection-in-action#classinterface">类-接口</a></li><li class="h3 ng-star-inserted" title="'InjectionToken' 对象"><a href="guide/dependency-injection-in-action#injectiontoken-objects">'InjectionToken' 对象</a></li><li class="h2 ng-star-inserted" title="注入到派生类"><a href="guide/dependency-injection-in-action#inject-into-a-derived-class">注入到派生类</a></li><li class="h3 ng-star-inserted" title="让构造函数保持简单"><a href="guide/dependency-injection-in-action#keep-constructors-simple">让构造函数保持简单</a></li><li class="h2 ng-star-inserted" title="使用一个前向引用(forwardRef)来打破循环"><a href="guide/dependency-injection-in-action#break-circularities-with-a-forward-class-reference-forwardref">使用一个前向引用(<em>forwardRef</em>)来打破循环</a></li></ul></div></aio-toc></aio-lazy-ce></div><footer class="no-print"><aio-footer><div class="grid-fluid"><div class="footer-block ng-star-inserted"><h3>资源</h3><ul><li class="ng-star-inserted"><a class="link" href="about" title="Angular 贡献者。">关于</a></li><li class="ng-star-inserted"><a class="link" href="resources" title="网络上的 Angular 工具、培训、博客等">资源列表</a></li><li class="ng-star-inserted"><a class="link" href="presskit" title="我们的联系方式、LOGO 和品牌">宣传资料</a></li><li class="ng-star-inserted"><a class="link" href="https://blog.angular.io/" title="Angular 官方博客">博客</a></li><li class="ng-star-inserted"><a class="link" href="analytics" title="Angular 使用情况分析">使用情况分析</a></li></ul></div><div class="footer-block ng-star-inserted"><h3>帮助</h3><ul><li class="ng-star-inserted"><a class="link" href="https://stackoverflow.com/questions/tagged/angular" title="Stack Overflow: 这里的社区会回答你关于 Angular 的技术问题">Stack Overflow</a></li><li class="ng-star-inserted"><a class="link" href="https://gitter.im/angular/angular" title="和老鸟聊 Angular">Gitter</a></li><li class="ng-star-inserted"><a class="link" href="https://github.com/angular/angular/issues" title="在 github 上报告问题和建议。">报告问题</a></li><li class="ng-star-inserted"><a class="link" href="https://github.com/angular/code-of-conduct/blob/master/CODE_OF_CONDUCT.md" title="让我们彼此尊重">行为规范</a></li></ul></div><div class="footer-block ng-star-inserted"><h3>社区</h3><ul><li class="ng-star-inserted"><a class="link" href="events" title="Angular events around the world.">活动</a></li><li class="ng-star-inserted"><a class="link" href="http://www.meetup.com/topics/angularjs/" title="参加聚会，向别的开发人员学习">聚会</a></li><li class="ng-star-inserted"><a class="link" href="https://twitter.com/angular" title="Twitter">Twitter</a></li><li class="ng-star-inserted"><a class="link" href="https://github.com/angular/angular" title="GitHub">GitHub</a></li><li class="ng-star-inserted"><a class="link" href="contribute" title="向 Angular 做贡献">做贡献</a></li></ul></div><div class="footer-block ng-star-inserted"><h3>多语言</h3><ul><li class="ng-star-inserted"><a class="link" href="https://angular.io/" title="English Version.">English Version</a></li><li class="ng-star-inserted"><a class="link" href="https://angular.tw/" title="正體中文版">正體中文版</a></li><li class="ng-star-inserted"><a class="link" href="https://angular.jp/" title="日本語版">日本語版</a></li><li class="ng-star-inserted"><a class="link" href="https://angular.kr/" title="한국어">한국어</a></li></ul></div></div><p>Super-powered by Google ©2010-2020. 代码授权方式：<a href="license" title="License text">MIT-style License</a>. 文档授权方式：<a href="http://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a>.</p><p>当前版本：10.0.0-build.140+sha.c1501f60.</p></aio-footer></footer><div class="cdk-visually-hidden ng-star-inserted"><mat-icon role="img" class="mat-icon notranslate material-icons mat-icon-no-color" aria-hidden="true">&nbsp;</mat-icon></div></aio-shell><noscript><div class="background-sky hero"></div><section id="intro" style="text-shadow:1px 1px #1976d2"><div class="hero-logo"><img src="assets/images/logos/angular/angular.svg" width="250" height="250" alt="Angular"></div><div class="homepage-container"><div class="hero-headline">一套框架，多种平台<br>移动 &amp; 桌面</div></div></section><h2 style="color:red;margin-top:40px;position:relative;text-align:center;text-shadow:1px 1px #fafafa"><b><i>该网站需要浏览器支持 JavaScript</i></b></h2></noscript><script src="runtime-es2015.fcd764ba8b27349cbf9b.js" type="module"></script><script src="runtime-es5.fcd764ba8b27349cbf9b.js" nomodule="" defer=""></script><script src="polyfills-es5.3da43dfa31f1cc176ea1.js" nomodule="" defer=""></script><script src="polyfills-es2015.ac110d314cf16f4d5df4.js" type="module"></script><script src="main-es2015.f39f5ebc8f80f8d1e43b.js" type="module"></script><script src="main-es5.f39f5ebc8f80f8d1e43b.js" nomodule="" defer=""></script><div class="cdk-live-announcer-element cdk-visually-hidden" aria-atomic="true" aria-live="polite"></div></body></html>