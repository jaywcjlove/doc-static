(window.webpackJsonp=window.webpackJsonp||[]).push([[314],{3259:function(yt,nt,d){yt.exports={avatar:d(4034),basic:d(4035),"crop-image":d(4036),"customize-progress-bar":d(4037),defaultFileList:d(4038),directory:d(4039),"drag-sorting":d(4040),drag:d(4041),"file-type":d(4042),fileList:d(4043),"picture-card":d(4044),"picture-style":d(4045),"preview-file":d(4046),"transform-file":d(4047),"upload-custom-action-icon":d(4048),"upload-manually":d(4049),"upload-png-only":d(4050),"upload-with-aliyun-oss":d(4051)}},4055:function(yt,nt,d){"use strict";d.r(nt);var Gt=d(99),Q=d.n(Gt),bt=d(184),Et=d(89),Xt=d(497),m=d(0),g=d.n(m),Bt=d(22),h=d.n(Bt);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var rt=function(e,n){return rt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(t[a]=o[a])},rt(e,n)};function Yt(e,n){rt(e,n);function t(){this.constructor=e}e.prototype=n===null?Object.create(n):(t.prototype=n.prototype,new t)}var C=function(){return C=Object.assign||function(n){for(var t,o=1,a=arguments.length;o<a;o++){t=arguments[o];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},C.apply(this,arguments)};function Ee(e,n){var t={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&n.indexOf(o)<0&&(t[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,o=Object.getOwnPropertySymbols(e);a<o.length;a++)n.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(e,o[a])&&(t[o[a]]=e[o[a]]);return t}function Re(e,n,t,o){var a=arguments.length,r=a<3?n:o===null?o=Object.getOwnPropertyDescriptor(n,t):o,i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(e,n,t,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(n,t,r):i(n,t))||r);return a>3&&r&&Object.defineProperty(n,t,r),r}function we(e,n){return function(t,o){n(t,o,e)}}function Ce(e,n){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,n)}function Se(e,n,t,o){function a(r){return r instanceof t?r:new t(function(i){i(r)})}return new(t||(t=Promise))(function(r,i){function s(u){try{c(o.next(u))}catch(y){i(y)}}function l(u){try{c(o.throw(u))}catch(y){i(y)}}function c(u){u.done?r(u.value):a(u.value).then(s,l)}c((o=o.apply(e,n||[])).next())})}function Oe(e,n){var t={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]},o,a,r,i;return i={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function s(c){return function(u){return l([c,u])}}function l(c){if(o)throw new TypeError("Generator is already executing.");for(;t;)try{if(o=1,a&&(r=c[0]&2?a.return:c[0]?a.throw||((r=a.return)&&r.call(a),0):a.next)&&!(r=r.call(a,c[1])).done)return r;(a=0,r)&&(c=[c[0]&2,r.value]);switch(c[0]){case 0:case 1:r=c;break;case 4:return t.label++,{value:c[1],done:!1};case 5:t.label++,a=c[1],c=[0];continue;case 7:c=t.ops.pop(),t.trys.pop();continue;default:if(!(r=t.trys,r=r.length>0&&r[r.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!r||c[1]>r[0]&&c[1]<r[3])){t.label=c[1];break}if(c[0]===6&&t.label<r[1]){t.label=r[1],r=c;break}if(r&&t.label<r[2]){t.label=r[2],t.ops.push(c);break}r[2]&&t.ops.pop(),t.trys.pop();continue}c=n.call(e,t)}catch(u){c=[6,u],a=0}finally{o=r=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}var Rt=Object.create?function(e,n,t,o){o===void 0&&(o=t),Object.defineProperty(e,o,{enumerable:!0,get:function(){return n[t]}})}:function(e,n,t,o){o===void 0&&(o=t),e[o]=n[t]};function xe(e,n){for(var t in e)t!=="default"&&!Object.prototype.hasOwnProperty.call(n,t)&&Rt(n,e,t)}function wt(e){var n=typeof Symbol=="function"&&Symbol.iterator,t=n&&e[n],o=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}function Jt(e,n){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var o=t.call(e),a,r=[],i;try{for(;(n===void 0||n-- >0)&&!(a=o.next()).done;)r.push(a.value)}catch(s){i={error:s}}finally{try{a&&!a.done&&(t=o.return)&&t.call(o)}finally{if(i)throw i.error}}return r}function Pe(){for(var e=[],n=0;n<arguments.length;n++)e=e.concat(Jt(arguments[n]));return e}function Te(){for(var e=0,n=0,t=arguments.length;n<t;n++)e+=arguments[n].length;for(var o=Array(e),a=0,n=0;n<t;n++)for(var r=arguments[n],i=0,s=r.length;i<s;i++,a++)o[a]=r[i];return o}function K(e){return this instanceof K?(this.v=e,this):new K(e)}function Me(e,n,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=t.apply(e,n||[]),a,r=[];return a={},i("next"),i("throw"),i("return"),a[Symbol.asyncIterator]=function(){return this},a;function i(p){o[p]&&(a[p]=function(b){return new Promise(function(P,S){r.push([p,b,P,S])>1||s(p,b)})})}function s(p,b){try{l(o[p](b))}catch(P){y(r[0][3],P)}}function l(p){p.value instanceof K?Promise.resolve(p.value.v).then(c,u):y(r[0][2],p)}function c(p){s("next",p)}function u(p){s("throw",p)}function y(p,b){(p(b),r.shift(),r.length)&&s(r[0][0],r[0][1])}}function Ae(e){var n,t;return n={},o("next"),o("throw",function(a){throw a}),o("return"),n[Symbol.iterator]=function(){return this},n;function o(a,r){n[a]=e[a]?function(i){return(t=!t)?{value:K(e[a](i)),done:a==="return"}:r?r(i):i}:r}}function _e(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=e[Symbol.asyncIterator],t;return n?n.call(e):(e=typeof wt=="function"?wt(e):e[Symbol.iterator](),t={},o("next"),o("throw"),o("return"),t[Symbol.asyncIterator]=function(){return this},t);function o(r){t[r]=e[r]&&function(i){return new Promise(function(s,l){i=e[r](i),a(s,l,i.done,i.value)})}}function a(r,i,s,l){Promise.resolve(l).then(function(c){r({value:c,done:s})},i)}}function Le(e,n){return Object.defineProperty?Object.defineProperty(e,"raw",{value:n}):e.raw=n,e}var $t=Object.create?function(e,n){Object.defineProperty(e,"default",{enumerable:!0,value:n})}:function(e,n){e.default=n};function je(e){if(e&&e.__esModule)return e;var n={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&Rt(n,e,t);return $t(n,e),n}function De(e){return e&&e.__esModule?e:{default:e}}function Ie(e,n){if(!n.has(e))throw new TypeError("attempted to get private field on non-instance");return n.get(e)}function Ne(e,n,t){if(!n.has(e))throw new TypeError("attempted to set private field on non-instance");return n.set(e,t),t}function Qt(e,n,t,o,a,r){r===void 0&&(r=0);var i=Pt(e,n,r),s=i.width,l=i.height,c=Math.min(s,t),u=Math.min(l,o);return c>u*a?{width:u*a,height:u}:{width:c,height:c/a}}function k(e,n,t,o,a){a===void 0&&(a=0);var r=Pt(n.width,n.height,a),i=r.width,s=r.height;return{x:Ct(e.x,i,t.width,o),y:Ct(e.y,s,t.height,o)}}function Ct(e,n,t,o){var a=n*o/2-t/2;return Math.min(a,Math.max(e,-a))}function St(e,n){return Math.sqrt(Math.pow(e.y-n.y,2)+Math.pow(e.x-n.x,2))}function Ot(e,n){return Math.atan2(n.y-e.y,n.x-e.x)*180/Math.PI}function Kt(e,n,t,o,a,r,i){r===void 0&&(r=0),i===void 0&&(i=!0);var s=i&&r===0?kt:qt,l={x:s(100,((n.width-t.width/a)/2-e.x/a)/n.width*100),y:s(100,((n.height-t.height/a)/2-e.y/a)/n.height*100),width:s(100,t.width/n.width*100/a),height:s(100,t.height/n.height*100/a)},c=Math.round(s(n.naturalWidth,l.width*n.naturalWidth/100)),u=Math.round(s(n.naturalHeight,l.height*n.naturalHeight/100)),y=n.naturalWidth>=n.naturalHeight*o,p=y?{width:Math.round(u*o),height:u}:{width:c,height:Math.round(c/o)},b=C(C({},p),{x:Math.round(s(n.naturalWidth-p.width,l.x*n.naturalWidth/100)),y:Math.round(s(n.naturalHeight-p.height,l.y*n.naturalHeight/100))});return{croppedAreaPercentages:l,croppedAreaPixels:b}}function kt(e,n){return Math.min(e,Math.max(0,n))}function qt(e,n){return n}function te(e,n,t){var o=n.width/n.naturalWidth;if(t){var a=t.height>t.width;return a?t.height/o/e.height:t.width/o/e.width}var r=e.width/e.height,i=n.naturalWidth>=n.naturalHeight*r;return i?n.naturalHeight/e.height:n.naturalWidth/e.width}function ee(e,n,t){var o=n.width/n.naturalWidth,a=te(e,n,t),r=o*a,i={x:((n.naturalWidth-e.width)/2-e.x)*r,y:((n.naturalHeight-e.height)/2-e.y)*r};return{crop:i,zoom:a}}function xt(e,n){return{x:(n.x+e.x)/2,y:(n.y+e.y)/2}}function q(e,n,t,o,a){var r=Math.cos,i=Math.sin,s=a*Math.PI/180,l=(e-t)*r(s)-(n-o)*i(s)+t,c=(e-t)*i(s)+(n-o)*r(s)+o;return[l,c]}function Pt(e,n,t){var o=e/2,a=n/2,r=[q(0,0,o,a,t),q(e,0,o,a,t),q(e,n,o,a,t),q(0,n,o,a,t)],i=Math.min.apply(Math,r.map(function(u){return u[0]})),s=Math.max.apply(Math,r.map(function(u){return u[0]})),l=Math.min.apply(Math,r.map(function(u){return u[1]})),c=Math.max.apply(Math,r.map(function(u){return u[1]}));return{width:s-i,height:c-l}}function tt(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return e.filter(function(t){return typeof t=="string"&&t.length>0}).join(" ").trim()}var oe=`.reactEasyCrop_Container {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  overflow: hidden;
  user-select: none;
  touch-action: none;
  cursor: move;
}

.reactEasyCrop_Image,
.reactEasyCrop_Video {
  max-width: 100%;
  max-height: 100%;
  margin: auto;
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
  will-change: transform; /* this improves performances and prevent painting issues on iOS Chrome */
}

.reactEasyCrop_CropArea {
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  border: 1px solid rgba(255, 255, 255, 0.5);
  box-sizing: border-box;
  box-shadow: 0 0 0 9999em;
  color: rgba(0, 0, 0, 0.5);
  overflow: hidden;
}

.reactEasyCrop_CropAreaRound {
  border-radius: 50%;
}

.reactEasyCrop_CropAreaGrid::before {
  content: ' ';
  box-sizing: border-box;
  position: absolute;
  border: 1px solid rgba(255, 255, 255, 0.5);
  top: 0;
  bottom: 0;
  left: 33.33%;
  right: 33.33%;
  border-top: 0;
  border-bottom: 0;
}

.reactEasyCrop_CropAreaGrid::after {
  content: ' ';
  box-sizing: border-box;
  position: absolute;
  border: 1px solid rgba(255, 255, 255, 0.5);
  top: 33.33%;
  bottom: 33.33%;
  left: 0;
  right: 0;
  border-left: 0;
  border-right: 0;
}
`,ne=1,re=3,ae=function(e){Yt(n,e);function n(){var t=e!==null&&e.apply(this,arguments)||this;return t.imageRef=null,t.videoRef=null,t.containerRef=null,t.styleRef=null,t.containerRect=null,t.mediaSize={width:0,height:0,naturalWidth:0,naturalHeight:0},t.dragStartPosition={x:0,y:0},t.dragStartCrop={x:0,y:0},t.lastPinchDistance=0,t.lastPinchRotation=0,t.rafDragTimeout=null,t.rafPinchTimeout=null,t.wheelTimer=null,t.state={cropSize:null,hasWheelJustStarted:!1},t.preventZoomSafari=function(o){return o.preventDefault()},t.cleanEvents=function(){document.removeEventListener("mousemove",t.onMouseMove),document.removeEventListener("mouseup",t.onDragStopped),document.removeEventListener("touchmove",t.onTouchMove),document.removeEventListener("touchend",t.onDragStopped)},t.clearScrollEvent=function(){t.containerRef&&t.containerRef.removeEventListener("wheel",t.onWheel),t.wheelTimer&&clearTimeout(t.wheelTimer)},t.onMediaLoad=function(){t.computeSizes(),t.emitCropData(),t.setInitialCrop(),t.props.onMediaLoaded&&t.props.onMediaLoaded(t.mediaSize)},t.setInitialCrop=function(){var o=t.props,a=o.initialCroppedAreaPixels,r=o.cropSize;if(!a)return;var i=ee(a,t.mediaSize,r),s=i.crop,l=i.zoom;t.props.onCropChange(s),t.props.onZoomChange&&t.props.onZoomChange(l)},t.computeSizes=function(){var o,a,r,i,s,l,c=t.imageRef||t.videoRef;if(c&&t.containerRef){t.containerRect=t.containerRef.getBoundingClientRect(),t.mediaSize={width:c.offsetWidth,height:c.offsetHeight,naturalWidth:((o=t.imageRef)===null||o===void 0?void 0:o.naturalWidth)||((a=t.videoRef)===null||a===void 0?void 0:a.videoWidth)||0,naturalHeight:((r=t.imageRef)===null||r===void 0?void 0:r.naturalHeight)||((i=t.videoRef)===null||i===void 0?void 0:i.videoHeight)||0};var u=t.props.cropSize?t.props.cropSize:Qt(c.offsetWidth,c.offsetHeight,t.containerRect.width,t.containerRect.height,t.props.aspect,t.props.rotation);(((s=t.state.cropSize)===null||s===void 0?void 0:s.height)!==u.height||((l=t.state.cropSize)===null||l===void 0?void 0:l.width)!==u.width)&&(t.props.onCropSizeChange&&t.props.onCropSizeChange(u)),t.setState({cropSize:u},t.recomputeCropPosition)}},t.onMouseDown=function(o){o.preventDefault(),document.addEventListener("mousemove",t.onMouseMove),document.addEventListener("mouseup",t.onDragStopped),t.onDragStart(n.getMousePoint(o))},t.onMouseMove=function(o){return t.onDrag(n.getMousePoint(o))},t.onTouchStart=function(o){o.preventDefault(),document.addEventListener("touchmove",t.onTouchMove,{passive:!1}),document.addEventListener("touchend",t.onDragStopped),o.touches.length===2?t.onPinchStart(o):o.touches.length===1&&t.onDragStart(n.getTouchPoint(o.touches[0]))},t.onTouchMove=function(o){o.preventDefault(),o.touches.length===2?t.onPinchMove(o):o.touches.length===1&&t.onDrag(n.getTouchPoint(o.touches[0]))},t.onDragStart=function(o){var a,r,i=o.x,s=o.y;t.dragStartPosition={x:i,y:s},t.dragStartCrop=C({},t.props.crop),(r=(a=t.props).onInteractionStart)===null||r===void 0||r.call(a)},t.onDrag=function(o){var a=o.x,r=o.y;t.rafDragTimeout&&window.cancelAnimationFrame(t.rafDragTimeout),t.rafDragTimeout=window.requestAnimationFrame(function(){if(!t.state.cropSize)return;if(a===void 0||r===void 0)return;var i=a-t.dragStartPosition.x,s=r-t.dragStartPosition.y,l={x:t.dragStartCrop.x+i,y:t.dragStartCrop.y+s},c=t.props.restrictPosition?k(l,t.mediaSize,t.state.cropSize,t.props.zoom,t.props.rotation):l;t.props.onCropChange(c)})},t.onDragStopped=function(){var o,a;t.cleanEvents(),t.emitCropData(),(a=(o=t.props).onInteractionEnd)===null||a===void 0||a.call(o)},t.onWheel=function(o){o.preventDefault();var a=n.getMousePoint(o),r=t.props.zoom-o.deltaY*t.props.zoomSpeed/200;t.setNewZoom(r,a),t.state.hasWheelJustStarted||t.setState({hasWheelJustStarted:!0},function(){var i,s;return(s=(i=t.props).onInteractionStart)===null||s===void 0?void 0:s.call(i)}),t.wheelTimer&&clearTimeout(t.wheelTimer),t.wheelTimer=window.setTimeout(function(){return t.setState({hasWheelJustStarted:!1},function(){var i,s;return(s=(i=t.props).onInteractionEnd)===null||s===void 0?void 0:s.call(i)})},250)},t.getPointOnContainer=function(o){var a=o.x,r=o.y;if(!t.containerRect)throw new Error("The Cropper is not mounted");return{x:t.containerRect.width/2-(a-t.containerRect.left),y:t.containerRect.height/2-(r-t.containerRect.top)}},t.getPointOnMedia=function(o){var a=o.x,r=o.y,i=t.props,s=i.crop,l=i.zoom;return{x:(a+s.x)/l,y:(r+s.y)/l}},t.setNewZoom=function(o,a){if(!t.state.cropSize||!t.props.onZoomChange)return;var r=t.getPointOnContainer(a),i=t.getPointOnMedia(r),s=Math.min(t.props.maxZoom,Math.max(o,t.props.minZoom)),l={x:i.x*s-r.x,y:i.y*s-r.y},c=t.props.restrictPosition?k(l,t.mediaSize,t.state.cropSize,s,t.props.rotation):l;t.props.onCropChange(c),t.props.onZoomChange(s)},t.emitCropData=function(){if(!t.state.cropSize)return;var o=t.props.restrictPosition?k(t.props.crop,t.mediaSize,t.state.cropSize,t.props.zoom,t.props.rotation):t.props.crop,a=Kt(o,t.mediaSize,t.state.cropSize,t.getAspect(),t.props.zoom,t.props.rotation,t.props.restrictPosition),r=a.croppedAreaPercentages,i=a.croppedAreaPixels;t.props.onCropComplete&&t.props.onCropComplete(r,i)},t.recomputeCropPosition=function(){if(!t.state.cropSize)return;var o=t.props.restrictPosition?k(t.props.crop,t.mediaSize,t.state.cropSize,t.props.zoom,t.props.rotation):t.props.crop;t.props.onCropChange(o),t.emitCropData()},t}return n.prototype.componentDidMount=function(){window.addEventListener("resize",this.computeSizes),this.containerRef&&(this.props.zoomWithScroll&&this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}),this.containerRef.addEventListener("gesturestart",this.preventZoomSafari),this.containerRef.addEventListener("gesturechange",this.preventZoomSafari)),this.props.disableAutomaticStylesInjection||(this.styleRef=document.createElement("style"),this.styleRef.setAttribute("type","text/css"),this.styleRef.innerHTML=oe,document.head.appendChild(this.styleRef)),this.imageRef&&this.imageRef.complete&&this.onMediaLoad()},n.prototype.componentWillUnmount=function(){window.removeEventListener("resize",this.computeSizes),this.containerRef&&(this.containerRef.removeEventListener("gesturestart",this.preventZoomSafari),this.containerRef.removeEventListener("gesturechange",this.preventZoomSafari)),this.styleRef&&this.styleRef.remove(),this.cleanEvents(),this.props.zoomWithScroll&&this.clearScrollEvent()},n.prototype.componentDidUpdate=function(t){var o,a,r,i;t.rotation!==this.props.rotation?(this.computeSizes(),this.recomputeCropPosition()):t.aspect!==this.props.aspect?this.computeSizes():t.zoom!==this.props.zoom?this.recomputeCropPosition():(((o=t.cropSize)===null||o===void 0?void 0:o.height)!==((a=this.props.cropSize)===null||a===void 0?void 0:a.height)||((r=t.cropSize)===null||r===void 0?void 0:r.width)!==((i=this.props.cropSize)===null||i===void 0?void 0:i.width))&&this.computeSizes(),t.zoomWithScroll!==this.props.zoomWithScroll&&this.containerRef&&(this.props.zoomWithScroll?this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}):this.clearScrollEvent())},n.prototype.getAspect=function(){var t=this.props,o=t.cropSize,a=t.aspect;return o?o.width/o.height:a},n.prototype.onPinchStart=function(t){var o=n.getTouchPoint(t.touches[0]),a=n.getTouchPoint(t.touches[1]);this.lastPinchDistance=St(o,a),this.lastPinchRotation=Ot(o,a),this.onDragStart(xt(o,a))},n.prototype.onPinchMove=function(t){var o=this,a=n.getTouchPoint(t.touches[0]),r=n.getTouchPoint(t.touches[1]),i=xt(a,r);this.onDrag(i),this.rafPinchTimeout&&window.cancelAnimationFrame(this.rafPinchTimeout),this.rafPinchTimeout=window.requestAnimationFrame(function(){var s=St(a,r),l=o.props.zoom*(s/o.lastPinchDistance);o.setNewZoom(l,i),o.lastPinchDistance=s;var c=Ot(a,r),u=o.props.rotation+(c-o.lastPinchRotation);o.props.onRotationChange&&o.props.onRotationChange(u),o.lastPinchRotation=c})},n.prototype.render=function(){var t=this,o=this.props,a=o.image,r=o.video,i=o.mediaProps,s=o.transform,l=o.crop,c=l.x,u=l.y,y=o.rotation,p=o.zoom,b=o.cropShape,P=o.showGrid,S=o.style,V=S.containerStyle,z=S.cropAreaStyle,T=S.mediaStyle,A=o.classes,D=A.containerClassName,U=A.cropAreaClassName,I=A.mediaClassName;return g.a.createElement("div",{onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart,ref:function(v){return t.containerRef=v},"data-testid":"container",style:V,className:tt("reactEasyCrop_Container",D)},a?g.a.createElement("img",C({alt:"",className:tt("reactEasyCrop_Image",I)},i,{src:a,ref:function(v){return t.imageRef=v},style:C(C({},T),{transform:s||"translate("+c+"px, "+u+"px) rotate("+y+"deg) scale("+p+")"}),onLoad:this.onMediaLoad})):r&&g.a.createElement("video",C({autoPlay:!0,loop:!0,muted:!0,className:tt("reactEasyCrop_Video",I)},i,{src:r,ref:function(v){return t.videoRef=v},onLoadedMetadata:this.onMediaLoad,style:C(C({},T),{transform:s||"translate("+c+"px, "+u+"px) rotate("+y+"deg) scale("+p+")"}),controls:!1})),this.state.cropSize&&g.a.createElement("div",{style:C(C({},z),{width:this.state.cropSize.width,height:this.state.cropSize.height}),"data-testid":"cropper",className:tt("reactEasyCrop_CropArea",b==="round"&&"reactEasyCrop_CropAreaRound",P&&"reactEasyCrop_CropAreaGrid",U)}))},n.defaultProps={zoom:1,rotation:0,aspect:4/3,maxZoom:re,minZoom:ne,cropShape:"rect",showGrid:!0,style:{},classes:{},mediaProps:{},zoomSpeed:1,restrictPosition:!0,zoomWithScroll:!0},n.getMousePoint=function(t){return{x:Number(t.clientX),y:Number(t.clientY)}},n.getTouchPoint=function(t){return{x:Number(t.clientX),y:Number(t.clientY)}},n}(g.a.Component),ie=ae,se=d(36),ce=d(379),Tt=d(498);function le(e){if(!e)return;if(typeof window=="undefined")return;var n=document.createElement("style");return n.setAttribute("media","screen"),n.innerHTML=e,document.head.appendChild(n),e}le(`.antd-img-crop-modal .ant-modal-body {
  padding-bottom: 16px;
}
.antd-img-crop-modal .antd-img-crop-container {
  position: relative;
  width: 100%;
  height: 40vh;
  margin-bottom: 16px;
}
.antd-img-crop-modal .antd-img-crop-control {
  display: flex;
  align-items: center;
  width: 60%;
  margin-left: auto;
  margin-right: auto;
}
.antd-img-crop-modal .antd-img-crop-control button {
  display: flex;
  justify-content: center;
  align-items: center;
  width: 34px;
  height: 34px;
  padding: 0;
  font-style: normal;
  background: transparent;
  border: 0;
  outline: 0;
  cursor: pointer;
}
.antd-img-crop-modal .antd-img-crop-control button[disabled] {
  cursor: default;
}
.antd-img-crop-modal .antd-img-crop-control.zoom button {
  font-size: 18px;
}
.antd-img-crop-modal .antd-img-crop-control.rotate button {
  font-size: 16px;
}
.antd-img-crop-modal .antd-img-crop-control.rotate button:first-of-type {
  transform: rotate(-20deg);
}
.antd-img-crop-modal .antd-img-crop-control.rotate button:last-of-type {
  transform: rotate(20deg);
}
.antd-img-crop-modal .antd-img-crop-control .ant-slider {
  flex: 1;
  margin: 0 8px;
}
`);var H="antd-img-crop",Mt=function(){},At=H+"-media",F=.1,_t=0,Lt=360,at=1,jt=Object(m.forwardRef)(function(e,n){var t=e.src,o=e.aspect,a=e.shape,r=e.grid,i=e.hasZoom,s=e.zoomVal,l=e.rotateVal,c=e.setZoomVal,u=e.setRotateVal,y=e.minZoom,p=e.maxZoom,b=e.onComplete,P=e.cropperProps,S=Object(m.useState)({x:0,y:0}),V=S[0],z=S[1],T=Object(m.useState)({width:0,height:0}),A=T[0],D=T[1],U=Object(m.useCallback)(function(E,v){b(v)},[b]),I=Object(m.useCallback)(function(E){var v=E.width,G=E.height,R=G*o;v>R?D({width:R,height:G}):D({width:v,height:v/o})},[o]);return g.a.createElement(ie,Object.assign({},P,{ref:n,image:t,crop:V,cropSize:A,onCropChange:z,aspect:o,cropShape:a,showGrid:r,zoomWithScroll:i,zoom:s,rotation:l,onZoomChange:c,onRotationChange:u,minZoom:y,maxZoom:p,onCropComplete:U,onMediaLoaded:I,classes:{containerClassName:H+"-container",mediaClassName:At}}))});jt.propTypes={src:h.a.string,aspect:h.a.number,shape:h.a.string,grid:h.a.bool,hasZoom:h.a.bool,zoomVal:h.a.number,rotateVal:h.a.number,setZoomVal:h.a.func,setRotateVal:h.a.func,minZoom:h.a.number,maxZoom:h.a.number,onComplete:h.a.func,cropperProps:h.a.object};var it=Object(m.forwardRef)(function(e,n){var t=e.aspect,o=e.shape,a=e.grid,r=e.quality,i=e.zoom,s=e.rotate,l=e.minZoom,c=e.maxZoom,u=e.modalTitle,y=e.modalWidth,p=e.modalOk,b=e.modalCancel,P=e.beforeCrop,S=e.children,V=e.cropperProps,z=i===!0,T=s===!0,A=Object(m.useState)(""),D=A[0],U=A[1],I=Object(m.useState)(1),E=I[0],v=I[1],G=Object(m.useState)(0),R=G[0],X=G[1],st=Object(m.useRef)(),Dt=Object(m.useRef)(),et=Object(m.useRef)(Mt),ct=Object(m.useRef)(Mt),It=Object(m.useRef)(),ue=Object(m.useCallback)(function(){var O=Array.isArray(S)?S[0]:S,w=O.props,B=w.beforeUpload,Y=w.accept,M=Object(Xt.a)(w,["beforeUpload","accept"]);return st.current=B,Object(Et.a)({},O,{props:Object(Et.a)({},M,{accept:Y||"image/*",beforeUpload:function(x,N){return new Promise(function(J,Z){if(P&&!P(x,N)){Z();return}Dt.current=x,et.current=J,ct.current=Z;var W=new FileReader;W.addEventListener("load",function(){U(W.result)}),W.readAsDataURL(x)})}})})},[P,S]),de=Object(m.useCallback)(function(O){It.current=O},[]),lt=E-F<l,ut=E+F>c,dt=R===_t,ht=R===Lt,he=Object(m.useCallback)(function(){lt||v(E-F)},[lt,E]),pe=Object(m.useCallback)(function(){ut||v(E+F)},[ut,E]),me=Object(m.useCallback)(function(){dt||X(R-at)},[dt,R]),fe=Object(m.useCallback)(function(){ht||X(R+at)},[ht,R]),ge=Object(m.useMemo)(function(){var O={width:y,okText:p,cancelText:b};return Object.keys(O).forEach(function(w){O[w]||delete O[w]}),O},[b,p,y]),pt=Object(m.useCallback)(function(){U(""),v(1),X(0)},[]),ve=Object(m.useCallback)(Object(bt.a)(Q.a.mark(function O(){var w,B,Y,M,_,x,N,J,Z,W,$,zt,Ut,Zt,Wt,ot,mt,Ht,Ft;return Q.a.wrap(function(ft){for(;;)switch(ft.prev=ft.next){case 0:pt(),w=document.querySelector("."+At),B=w.naturalWidth,Y=w.naturalHeight,M=document.createElement("canvas"),_=M.getContext("2d"),x=Math.sqrt(Math.pow(B,2)+Math.pow(Y,2)),M.width=x,M.height=x,T&&R>0&&R<360&&(N=x/2,_.translate(N,N),_.rotate(R*Math.PI/180),_.translate(-N,-N)),J=(x-B)/2,Z=(x-Y)/2,_.drawImage(w,J,Z),W=_.getImageData(0,0,x,x),$=It.current,zt=$.width,Ut=$.height,Zt=$.x,Wt=$.y,M.width=zt,M.height=Ut,_.putImageData(W,Math.round(-J-Zt),Math.round(-Z-Wt)),ot=Dt.current,mt=ot.type,Ht=ot.name,Ft=ot.uid,M.toBlob(function(){var ye=Object(bt.a)(Q.a.mark(function Vt(be){var L,j,gt,vt;return Q.a.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(L=new File([be],Ht,{type:mt}),L.uid=Ft,!(typeof st.current!="function")){f.next=4;break}return f.abrupt("return",et.current(L));case 4:if(j=st.current(L,[L]),!(typeof j!="boolean"&&!j)){f.next=8;break}return console.error("beforeUpload must return a boolean or Promise"),f.abrupt("return");case 8:if(!(j===!0)){f.next=10;break}return f.abrupt("return",et.current(L));case 10:if(!(j===!1)){f.next=12;break}return f.abrupt("return",ct.current("not upload"));case 12:if(!(j&&typeof j.then=="function")){f.next=25;break}return f.prev=13,f.next=16,j;case 16:gt=f.sent,vt=Object.prototype.toString.call(gt),(vt==="[object File]"||vt==="[object Blob]")&&(L=gt),et.current(L),f.next=25;break;case 22:f.prev=22,f.t0=f.catch(13),ct.current(f.t0);case 25:case"end":return f.stop()}},Vt,null,[[13,22]])}));return function(Vt){return ye.apply(this,arguments)}}(),mt,r);case 19:case"end":return ft.stop()}},O)})),[T,pt,r,R]),Nt=function(w){return g.a.createElement(g.a.Fragment,null,ue(),D&&g.a.createElement(ce.default,Object.assign({visible:!0,wrapClassName:H+"-modal",title:w,onOk:ve,onCancel:pt,maskClosable:!1,destroyOnClose:!0},ge),g.a.createElement(jt,{ref:n,src:D,aspect:t,shape:o,grid:a,hasZoom:z,zoomVal:E,rotateVal:R,setZoomVal:v,setRotateVal:X,minZoom:l,maxZoom:c,onComplete:de,cropperProps:V}),z&&g.a.createElement("div",{className:H+"-control zoom"},g.a.createElement("button",{onClick:he,disabled:lt},"\uFF0D"),g.a.createElement(Tt.a,{min:l,max:c,step:F,value:E,onChange:v}),g.a.createElement("button",{onClick:pe,disabled:ut},"\uFF0B")),T&&g.a.createElement("div",{className:H+"-control rotate"},g.a.createElement("button",{onClick:me,disabled:dt},"\u21BA"),g.a.createElement(Tt.a,{min:_t,max:Lt,step:at,value:R,onChange:X}),g.a.createElement("button",{onClick:fe,disabled:ht},"\u21BB"))))};return u?Nt(u):g.a.createElement(se.a,null,function(O,w){return Nt(w==="zh-cn"?"\u7F16\u8F91\u56FE\u7247":"Edit image")})});it.propTypes={aspect:h.a.number,shape:h.a.oneOf(["rect","round"]),grid:h.a.bool,quality:h.a.number,zoom:h.a.bool,rotate:h.a.bool,minZoom:h.a.number,maxZoom:h.a.number,modalTitle:h.a.string,modalWidth:h.a.oneOfType([h.a.number,h.a.string]),modalOk:h.a.string,modalCancel:h.a.string,beforeCrop:h.a.func,cropperProps:h.a.object,children:h.a.node},it.defaultProps={aspect:1,shape:"rect",grid:!1,quality:.4,zoom:!0,rotate:!1,minZoom:1,maxZoom:3};var ze=nt.default=it}}]);
