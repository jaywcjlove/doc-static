(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{"/wcJ":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("ERkP"),o=n.n(r),a=n("rAX/"),i=function(e){var t=e.children,n=e.hideOnTouch;return Object(r.useEffect)((function(){if(Object(a.a)()){for(var e=document.getElementById("touch-suppressible");e.firstChild;)e.removeChild(e.firstChild);if(n)return;var t=document.createElement("h4");t.textContent="Section best on a computer";var r=document.createElement("p");r.textContent="This part of the site does not run well on a touch-oriented browser. We recommend switching to a computer to carry on.",e.appendChild(t),e.appendChild(r)}}),[]),o.a.createElement("div",{id:"touch-suppressible"},t)}},"3yYM":function(e,t,n){n("LnO1"),n("3eMz"),n("p+GS"),n("AA1/"),n("yKDW"),n("dtAy"),n("cM8k"),n("yIC7"),n("r0id"),n("RwQI"),n("XjK0"),n("SCO9");var r=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(e,t,n,r){var o=t&&t.prototype instanceof f?t:f,a=Object.create(o.prototype),i=new C(r||[]);return a._invoke=function(e,t,n){var r=d;return function(o,a){if(r===p)throw new Error("Generator is already running");if(r===h){if("throw"===o)throw a;return O()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var c=k(i,n);if(c){if(c===m)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===d)throw r=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=p;var s=l(e,t,n);if("normal"===s.type){if(r=n.done?h:u,s.arg===m)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r=h,n.method="throw",n.arg=s.arg)}}}(e,n,i),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(r){return{type:"throw",arg:r}}}e.wrap=s;var d="suspendedStart",u="suspendedYield",p="executing",h="completed",m={};function f(){}function g(){}function y(){}var v={};v[a]=function(){return this};var b=Object.getPrototypeOf,w=b&&b(b(P([])));w&&w!==n&&r.call(w,a)&&(v=w);var x=y.prototype=f.prototype=Object.create(v);function E(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function S(e){var t;this._invoke=function(n,o){function a(){return new Promise((function(t,a){!function t(n,o,a,i){var c=l(e[n],e,o);if("throw"!==c.type){var s=c.arg,d=s.value;return d&&"object"==typeof d&&r.call(d,"__await")?Promise.resolve(d.__await).then((function(e){t("next",e,a,i)}),(function(e){t("throw",e,a,i)})):Promise.resolve(d).then((function(e){s.value=e,a(s)}),(function(e){return t("throw",e,a,i)}))}i(c.arg)}(n,o,t,a)}))}return t=t?t.then(a,a):a()}}function k(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,k(e,n),"throw"===n.method))return m;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var o=l(r,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,m;var a=o.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,m):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function P(e){if(e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function n(){for(;++o<e.length;)if(r.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return i.next=i}}return{next:O}}function O(){return{value:t,done:!0}}return g.prototype=x.constructor=y,y.constructor=g,y[c]=g.displayName="GeneratorFunction",e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,c in e||(e[c]="GeneratorFunction")),e.prototype=Object.create(x),e},e.awrap=function(e){return{__await:e}},E(S.prototype),S.prototype[i]=function(){return this},e.AsyncIterator=S,e.async=function(t,n,r,o){var a=new S(s(t,n,r,o));return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},E(x),x[c]="Generator",x[a]=function(){return this},x.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=P,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(T),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(r,o){return c.type="throw",c.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),l=r.call(i,"finallyLoc");if(s&&l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,m):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),T(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;T(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:P(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),m}},e}(e.exports);try{regeneratorRuntime=r}catch(o){Function("r","regeneratorRuntime = r")(r)}},"73Cn":function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("ERkP"),o=n("Wbzz"),a=function(e){var t=function(t){return e.active&&e.active.toLowerCase()===t?"active":""};return r.createElement("nav",{className:"navbar-sub dev-tools"},r.createElement("ul",{className:"nav"},r.createElement("li",{className:"name"},r.createElement("h3",null,"Developer Tools")),r.createElement("li",{style:{display:"none"}},r.createElement("a",{className:t("compiler api"),href:Object(o.withPrefix)("/dev/compiler")},"Compiler API")),r.createElement("li",null,r.createElement("a",{className:t("sandbox"),href:Object(o.withPrefix)("/dev/sandbox")},"Sandbox")),r.createElement("li",null,r.createElement("a",{className:t("twoslash"),href:Object(o.withPrefix)("/dev/twoslash")},"Twoslash")),r.createElement("li",null,r.createElement("a",{className:t("typescript vfs"),href:Object(o.withPrefix)("/dev/typescript-vfs")},"TypeScript VFS")),r.createElement("li",null,r.createElement("a",{className:t("playground plugins"),href:Object(o.withPrefix)("/dev/playground-plugins")},"Playground Plugins")),r.createElement("li",null,r.createElement("a",{className:t("bug workbench"),href:Object(o.withPrefix)("/dev/bug-workbench")},"Bug Workbench"))))}},VtSi:function(e,t,n){e.exports=n("3yYM")},"rAX/":function(e,t,n){"use strict";function r(){var e=!1;if("maxTouchPoints"in navigator)e=navigator.maxTouchPoints>0;else if("msMaxTouchPoints"in navigator)e=navigator.msMaxTouchPoints>0;else{var t="undefined"!=typeof window&&window.matchMedia&&matchMedia("(pointer:coarse)");if(t&&"(pointer:coarse)"===t.media)e=!!t.matches;else if("orientation"in window)e=!0;else{var n=navigator.userAgent;e=/\b(BlackBerry|webOS|iPhone|IEMobile)\b/i.test(n)||/\b(Android|Windows Phone|iPad|iPod)\b/i.test(n)}}return e}n.d(t,"a",(function(){return r}))},ywWb:function(e,t,n){"use strict";n.r(t),function(e){n.d(t,"query",(function(){return g}));n("yKDW"),n("dtAy");var r=n("VtSi"),o=n.n(r),a=(n("3yYM"),n("ERkP")),i=n.n(a),c=n("9Dj+"),s=n("Wbzz"),l=(n("pzji"),n("GO2c")),d=n("73Cn"),u=n("rAX/"),p=n("/wcJ");function h(e,t,n,r,o,a,i){try{var c=e[a](i),s=c.value}catch(l){return void n(l)}c.done?t(s):Promise.resolve(s).then(r,o)}var m=function(t){return Object(a.useEffect)((function(){if(!Object(u.a)()){var t=document.createElement("script");t.src=Object(s.withPrefix)("/js/vs.loader.js"),t.async=!0,t.onload=function(){var t=e.require;t.config({paths:{vs:"https://typescript.azureedge.net/cdn/3.7.3/monaco/min/vs",sandbox:Object(s.withPrefix)("/js/sandbox")},ignoreDuplicateModules:["vs/editor/editor.main"]}),t(["vs/editor/editor.main","vs/language/typescript/tsWorker","sandbox/index"],function(){var e,t=(e=o.a.mark((function e(t,n,r){var a,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t&&n&&r&&(null===(a=document.getElementById("loader").parentNode)||void 0===a||a.removeChild(document.getElementById("loader"))),document.getElementById("monaco-editor-embed").style.display="block",e.next=6,r.createTypeScriptSandbox({text:'import {markdown, danger} from "danger"\n\nexport default async function () {\n    // Check for new @types in devDependencies\n    const packageJSONDiff = await danger.git.JSONDiffForFile("package.json")\n    const newDeps = packageJSONDiff.devDependencies.added\n    const newTypesDeps = newDeps?.filter(d => d.includes("@types")) ?? []\n\n    if (newTypesDeps.length){\n        markdown("Added new types packages " + newTypesDeps.join(", "))\n    }\n}',compilerOptions:{},domID:"monaco-editor-embed",useJavaScript:!1},t,n);case 6:(i=e.sent).editor.focus(),setTimeout((function(){document.querySelectorAll(".html-code").forEach((function(e){i.monaco.editor.colorize(e.textContent||"","html",{tabSize:2}).then((function(t){e.innerHTML=t}))})),document.querySelectorAll(".ts-code").forEach((function(e){i.monaco.editor.colorize(e.textContent||"","typescript",{tabSize:2}).then((function(t){e.innerHTML=t}))}))}),300);case 9:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){h(a,r,o,i,c,"next",e)}function c(e){h(a,r,o,i,c,"throw",e)}i(void 0)}))});return function(e,n,r){return t.apply(this,arguments)}}())},document.body.appendChild(t)}}),[]),i.a.createElement(i.a.Fragment,null,i.a.createElement(c.a,{title:"Developers - Sandbox",description:"The TypeScript sandbox powers the TypeScript Playground. Learn how you can make your experiences like the playground using the sandbox.",lang:"en",allSitePage:t.data.allSitePage},i.a.createElement("div",{id:"dev"},i.a.createElement(d.a,{active:"sandbox"}),i.a.createElement("div",{className:"raised content main-content-block"},i.a.createElement("div",{className:"split-sixhundred"},i.a.createElement("h1",{style:{marginTop:"20px"}},"TypeScript Sandbox"),i.a.createElement("p",null,"A DOM library for interacting with TypeScript and JavaScript code, which powers the heart of the ",i.a.createElement("a",{href:Object(s.withPrefix)("/play/")},"TypeScript playground")),i.a.createElement("p",null,"You can use the TypeScript sandbox for:"),i.a.createElement("ul",null,i.a.createElement("li",null,"Building IDE-like experiences for people to explore your library's API"),i.a.createElement("li",null,"Building interactive web tools which use TypeScript, with a lot of the Playgrounds developer experience for free")),i.a.createElement("p",null,"For example, the sandbox to the side has grabbed the Types for ",i.a.createElement("a",{href:"https://danger.systems/js/"},"DangerJS")," with no modifications for this code sample. This is because the Playground's Automatic Type Acquisition is enabled by default. It will also look for the same parameters for code, and selection indexes inside the URL."),i.a.createElement("p",null,"Try clicking ",i.a.createElement("a",{href:"?q=1#code/PTAEBUAsFMGdtAYwPYFtXQHYBdagO7QBOCiJAhttACagCWmo2MEAngA7QDKZd72oAAoAbcqwDmRZAFdM1AFAhQ5OUxiNmCAKoAlADKhI5WJALGkydnRqhkAN2JNkahJmj5QuvfMVgodPAwVPBVWUHYpACtoRAFpWAZxNk4eIj4BWBVqACNkAA84JBVfUGhjOmEw+FUUagRyKVlabGcyxFNkTSJQHxRMWAEYYWFnAF5QACIACWhh5wB1ZCJhagn5PthkYWgAOhHxAAohkYBKIA"},"this URL")," to see that in action. "),i.a.createElement("p",null,"This library builds on top of the ",i.a.createElement("a",{href:"https://microsoft.github.io/monaco-editor/index.html"},"Monaco Editor"),", providing a higher level API but offering access to all the lower-level APIs via a single ",i.a.createElement("code",null,"sandbox")," object."),i.a.createElement("p",null,"You can find the code for the TypeScript Sandbox inside the ",i.a.createElement("a",{href:"https://github.com/microsoft/TypeScript-Website/tree/v2/packages/sandbox#typescript-sandbox"},"microsoft/TypeScript-Website")," mono-repo.")),i.a.createElement(p.a,{hideOnTouch:!0},i.a.createElement("div",{className:"sixhundred",style:{borderLeft:"1px solid gray"}},i.a.createElement("div",{id:"loader"},i.a.createElement("div",{className:"lds-grid"},i.a.createElement("div",null),i.a.createElement("div",null),i.a.createElement("div",null),i.a.createElement("div",null),i.a.createElement("div",null),i.a.createElement("div",null),i.a.createElement("div",null),i.a.createElement("div",null),i.a.createElement("div",null)),i.a.createElement("p",{id:"loading-message",role:"status"},"Downloading Sandbox...")),i.a.createElement("div",{style:{height:"400px",display:"none"},id:"monaco-editor-embed"})))),i.a.createElement("div",{className:"raised main-content-block"},i.a.createElement("h2",null,"Usage"),i.a.createElement("p",null,"A sandbox uses the same tools as monaco-editor, meaning this library is shipped as an AMD bundle which you can use the ",i.a.createElement("a",{href:"https://github.com/microsoft/vscode-loader/"},"VSCode Loader")," to ",i.a.createElement("code",null,"require"),"."),i.a.createElement("p",null,"Because we need it for the TypeScript website, you can use our hosted copy ",i.a.createElement("a",{href:"https://typescriptlang.org/v2/js/vs.loader.js",title:"Link to the JS for the visual studio require loader"},"here.")," (",i.a.createElement("em",null,"note"),", we will eventually deprecate the /v2/ in all routes)"),i.a.createElement("h3",null,"Get Started"),i.a.createElement("p",null,"Create a new file: ",i.a.createElement("code",null,"index.html")," and paste this code into that file."),i.a.createElement("pre",null,i.a.createElement("code",{className:"html-code"},"<!DOCTYPE html>\n<html lang=\"en\">\n  <head>\n    <meta charset=\"utf-8\" />\n  </head>\n  <div id=\"loader\">Loading...</div>\n  <div id=\"monaco-editor-embed\" style=\"height: 800px;\" />\n  <script>\n    // First set up the VSCode loader in a script tag\n    const getLoaderScript = document.createElement('script')\n    getLoaderScript.src = 'https://www.typescriptlang.org/v2/js/vs.loader.js'\n    getLoaderScript.async = true\n    getLoaderScript.onload = () => {\n      // Now the loader is ready, tell require where it can get the version of monaco, and the sandbox\n      // This version uses the latest version of the sandbox, which is used on the TypeScript website\n\n      // For the monaco version you can use unpkg or the TypeSCript web infra CDN\n      // You can see the available releases for TypeScript here:\n      // https://typescript.azureedge.net/indexes/releases.json\n      //\n      require.config({\n        paths: {\n          vs: 'https://typescript.azureedge.net/cdn/3.7.3/monaco/min/vs',\n          // vs: 'https://unpkg.com/@typescript-deploys/monaco-editor@3.7.3/min/vs',\n          sandbox: 'https://www.typescriptlang.org/v2/js/sandbox',\n        },\n        // This is something you need for monaco to work\n        ignoreDuplicateModules: ['vs/editor/editor.main'],\n      })\n\n      // Grab a copy of monaco, TypeScript and the sandbox\n      require(['vs/editor/editor.main', 'vs/language/typescript/tsWorker', 'sandbox/index'], (\n        main,\n        _tsWorker,\n        tsSandbox\n      ) => {\n        const initialCode = `import {markdown, danger} from \"danger\"\n\nexport default async function () {\n    // Check for new @types in devDependencies\n    const packageJSONDiff = await danger.git.JSONDiffForFile(\"package.json\")\n    const newDeps = packageJSONDiff.devDependencies.added\n    const newTypesDeps = newDeps?.filter(d => d.includes(\"@types\")) ?? []\n    if (newTypesDeps.length){\n        markdown(\"Added new types packages \" + newTypesDeps.join(\", \"))\n    }\n}\n`\n\n        const isOK = main && window.ts && sandbox\n        if (isOK) {\n          document.getElementById('loader').parentNode.removeChild(document.getElementById('loader'))\n        } else {\n          console.error('Could not get all the dependencies of sandbox set up!')\n          console.error('main', !!main, 'ts', !!window.ts, 'sandbox', !!sandbox)\n          return\n        }\n\n        // Create a sandbox and embed it into the the div #monaco-editor-embed\n        const sandboxConfig = {\n          text: initialCode,\n          compilerOptions: {},\n          domID: 'monaco-editor-embed',\n        }\n\n        tsSandbox.createTypeScriptSandbox(sandboxConfig, main, window.ts).then(sandbox => {\n          sandbox.editor.focus()\n        })\n      })\n    }\n\n    document.body.appendChild(getLoaderScript)\n  <\/script>\n</html>\n          ")),i.a.createElement("p",null,"Opening the file ",i.a.createElement("code",null,"index.html")," in a web browser will load up the same sandbox up at the top of the page."),i.a.createElement("h3",null,"Some examples of the API"),f.map((function(e){return i.a.createElement("div",{className:"split-code",key:e.blurb},i.a.createElement("p",null,e.blurb),i.a.createElement("pre",null,i.a.createElement("code",{className:"ts-code"},e.code.trim())))})),i.a.createElement("p",null,"The API is mainly a light shim over the ",i.a.createElement("a",{href:"https://microsoft.github.io/monaco-editor/api/index.html"},"monaco-editor API")," with the ",i.a.createElement("a",{href:"https://github.com/microsoft/monaco-typescript"},"monaco-typescript API"),".")))))};t.default=function(e){return i.a.createElement(l.a,{locale:"en"},i.a.createElement(m,e))};var f=[{blurb:"Converting the user's TypeScript into JavaScript",code:"const sandbox = await createTypeScriptSandbox(sandboxConfig, main, ts)\n\n// Async because it needs to go  \nconst js = await sandbox.getRunnableJS()\nconsole.log(js)"},{blurb:"Get the DTS for the user's editor",code:"const sandbox = await createTypeScriptSandbox(sandboxConfig, main, ts)\n\nconst dts = await sandbox.getDTSForCode()\nconsole.log(dts)"},{blurb:"Make a request for an LSP response",code:"const sandbox = await createTypeScriptSandbox(sandboxConfig, main, ts)\n\n// A worker here is a web-worker, set up by monaco-typescript\n// which does the computation in the background \nconst worker = await sandbox.getWorkerProcess()\nconst definitions =  await client.getDefinitionAtPosition(model.uri.toString(), 6)\n  "},{blurb:"Change compiler flags using a few different APIs",code:'const sandbox = await createTypeScriptSandbox(sandboxConfig, main, ts)\n\n// Hook in to all changes to the compiler\nsandbox.setDidUpdateCompilerSettings((newOptions) => {\n  console.log("Compiler settings changed: ", newOptions)\n})\n\n// Update via key value\nsandbox.updateCompilerSetting("allowJs", true)\n// Update via an object\nsandbox.updateCompilerSettings({ jsx: 0 })\n// Replace the compiler settings\nsandbox.setCompilerSettings({})\n'},{blurb:"Highlight some code in the editor",code:"const sandbox = await createTypeScriptSandbox(sandboxConfig, main, ts)\n\nconst start = {\n  lineNumber: 0,\n  column: 0\n}\n\nconst end = {\n  lineNumber: 0,\n  column: 4\n}\n\nconst decorations = sandbox.editor.deltaDecorations([], [\n  {\n    range: new sandbox.monaco.Range(start.lineNumber, start.column, end.lineNumber, end.column),\n    options: { inlineClassName: 'error-highlight' },\n  },\n])\n"}],g="1744953029"}.call(this,n("fRV1"))}}]);
//# sourceMappingURL=component---src-pages-dev-sandbox-tsx-a99839518eca7869ae7a.js.map