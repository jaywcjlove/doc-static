{
  "id": "errors/NG3003",
  "title": "NG3003: Import cycles would need to be created to compile this component\n\n编译此组件时需要创建循环导入",
  "contents": "<div class=\"github-links\">\n  <a href=\"https://github.com/angular/angular-cn/edit/cn/aio/content/errors/NG3003.md?message=docs(...)%3A%20请简述你的修改...\" aria-label=\"提供编辑建议\" title=\"提供编辑建议\"><i class=\"material-icons\" aria-hidden=\"true\" role=\"img\">mode_edit</i></a>\n</div>\n\n<div class=\"content\">\n\n  <h1 id=\"ng3003-import-cycles-would-need-to-be-created-to-compile-this-component编译此组件时需要创建循环导入\">NG3003: Import cycles would need to be created to compile this component\n\n编译此组件时需要创建循环导入<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"errors/NG3003#ng3003-import-cycles-would-need-to-be-created-to-compile-this-component编译此组件时需要创建循环导入\"><i class=\"material-icons\">link</i></a></h1>\n\n  \n  \n\n  <div class=\"error-description\">\n    <h2 translation-result=\"on\" id=\"说明\">说明<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"errors/NG3003#说明\"><i class=\"material-icons\">link</i></a></h2>\n  <h2 translation-origin=\"off\" id=\"description\">Description<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"errors/NG3003#description\"><i class=\"material-icons\">link</i></a></h2>\n    <p>A component, directive, or pipe that is referenced by this component would require the compiler to add an import that would lead to a cycle of imports.\nFor example, consider a scenario where a <code>ParentComponent</code> references a <code>ChildComponent</code> in its template:</p>\n<p>该组件引用的组件、指令或管道将要求编译器添加某个导入，而这将导致循环导入。比如，考虑一个场景，其中 <code>ParentComponent</code> 在其模板中引用了 <code>ChildComponent</code></p>\n<code-example header=\"parent.component.ts\" path=\"errors/cyclic-imports/parent.component.ts\">\nimport { <a href=\"api/core/Component\" class=\"code-anchor\">Component</a> } from '@angular/core';\n\n@<a href=\"api/core/Component\" class=\"code-anchor\">Component</a>({selector: 'app-parent', template: '&#x3C;app-child>&#x3C;/app-child>'})\nexport class ParentComponent {}\n\n\n</code-example>\n<code-example header=\"child.component.ts\" path=\"errors/cyclic-imports/child.component.ts\">\nimport { <a href=\"api/core/Component\" class=\"code-anchor\">Component</a> } from '@angular/core';\nimport { ParentComponent } from './parent.component';\n\n@<a href=\"api/core/Component\" class=\"code-anchor\">Component</a>({selector: 'app-child', template: 'The child!'})\nexport class ChildComponent {\n  constructor(private parent: ParentComponent) {}\n}\n\n\n</code-example>\n<p>There is already an import from <code>child.component.ts</code> to <code>parent.component.ts</code> since the <code>ChildComponent</code> references the <code>ParentComponent</code> in its constructor.</p>\n<p>由于 <code>ChildComponent</code> 在其构造函数中引用了 <code>ParentComponent</code>，因此已经有一个从 <code>child.component.ts</code> 到 <code>parent.component.ts</code> 的导入。</p>\n<div class=\"alert is-helpful\">\n<p><strong>NOTE</strong>: <br>\nThe parent component's template contains <code>&#x3C;child>&#x3C;/child></code>.\nThe generated code for this template must therefore contain a reference to the <code>ChildComponent</code> class.\nIn order to make this reference, the compiler would have to add an import from <code>parent.component.ts</code> to <code>child.component.ts</code>, which would cause an import cycle:</p>\n<p><strong>注意</strong>：<br>\n父组件的模板中包含 <code>&#x3C;child>&#x3C;/child></code>。因此，该模板的生成后代码必须包含对 <code>ChildComponent</code> 类的引用。而为了进行此引用，编译器必须将来自 <code>parent.component.ts</code> 的导入添加到 <code>child.component.ts</code> 中，这将导致循环导入：</p>\n<code-example format=\"none\" language=\"none\">\n\nparent.component.ts -> child.component.ts -> parent.component.ts\n\n</code-example>\n</div>\n<h3 id=\"remote-scoping\">Remote Scoping<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"errors/NG3003#remote-scoping\"><i class=\"material-icons\">link</i></a></h3>\n<h3 id=\"远程作用域\">远程作用域<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"errors/NG3003#远程作用域\"><i class=\"material-icons\">link</i></a></h3>\n<p>To avoid adding imports that create cycles, additional code is added to the <code><a href=\"api/core/NgModule\" class=\"code-anchor\">NgModule</a></code> class where the component that wires up the dependencies is declared.\nThis is known as \"remote scoping\".</p>\n<p>为了避免添加会导致循环的导入，可以将一些额外代码添加到 <code><a href=\"api/core/NgModule\" class=\"code-anchor\">NgModule</a></code> 类中，在该类中声明联系依赖关系的组件。这称为“远程作用域”。</p>\n<h3 id=\"libraries\">Libraries<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"errors/NG3003#libraries\"><i class=\"material-icons\">link</i></a></h3>\n<h3 id=\"库\">库<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"errors/NG3003#库\"><i class=\"material-icons\">link</i></a></h3>\n<p>Unfortunately, \"remote scoping\" code is side-effectful —which prevents tree shaking— and cannot be used in libraries.\nSo when building libraries using the <code>\"compilationMode\": \"partial\"</code> setting, any component that would require a cyclic import will cause this <code>NG3003</code> compiler error to be raised.</p>\n<p>不幸的是，“远程作用域”代码有副作用，它会阻止摇树优化，并且不能在库中使用。因此，当使用 <code>\"compilationMode\": \"partial\"</code> 设置来构建库时，任何需要循环导入的组件都将引发此 <code>NG3003</code> 编译器错误。</p>\n\n  </div>\n\n  <br>\n\n  <div class=\"debugging\">\n    <h2 translation-result=\"on\" id=\"如何排除本错误\">如何排除本错误<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"errors/NG3003#如何排除本错误\"><i class=\"material-icons\">link</i></a></h2>\n  <h2 translation-origin=\"off\" id=\"debugging-the-error\">Debugging the error<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"errors/NG3003#debugging-the-error\"><i class=\"material-icons\">link</i></a></h2>\n    <p>The cycle that would be generated is shown as part of the error message.\nFor example:</p>\n<p>这种循环会显示为错误消息的一部分。比如：</p>\n<code-example hidecopy=\"true\">\n\nThe component ChildComponent is used in the template but importing it would create a cycle:\n/parent.component.ts -> /child.component.ts -> /parent.component.ts\n\n</code-example>\n<p>Use this to identify how the referenced component, pipe, or directive has a dependency back to the component being compiled.\nHere are some ideas for fixing the problem:</p>\n<p>使用它来确定所引用的组件、管道或指令是如何反向依赖要编译的组件的。以下是一些解决问题的方法：</p>\n<ul>\n<li>\n<p>Try to rearrange your dependencies to avoid the cycle.\nFor example, using an intermediate interface that is stored in an independent file that can be imported to both dependent files without causing an import cycle.</p>\n<p>尝试重新安排你的依赖关系，以避免循环。比如，使用存储在独立文件中的中间接口，可以将该文件导入两个相关文件中而不会导致循环导入。</p>\n</li>\n<li>\n<p>Move the classes that reference each other into the same file, to avoid any imports between them.</p>\n<p>把相互引用的类移入同一个文件中，以避免它们相互导入。</p>\n</li>\n<li>\n<p>Convert import statements to type-only imports (using <code>import type</code> syntax) if the imported declarations are only used as types, as type-only imports do not contribute to cycles.</p>\n<p>将相互引用的类移到同一文件中，以避免它们之间的任何导入。</p>\n</li>\n</ul>\n\n  </div>\n</div>\n\n<!-- links to this doc:\n - errors\n-->\n<!-- links from this doc:\n - api/core/Component\n - api/core/NgModule\n - errors/NG3003#debugging-the-error\n - errors/NG3003#description\n - errors/NG3003#libraries\n - errors/NG3003#ng3003-import-cycles-would-need-to-be-created-to-compile-this-component编译此组件时需要创建循环导入\n - errors/NG3003#remote-scoping\n - errors/NG3003#如何排除本错误\n - errors/NG3003#库\n - errors/NG3003#说明\n - errors/NG3003#远程作用域\n - https://github.com/angular/angular-cn/edit/cn/aio/content/errors/NG3003.md?message=docs(...)%3A%20请简述你的修改...\n-->"
}