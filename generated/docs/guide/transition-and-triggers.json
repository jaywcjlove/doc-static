{
  "id": "guide/transition-and-triggers",
  "title": "Animations transitions and triggers",
  "contents": "\n\n\n  <div class=\"github-links\">\n    <a href=\"https://github.com/angular/angular-cn/edit/aio/aio/content/guide/transition-and-triggers.md?message=docs%3A%20请简述你的修改...\" aria-label=\"提供编辑建议\" title=\"提供编辑建议\"><i class=\"material-icons\" aria-hidden=\"true\" role=\"img\">mode_edit</i></a>\n  </div>\n\n\n<div class=\"content\">\n<h1 id=\"animations-transitions-and-triggers\" translation-result=\"on\">动画转场与触发器<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/transition-and-triggers#animations-transitions-and-triggers\"><i class=\"material-icons\">link</i></a></h1><h1 translation-origin=\"off\" id=\"animations-transitions-and-triggers\">Animations transitions and triggers<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/transition-and-triggers#animations-transitions-and-triggers\"><i class=\"material-icons\">link</i></a></h1>\n\n<p translation-result=\"on\">你已经在<a href=\"guide/animations\">简介</a>页学习了 Angular 动画的基础知识。</p><p translation-origin=\"off\">You learned the basics of Angular animations in the <a href=\"guide/animations\">introduction</a> page.</p>\n\n<p translation-result=\"on\">本章将深入讲解特殊的转场状态，如 <code>*</code>（通配符）和 <code>void</code>，并说明这些特殊状态如何作用于进入或离开视图的元素。本章还探讨了多重触发器、动画回调，以及使用关键帧技术的序列动画。</p><p translation-origin=\"off\">This guide goes into greater depth on special transition states such as <code>*</code> (wildcard) and <code>void</code>, and show how these special states are used for elements entering and leaving a view.\nThis chapter also explores multiple animation triggers, animation callbacks, and sequence-based animation using keyframes.</p>\n\n<h2 id=\"predefined-states-and-wildcard-matching\" translation-result=\"on\">预定义状态与通配符匹配<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/transition-and-triggers#predefined-states-and-wildcard-matching\"><i class=\"material-icons\">link</i></a></h2><h2 translation-origin=\"off\" id=\"predefined-states-and-wildcard-matching\">Predefined states and wildcard matching<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/transition-and-triggers#predefined-states-and-wildcard-matching\"><i class=\"material-icons\">link</i></a></h2>\n\n<p translation-result=\"on\">在 Angular 中，转场状态可以通过 <code><a href=\"api/animations/state\" class=\"code-anchor\">state</a>()</code> 函数进行显式定义，或使用预定义的 <code>*</code>（通配符）状态和 <code>void</code> 状态。</p><p translation-origin=\"off\">In Angular, transition states can be defined explicitly through the <code><a href=\"api/animations/state\" class=\"code-anchor\">state</a>()</code> function, or using the predefined <code>*</code> (wildcard) and <code>void</code> states.</p>\n\n<h3 id=\"wildcard-state\" translation-result=\"on\">通配符状态<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/transition-and-triggers#wildcard-state\"><i class=\"material-icons\">link</i></a></h3><h3 translation-origin=\"off\" id=\"wildcard-state\">Wildcard state<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/transition-and-triggers#wildcard-state\"><i class=\"material-icons\">link</i></a></h3>\n\n<p translation-result=\"on\">星号 <code>*</code> 或者叫<em>通配符</em>可以匹配任何一个动画状态。它可用来定义那些不用在乎 HTML 元素的起始状态或结束状态的转场动画。</p><p translation-origin=\"off\">An asterisk <code>*</code> or <em>wildcard</em> matches any animation state. This is useful for defining transitions that apply regardless of the HTML element's start or end state.</p>\n\n<p translation-result=\"on\">比如，一个 <code>open => *</code> 转场可应用在当元素的状态从 <code>open</code> 变成任何其它状态时。</p><p translation-origin=\"off\">For example, a transition of <code>open => *</code> applies when the element's state changes from open to anything else.</p>\n\n<div class=\"lightbox\">\n  <img src=\"generated/images/guide/animations/wildcard-state-500.png\" alt=\"wildcard state expressions\" width=\"500\" height=\"229\">\n</div>\n<p translation-result=\"on\">下面是通配符状态的另一个代码范例，以及我们以前使用 <code>open</code> 和 <code>closed</code> 状态的实例。但这次，对于每个状态到状态的转换对，我们这次规定从任何状态转场到 <code>closed</code> 状态时要花 1 秒钟，而从任何状态转场到 <code>open</code> 状态时要花 0.5 秒。</p><p translation-origin=\"off\">The following is another code sample using the wildcard state together with the previous example using the <code>open</code> and <code>closed</code> states.\nInstead of defining each state-to-state transition pair, any transition to <code>closed</code> takes 1 second, and any transition to <code>open</code> takes 0.5 seconds.</p>\n\n<p translation-result=\"on\">这让我们可以添加新状态，而不必把它手动包含到每个单独的转场中。</p><p translation-origin=\"off\">This allows us to add new states without having to include separate transitions for each one.</p>\n\n<code-example header=\"src/app/open-close.component.ts\" path=\"animations/src/app/open-close.component.ts\" region=\"trigger-wildcard1\" language=\"typescript\">\nanimations: [\n  <a href=\"api/animations/trigger\" class=\"code-anchor\">trigger</a>('openClose', [\n    // ...\n    <a href=\"api/animations/state\" class=\"code-anchor\">state</a>('open', <a href=\"api/animations/style\" class=\"code-anchor\">style</a>({\n      height: '200px',\n      opacity: 1,\n      backgroundColor: 'yellow'\n    })),\n    <a href=\"api/animations/state\" class=\"code-anchor\">state</a>('closed', <a href=\"api/animations/style\" class=\"code-anchor\">style</a>({\n      height: '100px',\n      opacity: 0.5,\n      backgroundColor: 'green'\n    })),\n    <a href=\"api/animations/transition\" class=\"code-anchor\">transition</a>('* => closed', [\n      <a href=\"api/animations/animate\" class=\"code-anchor\">animate</a>('1s')\n    ]),\n    <a href=\"api/animations/transition\" class=\"code-anchor\">transition</a>('* => open', [\n      <a href=\"api/animations/animate\" class=\"code-anchor\">animate</a>('0.5s')\n    ]),\n  ]),\n],\n\n</code-example>\n<p translation-result=\"on\">使用双向箭头语法可以指定任意方向的状态转场。</p><p translation-origin=\"off\">Use a double arrow syntax to specify state-to-state transitions in both directions.</p>\n\n<code-example header=\"src/app/open-close.component.ts\" path=\"animations/src/app/open-close.component.ts\" region=\"trigger-wildcard2\" language=\"typescript\">\n<a href=\"api/animations/transition\" class=\"code-anchor\">transition</a>('open &#x3C;=> closed', [\n  <a href=\"api/animations/animate\" class=\"code-anchor\">animate</a>('0.5s')\n]),\n\n</code-example>\n<h3 id=\"using-wildcard-state-with-multiple-transition-states\" translation-result=\"on\">使用带多个转场状态的通配符状态<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/transition-and-triggers#using-wildcard-state-with-multiple-transition-states\"><i class=\"material-icons\">link</i></a></h3><h3 translation-origin=\"off\" id=\"using-wildcard-state-with-multiple-transition-states\">Using wildcard state with multiple transition states<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/transition-and-triggers#using-wildcard-state-with-multiple-transition-states\"><i class=\"material-icons\">link</i></a></h3>\n\n<p translation-result=\"on\">在这个双态按钮的例子中，通配符不是很有用，因为只有两种可能的状态：<code>open</code> 和 <code>closed</code>。当一个特定状态下的元素可能变更为多个潜在状态时，通配符状态会更好用。如果我们的按钮可以从 <code>open</code> 变成 <code>closed</code> 或类似 <code>inProgress</code> 的状态，则可以使用通配符状态来减少所需的编码量。</p><p translation-origin=\"off\">In the two-state button example, the wildcard isn't that useful because there are only two possible states, <code>open</code> and <code>closed</code>.\nWildcard states are better when an element in one particular state has multiple potential states that it can change to.\nIf the button can change from <code>open</code> to either <code>closed</code> or something like <code>inProgress</code>, using a wildcard state could reduce the amount of coding needed.</p>\n\n<div class=\"lightbox\">\n  <img src=\"generated/images/guide/animations/wildcard-3-states.png\" alt=\"wildcard state with 3 states\" width=\"600\" height=\"426\">\n</div>\n<code-example path=\"animations/src/app/open-close.component.ts\" header=\"src/app/open-close.component.ts\" region=\"trigger-transition\" language=\"typescript\">\nanimations: [\n  <a href=\"api/animations/trigger\" class=\"code-anchor\">trigger</a>('openClose', [\n    // ...\n    <a href=\"api/animations/state\" class=\"code-anchor\">state</a>('open', <a href=\"api/animations/style\" class=\"code-anchor\">style</a>({\n      height: '200px',\n      opacity: 1,\n      backgroundColor: 'yellow'\n    })),\n    <a href=\"api/animations/state\" class=\"code-anchor\">state</a>('closed', <a href=\"api/animations/style\" class=\"code-anchor\">style</a>({\n      height: '100px',\n      opacity: 0.5,\n      backgroundColor: 'green'\n    })),\n    <a href=\"api/animations/transition\" class=\"code-anchor\">transition</a>('open => closed', [\n      <a href=\"api/animations/animate\" class=\"code-anchor\">animate</a>('1s')\n    ]),\n    <a href=\"api/animations/transition\" class=\"code-anchor\">transition</a>('closed => open', [\n      <a href=\"api/animations/animate\" class=\"code-anchor\">animate</a>('0.5s')\n    ]),\n    <a href=\"api/animations/transition\" class=\"code-anchor\">transition</a>('* => closed', [\n      <a href=\"api/animations/animate\" class=\"code-anchor\">animate</a>('1s')\n    ]),\n    <a href=\"api/animations/transition\" class=\"code-anchor\">transition</a>('* => open', [\n      <a href=\"api/animations/animate\" class=\"code-anchor\">animate</a>('0.5s')\n    ]),\n    <a href=\"api/animations/transition\" class=\"code-anchor\">transition</a>('open &#x3C;=> closed', [\n      <a href=\"api/animations/animate\" class=\"code-anchor\">animate</a>('0.5s')\n    ]),\n    <a href=\"api/animations/transition\" class=\"code-anchor\">transition</a> ('* => open', [\n      <a href=\"api/animations/animate\" class=\"code-anchor\">animate</a> ('1s',\n        <a href=\"api/animations/style\" class=\"code-anchor\">style</a> ({ opacity: '*' }),\n      ),\n    ]),\n    <a href=\"api/animations/transition\" class=\"code-anchor\">transition</a>('* => *', [\n      <a href=\"api/animations/animate\" class=\"code-anchor\">animate</a>('1s')\n    ]),\n\n</code-example>\n<p translation-result=\"on\">当在<em>任意</em>两个状态之间切换时，<code>* => *</code> 转场都会生效。</p><p translation-origin=\"off\">The <code>* => *</code> transition applies when any change between two states takes place.</p>\n\n<p translation-result=\"on\">转场会按照其定义的顺序进行匹配。因此，你可以在 <code>* => *</code> 转场的前面定义其它转场。比如，定义只针对 <code>open => closed</code> 的状态变更或动画，或 <code>closed => open</code>，而使用 <code>* => *</code> 作为匹配不上其它状态对时的后备。</p><p translation-origin=\"off\">Transitions are matched in the order in which they are defined. Thus, you can apply other transitions on top of the <code>* => *</code> (any-to-any) transition. For example, define style changes or animations that would apply just to <code>open => closed</code>, or just to <code>closed => open</code>, and then use <code>* => *</code> as a fallback for state pairings that aren't otherwise called out.</p>\n\n<p translation-result=\"on\">要这么做，只要把那些更特殊的转场放在 <code>* => *</code> <em>前面</em>就行了。</p><p translation-origin=\"off\">To do this, list the more specific transitions <em>before</em> <code>* => *</code>.</p>\n\n<h3 id=\"using-wildcards-with-styles\" translation-result=\"on\">使用带样式的通配符状态<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/transition-and-triggers#using-wildcards-with-styles\"><i class=\"material-icons\">link</i></a></h3><h3 translation-origin=\"off\" id=\"using-wildcards-with-styles\">Using wildcards with styles<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/transition-and-triggers#using-wildcards-with-styles\"><i class=\"material-icons\">link</i></a></h3>\n\n<p translation-result=\"on\">使用带样式的 <code>*</code> 通配符来告诉动画使用当前的状态值，并用它进行动画处理。通配符是一个后备值，如果未在触发器中声明动画状态，就会使用这个值。</p><p translation-origin=\"off\">Use the wildcard <code>*</code> with a style to tell the animation to use whatever the current style value is, and animate with that. Wildcard is a fallback value that's used if the state being animated isn't declared within the trigger.</p>\n\n<code-example path=\"animations/src/app/open-close.component.ts\" header=\"src/app/open-close.component.ts\" region=\"transition4\" language=\"typescript\">\n<a href=\"api/animations/transition\" class=\"code-anchor\">transition</a> ('* => open', [\n  <a href=\"api/animations/animate\" class=\"code-anchor\">animate</a> ('1s',\n    <a href=\"api/animations/style\" class=\"code-anchor\">style</a> ({ opacity: '*' }),\n  ),\n]),\n\n</code-example>\n<h3 id=\"void-state\" translation-result=\"on\"><code>void</code> 状态<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/transition-and-triggers#void-state\"><i class=\"material-icons\">link</i></a></h3><h3 translation-origin=\"off\" id=\"void-state\">Void state<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/transition-and-triggers#void-state\"><i class=\"material-icons\">link</i></a></h3>\n\n<p translation-result=\"on\">你可以使用 <code>void</code> 状态来为进入或离开页面的元素配置转场。参见<a href=\"guide/transition-and-triggers#enter-leave-view\">进入和离开视图的动画</a>。</p><p translation-origin=\"off\">You can use the <code>void</code> state to configure transitions for an element that is entering or leaving a page. See <a href=\"guide/transition-and-triggers#enter-leave-view\">Animating entering and leaving a view</a>.</p>\n\n<h3 id=\"combining-wildcard-and-void-states\" translation-result=\"on\">组合使用通配符和 <code>void</code> 状态<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/transition-and-triggers#combining-wildcard-and-void-states\"><i class=\"material-icons\">link</i></a></h3><h3 translation-origin=\"off\" id=\"combining-wildcard-and-void-states\">Combining wildcard and void states<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/transition-and-triggers#combining-wildcard-and-void-states\"><i class=\"material-icons\">link</i></a></h3>\n\n<p translation-result=\"on\">你可以在转场中组合使用通配符和 <code>void</code> 状态，以触发那些进入和离开页面的动画：</p><p translation-origin=\"off\">You can combine wildcard and void states in a transition to trigger animations that enter and leave the page:</p>\n\n<ul>\n<li>\n<p translation-result=\"on\">当元素离开视图时，就会触发 <code>* => void</code> 转场，而不管它离开前处于什么状态。</p><p translation-origin=\"off\">A transition of <code>* => void</code> applies when the element leaves a view, regardless of what state it was in before it left.</p>\n\n</li>\n<li>\n<p translation-result=\"on\">当元素进入视图时，就会触发 <code>void => *</code> 转场，而不管它进入时处于什么状态。</p><p translation-origin=\"off\">A transition of <code>void => *</code> applies when the element enters a view, regardless of what state it assumes when entering.</p>\n\n</li>\n<li>\n<p translation-result=\"on\">通配符状态 <code>*</code> 会匹配<em>任何</em>状态 —— 包括 <code>void</code>。</p><p translation-origin=\"off\">The wildcard state <code>*</code> matches to <em>any</em> state, including <code>void</code>.</p>\n\n</li>\n</ul>\n<h2 id=\"animating-entering-and-leaving-a-view\" translation-result=\"on\">播放进入和离开视图时的动画<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/transition-and-triggers#animating-entering-and-leaving-a-view\"><i class=\"material-icons\">link</i></a></h2><h2 translation-origin=\"off\" id=\"animating-entering-and-leaving-a-view\">Animating entering and leaving a view<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/transition-and-triggers#animating-entering-and-leaving-a-view\"><i class=\"material-icons\">link</i></a></h2>\n\n<p translation-result=\"on\">本节介绍如何为进入和离开页面的元素设置动画。</p><p translation-origin=\"off\">This section shows how to animate elements entering or leaving a page.</p>\n\n<div class=\"alert is-helpful\">\n<p translation-result=\"on\"><strong>注意：</strong>出于我们的目的，我们把元素进入或离开视图等价于从 DOM 中插入或删除。</p><p translation-origin=\"off\"><strong>Note:</strong> For this example, an element entering or leaving a view is equivalent to being inserted or removed from the DOM.</p>\n\n</div>\n<p translation-result=\"on\">现在，我们要添加一些新的行为：</p><p translation-origin=\"off\">Now add a new behavior:</p>\n\n<ul>\n<li>\n<p translation-result=\"on\">当你把一个英雄添加到英雄列表中时，它看起来是从左侧飞进页面的。</p><p translation-origin=\"off\">When you add a hero to the list of heroes, it appears to fly onto the page from the left.</p>\n\n</li>\n<li>\n<p translation-result=\"on\">当你从列表中移除一个英雄时，它看起来是从右侧飞出去的。</p><p translation-origin=\"off\">When you remove a hero from the list, it appears to fly out to the right.</p>\n\n</li>\n</ul>\n<code-example path=\"animations/src/app/hero-list-enter-leave.component.ts\" header=\"src/app/hero-list-enter-leave.component.ts\" region=\"animationdef\" language=\"typescript\">\nanimations: [\n  <a href=\"api/animations/trigger\" class=\"code-anchor\">trigger</a>('flyInOut', [\n    <a href=\"api/animations/state\" class=\"code-anchor\">state</a>('in', <a href=\"api/animations/style\" class=\"code-anchor\">style</a>({ transform: 'translateX(0)' })),\n    <a href=\"api/animations/transition\" class=\"code-anchor\">transition</a>('void => *', [\n      <a href=\"api/animations/style\" class=\"code-anchor\">style</a>({ transform: 'translateX(-100%)' }),\n      <a href=\"api/animations/animate\" class=\"code-anchor\">animate</a>(100)\n    ]),\n    <a href=\"api/animations/transition\" class=\"code-anchor\">transition</a>('* => void', [\n      <a href=\"api/animations/animate\" class=\"code-anchor\">animate</a>(100, <a href=\"api/animations/style\" class=\"code-anchor\">style</a>({ transform: 'translateX(100%)' }))\n    ])\n  ])\n]\n\n</code-example>\n<p translation-result=\"on\">在上述代码中，当 HTML 元素没有附着在视图中时，我们就会应用 <code>void</code> 状态。</p><p translation-origin=\"off\">In the above code, you applied the <code>void</code> state when the HTML element isn't attached to a view.</p>\n\n<a id=\"enter-leave-view\"></a>\n<h2 id=\"enter-and-leave-aliases\" translation-result=\"on\">:enter 和 :leave 别名<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/transition-and-triggers#enter-and-leave-aliases\"><i class=\"material-icons\">link</i></a></h2><h2 translation-origin=\"off\" id=\"enter-and-leave-aliases\">:enter and :leave aliases<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/transition-and-triggers#enter-and-leave-aliases\"><i class=\"material-icons\">link</i></a></h2>\n\n<p translation-result=\"on\"><code>:enter</code> 和 <code>:leave</code> 分别是 <code>void => *</code> 和 <code>* => void</code> 的别名。\n这些别名供多个动画函数使用。</p><p translation-origin=\"off\"><code>:enter</code> and <code>:leave</code> are aliases for the <code>void => *</code> and <code>* => void</code> transitions. These aliases are used by several animation functions.</p>\n\n<code-example hidecopy=\"\" language=\"typescript\">\n<a href=\"api/animations/transition\" class=\"code-anchor\">transition</a> ( ':enter', [ ... ] );  // alias for void => *\n<a href=\"api/animations/transition\" class=\"code-anchor\">transition</a> ( ':leave', [ ... ] );  // alias for * => void\n</code-example>\n<p translation-result=\"on\">定位进入视图的元素更难，因为它不在 DOM  中。\n因此，使用别名 <code>:enter</code> 和 <code>:leave</code> 来定位要从视图中插入或删除的 HTML 元素。</p><p translation-origin=\"off\">It's harder to target an element that is entering a view because it isn't in the DOM yet.\nSo, use the aliases <code>:enter</code> and <code>:leave</code> to target HTML elements that are inserted or removed from a view.</p>\n\n<h3 id=\"use-of-ngif-and-ngfor-with-enter-and-leave\" translation-result=\"on\">和 <code>:enter</code> 与 <code>:leave</code> 一起使用 <code>*<a href=\"api/common/NgIf\" class=\"code-anchor\">ngIf</a></code> 和 <code>*<a href=\"api/common/NgForOf\" class=\"code-anchor\">ngFor</a></code><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/transition-and-triggers#use-of-ngif-and-ngfor-with-enter-and-leave\"><i class=\"material-icons\">link</i></a></h3><h3 translation-origin=\"off\" id=\"use-of-ngif-and-ngfor-with-enter-and-leave\">Use of *ngIf and *ngFor with :enter and :leave<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/transition-and-triggers#use-of-ngif-and-ngfor-with-enter-and-leave\"><i class=\"material-icons\">link</i></a></h3>\n\n<p translation-result=\"on\">当任何 <code>*<a href=\"api/common/NgIf\" class=\"code-anchor\">ngIf</a></code> 或 <code>*<a href=\"api/common/NgForOf\" class=\"code-anchor\">ngFor</a></code> 中的视图放进页面中时，会运行 <code>:enter</code> 转场；当移除这些视图时，就会运行 <code>:leave</code> 转场。</p><p translation-origin=\"off\">The <code>:enter</code> transition runs when any <code>*<a href=\"api/common/NgIf\" class=\"code-anchor\">ngIf</a></code> or <code>*<a href=\"api/common/NgForOf\" class=\"code-anchor\">ngFor</a></code> views are placed on the page, and <code>:leave</code> runs when those views are removed from the page.</p>\n\n<p translation-result=\"on\">本例子中有一个名叫 <code>myInsertRemoveTrigger</code> 的触发器，来表示进入和离开动画。\n其 HTML 模板包含下列代码。</p><p translation-origin=\"off\">This example has a special trigger for the enter and leave animation called <code>myInsertRemoveTrigger</code>. The HTML template contains the following code.</p>\n\n<code-example path=\"animations/src/app/insert-remove.component.html\" header=\"src/app/insert-remove.component.html\" region=\"insert-remove\" language=\"typescript\">\n&#x3C;div @myInsertRemoveTrigger *<a href=\"api/common/NgIf\" class=\"code-anchor\">ngIf</a>=\"isShown\" class=\"insert-remove-container\">\n  &#x3C;p>The box is inserted&#x3C;/p>\n&#x3C;/div>\n\n</code-example>\n<p translation-result=\"on\">在组件文件中，<code>:enter</code> 转场会将初始透明度设置为 0，然后设置动画，当该元素已经插入视图中之后，把这个透明度设置为 1。</p><p translation-origin=\"off\">In the component file, the <code>:enter</code> transition sets an initial opacity of 0, and then animates it to change that opacity to 1 as the element is inserted into the view.</p>\n\n<code-example path=\"animations/src/app/insert-remove.component.ts\" header=\"src/app/insert-remove.component.ts\" region=\"enter-leave-trigger\" language=\"typescript\">\n<a href=\"api/animations/trigger\" class=\"code-anchor\">trigger</a>('myInsertRemoveTrigger', [\n  <a href=\"api/animations/transition\" class=\"code-anchor\">transition</a>(':enter', [\n    <a href=\"api/animations/style\" class=\"code-anchor\">style</a>({ opacity: 0 }),\n    <a href=\"api/animations/animate\" class=\"code-anchor\">animate</a>('100ms', <a href=\"api/animations/style\" class=\"code-anchor\">style</a>({ opacity: 1 })),\n  ]),\n  <a href=\"api/animations/transition\" class=\"code-anchor\">transition</a>(':leave', [\n    <a href=\"api/animations/animate\" class=\"code-anchor\">animate</a>('100ms', <a href=\"api/animations/style\" class=\"code-anchor\">style</a>({ opacity: 0 }))\n  ])\n]),\n\n</code-example>\n<p translation-result=\"on\">注意，这个例子并不需要使用 <code><a href=\"api/animations/state\" class=\"code-anchor\">state</a>()</code>。</p><p translation-origin=\"off\">Note that this example doesn't need to use <code><a href=\"api/animations/state\" class=\"code-anchor\">state</a>()</code>.</p>\n\n<h2 id=\"increment-and-decrement-in-transitions\" translation-result=\"on\">转场中的 <code>:increment</code> 和 <code>:decrement</code><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/transition-and-triggers#increment-and-decrement-in-transitions\"><i class=\"material-icons\">link</i></a></h2><h2 translation-origin=\"off\" id=\"increment-and-decrement-in-transitions\">:increment and :decrement in transitions<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/transition-and-triggers#increment-and-decrement-in-transitions\"><i class=\"material-icons\">link</i></a></h2>\n\n<p translation-result=\"on\"><code><a href=\"api/animations/transition\" class=\"code-anchor\">transition</a>()</code> 函数还能接受额外的选择器值：<code>:increment</code> 和 <code>:decrement</code>。当数值增加或减小时，使用这些来启动转场。</p><p translation-origin=\"off\">The <code><a href=\"api/animations/transition\" class=\"code-anchor\">transition</a>()</code> function takes additional selector values, <code>:increment</code> and <code>:decrement</code>. Use these to kick off a transition when a numeric value has increased or decreased in value.</p>\n\n<div class=\"alert is-helpful\">\n<p translation-result=\"on\"><strong>注意：</strong>下面的例子使用 <code><a href=\"api/animations/query\" class=\"code-anchor\">query</a>()</code> 和 <code><a href=\"api/animations/stagger\" class=\"code-anchor\">stagger</a>()</code> 方法，它们会在<a href=\"guide/complex-animation-sequences#complex-sequence\">复杂序列</a>中讨论。</p><p translation-origin=\"off\"><strong>Note:</strong> The following example uses <code><a href=\"api/animations/query\" class=\"code-anchor\">query</a>()</code> and <code><a href=\"api/animations/stagger\" class=\"code-anchor\">stagger</a>()</code> methods, which is discussed in the <a href=\"guide/complex-animation-sequences#complex-sequence\">complex sequences</a> page.</p>\n\n</div>\n<code-example path=\"animations/src/app/hero-list-page.component.ts\" header=\"src/app/hero-list-page.component.ts\" region=\"increment\" language=\"typescript\">\n<a href=\"api/animations/trigger\" class=\"code-anchor\">trigger</a>('filterAnimation', [\n  <a href=\"api/animations/transition\" class=\"code-anchor\">transition</a>(':enter, * => 0, * => -1', []),\n  <a href=\"api/animations/transition\" class=\"code-anchor\">transition</a>(':increment', [\n    <a href=\"api/animations/query\" class=\"code-anchor\">query</a>(':enter', [\n      <a href=\"api/animations/style\" class=\"code-anchor\">style</a>({ opacity: 0, width: '0px' }),\n      <a href=\"api/animations/stagger\" class=\"code-anchor\">stagger</a>(50, [\n        <a href=\"api/animations/animate\" class=\"code-anchor\">animate</a>('300ms ease-out', <a href=\"api/animations/style\" class=\"code-anchor\">style</a>({ opacity: 1, width: '*' })),\n      ]),\n    ], { optional: true })\n  ]),\n  <a href=\"api/animations/transition\" class=\"code-anchor\">transition</a>(':decrement', [\n    <a href=\"api/animations/query\" class=\"code-anchor\">query</a>(':leave', [\n      <a href=\"api/animations/stagger\" class=\"code-anchor\">stagger</a>(50, [\n        <a href=\"api/animations/animate\" class=\"code-anchor\">animate</a>('300ms ease-out', <a href=\"api/animations/style\" class=\"code-anchor\">style</a>({ opacity: 0, width: '0px' })),\n      ]),\n    ])\n  ]),\n]),\n\n</code-example>\n<h2 id=\"boolean-values-in-transitions\" translation-result=\"on\">转场中的逻辑值<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/transition-and-triggers#boolean-values-in-transitions\"><i class=\"material-icons\">link</i></a></h2><h2 translation-origin=\"off\" id=\"boolean-values-in-transitions\">Boolean values in transitions<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/transition-and-triggers#boolean-values-in-transitions\"><i class=\"material-icons\">link</i></a></h2>\n\n<p translation-result=\"on\">如果某个触发器以逻辑型的值作为绑定值，那么就可以使用能与 <code>true</code> 和 <code>false</code> 或 <code>1</code> 和 <code>0</code> 相比较的 <code><a href=\"api/animations/transition\" class=\"code-anchor\">transition</a>()</code> 表达式来匹配这个值。</p><p translation-origin=\"off\">If a trigger contains a boolean value as a binding value, then this value can be matched using a <code><a href=\"api/animations/transition\" class=\"code-anchor\">transition</a>()</code> expression that compares <code>true</code> and <code>false</code>, or <code>1</code> and <code>0</code>.</p>\n\n<code-example path=\"animations/src/app/open-close.component.2.html\" header=\"src/app/open-close.component.html\" region=\"trigger-boolean\">\n&#x3C;div [@openClose]=\"isOpen ? true : false\" class=\"open-close-container\">\n&#x3C;/div>\n\n</code-example>\n<p translation-result=\"on\">在上述代码片段中，HTML 模板将 <code>&#x3C;div></code> 元素绑定到名为 <code>openClose</code> 的触发器，其状态表达式是 <code>isOpen</code>，可能的值为 <code>true</code> 和 <code>false</code>。这种方式可以代替创建两个命名状态 <code>open</code> 和 <code>close</code> 的方式。</p><p translation-origin=\"off\">In the code snippet above, the HTML template binds a <code>&#x3C;div></code> element to a trigger named <code>openClose</code> with a status expression of <code>isOpen</code>, and with possible values of <code>true</code> and <code>false</code>. This is an alternative to the practice of creating two named states of <code>open</code> and <code>close</code>.</p>\n\n<p translation-result=\"on\">在组件代码中，<code>@<a href=\"api/core/Component\" class=\"code-anchor\">Component</a></code> 元数据下的 <code>animations:</code> 属性中，当该状态求值为 <code>true</code> 时（这里表示 \"open\"），相关 HTML 元素的高度值为通配符样式 <code>*</code> 或某个默认值。在这种情况下，它会使用此元素开始动画前的现有高度。当该元素是 \"closed\" 时，它的高度会从指定的高度运动到 0，这会让它不可见。</p><p translation-origin=\"off\">In the component code, in the <code>@<a href=\"api/core/Component\" class=\"code-anchor\">Component</a></code> metadata under the <code>animations:</code> property, when the state evaluates to <code>true</code> (meaning \"open\" here), the associated HTML element's height is a wildcard style or default. In this case, use whatever height the element already had before the animation started. When the element is \"closed,\" the element animates to a height of 0, which makes it invisible.</p>\n\n<code-example path=\"animations/src/app/open-close.component.2.ts\" header=\"src/app/open-close.component.ts\" region=\"trigger-boolean\" language=\"typescript\">\nanimations: [\n  <a href=\"api/animations/trigger\" class=\"code-anchor\">trigger</a>('openClose', [\n    <a href=\"api/animations/state\" class=\"code-anchor\">state</a>('true', <a href=\"api/animations/style\" class=\"code-anchor\">style</a>({ height: '*' })),\n    <a href=\"api/animations/state\" class=\"code-anchor\">state</a>('false', <a href=\"api/animations/style\" class=\"code-anchor\">style</a>({ height: '0px' })),\n    <a href=\"api/animations/transition\" class=\"code-anchor\">transition</a>('false &#x3C;=> true', <a href=\"api/animations/animate\" class=\"code-anchor\">animate</a>(500))\n  ])\n],\n\n</code-example>\n<h2 id=\"multiple-animation-triggers\" translation-result=\"on\">多重动画触发器<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/transition-and-triggers#multiple-animation-triggers\"><i class=\"material-icons\">link</i></a></h2><h2 translation-origin=\"off\" id=\"multiple-animation-triggers\">Multiple animation triggers<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/transition-and-triggers#multiple-animation-triggers\"><i class=\"material-icons\">link</i></a></h2>\n\n<p translation-result=\"on\">你可以为组件定义多个动画触发器并将这些动画触发器附着到不同的元素上，这些元素之间的父子关系会影响动画的运行方式和时机。</p><p translation-origin=\"off\">You can define more than one animation trigger for a component. You can attach animation triggers to different elements, and the parent-child relationships among the elements affect how and when the animations run.</p>\n\n<h3 id=\"parent-child-animations\" translation-result=\"on\">父-子动画<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/transition-and-triggers#parent-child-animations\"><i class=\"material-icons\">link</i></a></h3><h3 translation-origin=\"off\" id=\"parent-child-animations\">Parent-child animations<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/transition-and-triggers#parent-child-animations\"><i class=\"material-icons\">link</i></a></h3>\n\n<p translation-result=\"on\">每次在 Angular 中触发动画时，父动画始终会优先，而子动画会被阻塞。为了运行子动画，父动画必须查询出包含子动画的每个元素，然后使用 <a href=\"api/animations/animateChild\"><code>animateChild()</code></a> 函数来运行它们。</p><p translation-origin=\"off\">Each time an animation is triggered in Angular, the parent animation always get priority and child animations are blocked. In order for a child animation to run, the parent animation must query each of the elements containing child animations and then allow the animations to run using the <a href=\"api/animations/animateChild\"><code>animateChild()</code></a> function.</p>\n\n<h4 id=\"disabling-an-animation-on-an-html-element\" translation-result=\"on\">在某个 HTML 元素上禁用动画<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/transition-and-triggers#disabling-an-animation-on-an-html-element\"><i class=\"material-icons\">link</i></a></h4><h4 translation-origin=\"off\" id=\"disabling-an-animation-on-an-html-element\">Disabling an animation on an HTML element<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/transition-and-triggers#disabling-an-animation-on-an-html-element\"><i class=\"material-icons\">link</i></a></h4>\n\n<p translation-result=\"on\">可以把一个名叫 <code>@.disabled</code> 的动画控制绑定放在 HTML 元素上，以禁用该元素及其子元素上的动画。当 <code>@.disabled</code> 绑定为 <code>true</code> 时，就会禁止渲染所有动画。</p><p translation-origin=\"off\">A special animation control binding called <code>@.disabled</code> can be placed on an HTML element to disable animations on that element, as well as any nested elements. When true, the <code>@.disabled</code> binding prevents all animations from rendering.</p>\n\n<p translation-result=\"on\">下面的代码范例展示了如何使用此特性。</p><p translation-origin=\"off\">The code sample below shows how to use this feature.</p>\n\n<code-tabs>\n\n<code-pane path=\"animations/src/app/open-close.component.4.html\" header=\"src/app/open-close.component.html\" region=\"toggle-animation\">\n&#x3C;div [@.disabled]=\"isDisabled\">\n  &#x3C;div [@childAnimation]=\"isOpen ? 'open' : 'closed'\"\n    class=\"open-close-container\">\n    &#x3C;p>The box is now {{ isOpen ? 'Open' : 'Closed' }}!&#x3C;/p>\n  &#x3C;/div>\n&#x3C;/div>\n\n</code-pane>\n\n<code-pane path=\"animations/src/app/open-close.component.4.ts\" header=\"src/app/open-close.component.ts\" region=\"toggle-animation\" language=\"typescript\">\n@<a href=\"api/core/Component\" class=\"code-anchor\">Component</a>({\n  animations: [\n    <a href=\"api/animations/trigger\" class=\"code-anchor\">trigger</a>('childAnimation', [\n      // ...\n    ]),\n  ],\n})\nexport class OpenCloseChildComponent {\n  isDisabled = false;\n  isOpen = false;\n}\n\n</code-pane>\n\n</code-tabs>\n<p translation-result=\"on\">当 <code>@.disabled</code> 绑定为 <code>true</code> 时，<code>@childAnimation</code> 触发器就不会启动。</p><p translation-origin=\"off\">When the <code>@.disabled</code> binding is true, the <code>@childAnimation</code> trigger doesn't kick off.</p>\n\n<p translation-result=\"on\">当 HTML 模板中的某个元素使用 <code>@.disabled</code> 禁止了动画时，也会同时禁止其所有内部元素的动画。你无法有选择的单独禁用单个元素上的多个动画。</p><p translation-origin=\"off\">When an element within an HTML template has animations disabled using the <code>@.disabled</code> host binding, animations are disabled on all inner elements as well.\nYou can't selectively disable multiple animations on a single element.</p>\n\n<p translation-result=\"on\">不过，选择性的子动画仍然可以用如下方式之一在已禁用的父元素上运行：</p><p translation-origin=\"off\">However, selective child animations can still be run on a disabled parent in one of the following ways:</p>\n\n<ul>\n<li>\n<p translation-result=\"on\">  父动画可以使用 <a href=\"api/animations/query\"><code>query()</code></a> 函数来收集 HTML 模板中位于禁止动画区域内部的元素。这些元素仍然可以播放动画。</p><p translation-origin=\"off\">A parent animation can use the <a href=\"api/animations/query\"><code>query()</code></a> function to collect inner elements located in disabled areas of the HTML template.\nThose elements can still animate.</p>\n\n</li>\n<li>\n<p translation-result=\"on\">子动画可以被父动画查询，并且稍后使用 <code><a href=\"api/animations/animateChild\" class=\"code-anchor\">animateChild</a>()</code> 来播放它。</p><p translation-origin=\"off\">A subanimation can be queried by a parent and then later animated with the <code><a href=\"api/animations/animateChild\" class=\"code-anchor\">animateChild</a>()</code> function.</p>\n\n</li>\n</ul>\n<h4 id=\"disabling-all-animations\" translation-result=\"on\">禁用所有动画<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/transition-and-triggers#disabling-all-animations\"><i class=\"material-icons\">link</i></a></h4><h4 translation-origin=\"off\" id=\"disabling-all-animations\">Disabling all animations<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/transition-and-triggers#disabling-all-animations\"><i class=\"material-icons\">link</i></a></h4>\n\n<p translation-result=\"on\">要禁用 Angular 应用中的所有动画，只要把 <code>@.disabled</code> 绑定放在顶层的 Angular 组件上即可。</p><p translation-origin=\"off\">To disable all animations for an Angular app, place the <code>@.disabled</code> host binding on the topmost Angular component.</p>\n\n<code-example path=\"animations/src/app/app.component.ts\" header=\"src/app/app.component.ts\" region=\"toggle-app-animations\" language=\"typescript\">\n@<a href=\"api/core/Component\" class=\"code-anchor\">Component</a>({\n  selector: 'app-root',\n  templateUrl: 'app.component.html',\n  styleUrls: ['app.component.css'],\n  animations: [\n    slideInAnimation\n    // <a href=\"api/animations/animation\" class=\"code-anchor\">animation</a> triggers go here\n  ]\n})\nexport class AppComponent {\n  @<a href=\"api/core/HostBinding\" class=\"code-anchor\">HostBinding</a>('@.disabled')\n  public animationsDisabled = false;\n}\n\n</code-example>\n<div class=\"alert is-helpful\">\n<p translation-result=\"on\"><strong>注意：</strong>禁用应用级的动画在端到端（E2E）测试中是很有用的。</p><p translation-origin=\"off\"><strong>Note:</strong> Disabling animations application-wide is useful during end-to-end (E2E) testing.</p>\n\n</div>\n<h2 id=\"animation-callbacks\" translation-result=\"on\">动画回调<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/transition-and-triggers#animation-callbacks\"><i class=\"material-icons\">link</i></a></h2><h2 translation-origin=\"off\" id=\"animation-callbacks\">Animation callbacks<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/transition-and-triggers#animation-callbacks\"><i class=\"material-icons\">link</i></a></h2>\n\n<p translation-result=\"on\">当动画启动和终止时，<code><a href=\"api/animations/trigger\" class=\"code-anchor\">trigger</a>()</code> 函数会发出一些<em>回调</em>。在下面的例子中，我们有一个包含 <code>openClose</code> 触发器的组件。</p><p translation-origin=\"off\">The animation <code><a href=\"api/animations/trigger\" class=\"code-anchor\">trigger</a>()</code> function emits <em>callbacks</em> when it starts and when it finishes. The example below features a component that contains an <code>openClose</code> trigger.</p>\n\n<code-example path=\"animations/src/app/open-close.component.ts\" header=\"src/app/open-close.component.ts\" region=\"events1\" language=\"typescript\">\n@<a href=\"api/core/Component\" class=\"code-anchor\">Component</a>({\n  selector: 'app-open-close',\n  animations: [\n    <a href=\"api/animations/trigger\" class=\"code-anchor\">trigger</a>('openClose', [\n      // ...\n    ]),\n  ],\n  templateUrl: 'open-close.component.html',\n  styleUrls: ['open-close.component.css']\n})\nexport class OpenCloseComponent {\n  onAnimationEvent ( event: <a href=\"api/animations/AnimationEvent\" class=\"code-anchor\">AnimationEvent</a> ) {\n  }\n}\n\n\n</code-example>\n<p translation-result=\"on\">在 HTML 模板中，动画事件可以通过 <code>$event</code> 传递回来，比如 <code>@trigger.start</code> 和 <code>@trigger.done</code>，这里的 <code><a href=\"api/animations/trigger\" class=\"code-anchor\">trigger</a></code> 表示所使用的触发器名字。在我们的例子中，<code>openClose</code> 触发器将会是这样的：</p><p translation-origin=\"off\">In the HTML template, the animation event is passed back via <code>$event</code>, as <code>@trigger.start</code> and <code>@trigger.done</code>, where <code><a href=\"api/animations/trigger\" class=\"code-anchor\">trigger</a></code> is the name of the trigger being used.\nIn this example, the trigger <code>openClose</code> appears as follows.</p>\n\n<code-example path=\"animations/src/app/open-close.component.3.html\" header=\"src/app/open-close.component.html\" region=\"callbacks\">\n  &#x3C;div [@openClose]=\"isOpen ? 'open' : 'closed'\"\n    (@openClose.start)=\"onAnimationEvent($event)\"\n    (@openClose.done)=\"onAnimationEvent($event)\"\n    class=\"open-close-container\">\n&#x3C;/div>\n\n</code-example>\n<p translation-result=\"on\">动画回调的潜在用途之一，是用来覆盖比较慢的 API 调用，比如查阅数据库。例如，你可以建立一个 <strong>InProgress</strong> 按钮，让它拥有自己的循环动画。当后端系统操作完成时，它会播放脉动效果或其它一些视觉动作。</p><p translation-origin=\"off\">A potential use for animation callbacks could be to cover for a slow API call, such as a database lookup.\nFor example, you could set up the <strong>InProgress</strong> button to have its own looping animation where it pulsates or does some other visual motion while the backend system operation finishes.</p>\n\n<p translation-result=\"on\">然后，在当前动画结束时，可以调用另一个动画。比如，当 API 调用完成时，按钮会从 <code>inProgress</code> 状态编程 <code>closed</code> 状态。</p><p translation-origin=\"off\">Then, another animation can be called when the current animation finishes.\nFor example, the button goes from the <code>inProgress</code> state to the <code>closed</code> state when the API call is completed.</p>\n\n<p translation-result=\"on\">动画可以影响最终用户，让他<em>觉得</em>操作更快 —— 虽然并没有。因此，简单的动画是保持用户满意的一种经济有效的手段，而不必寻求提高服务器调用的速度或被迫补救那些你无法控制的情况，比如不可靠的网络连接。</p><p translation-origin=\"off\">An animation can influence an end user to <em>perceive</em> the operation as faster, even when it isn't.\nThus, a simple animation can be a cost-effective way to keep users happy, rather than seeking to improve the speed of a server call and having to compensate for circumstances beyond your control, such as an unreliable network connection.</p>\n\n<p translation-result=\"on\">回调可以作为调试工具，例如与 <code>console.warn()</code> 结合使用，以便在浏览器的开发者控制台中查看应用的进度。下列代码片段为我们原始的双态按钮（<code>open</code> 与 <code>closed</code>）范例创建了控制台输出。</p><p translation-origin=\"off\">Callbacks can serve as a debugging tool, for example in conjunction with <code>console.warn()</code> to view the application's progress in a browser's Developer JavaScript Console.\nThe following code snippet creates console log output for the original example, a button with the two states of <code>open</code> and <code>closed</code>.</p>\n\n<code-example path=\"animations/src/app/open-close.component.ts\" header=\"src/app/open-close.component.ts\" region=\"events\" language=\"typescript\">\nexport class OpenCloseComponent {\n  onAnimationEvent ( event: <a href=\"api/animations/AnimationEvent\" class=\"code-anchor\">AnimationEvent</a> ) {\n    // openClose is <a href=\"api/animations/trigger\" class=\"code-anchor\">trigger</a> name in this example\n    console.warn(`Animation Trigger: ${event.triggerName}`);\n\n    // phaseName is start or done\n    console.warn(`Phase: ${event.phaseName}`);\n\n    // in our example, totalTime is 1000 or 1 second\n    console.warn(`Total time: ${event.totalTime}`);\n\n    // in our example, fromState is either open or closed\n    console.warn(`From: ${event.fromState}`);\n\n    // in our example, toState either open or closed\n    console.warn(`To: ${event.toState}`);\n\n    // the HTML element itself, the button in this case\n    console.warn(`Element: ${event.element}`);\n  }\n}\n\n\n</code-example>\n<a id=\"keyframes\"></a>\n<h2 id=\"keyframes\" translation-result=\"on\">关键帧动画<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/transition-and-triggers#keyframes\"><i class=\"material-icons\">link</i></a></h2><h2 translation-origin=\"off\" id=\"keyframes\">Keyframes<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/transition-and-triggers#keyframes\"><i class=\"material-icons\">link</i></a></h2>\n\n<p translation-result=\"on\">前一节是简单的双态转场。现在，我们要使用<em>关键帧动画</em>创建一个具有多个顺序执行步骤的动画。</p><p translation-origin=\"off\">The previous section features a simple two-state transition. Now create an animation with multiple steps run in sequence using <em>keyframes</em>.</p>\n\n<p translation-result=\"on\">Angular 的 <code>keyframe()</code> 函数类似于 CSS 中的关键帧。关键帧允许在单个时间段内进行多种样式更改。例如，我们的按钮可以在单个的 2 秒时间段内多次改变颜色，而不是渐隐掉。</p><p translation-origin=\"off\">Angular's <code>keyframe()</code> function is similar to keyframes in CSS. Keyframes allow several style changes within a single timing segment.\nFor example, the button, instead of fading, could change color several times over a single 2-second timespan.</p>\n\n<div class=\"lightbox\">\n  <img src=\"generated/images/guide/animations/keyframes-500.png\" alt=\"keyframes\" width=\"500\" height=\"244\">\n</div>\n<p translation-result=\"on\">这些更改颜色的代码如下所示：</p><p translation-origin=\"off\">The code for this color change might look like this.</p>\n\n<code-example path=\"animations/src/app/status-slider.component.ts\" header=\"src/app/status-slider.component.ts\" region=\"keyframes\" language=\"typescript\">\n<a href=\"api/animations/transition\" class=\"code-anchor\">transition</a>('* => active', [\n  <a href=\"api/animations/animate\" class=\"code-anchor\">animate</a>('2s', <a href=\"api/animations/keyframes\" class=\"code-anchor\">keyframes</a>([\n    <a href=\"api/animations/style\" class=\"code-anchor\">style</a>({ backgroundColor: 'blue' }),\n    <a href=\"api/animations/style\" class=\"code-anchor\">style</a>({ backgroundColor: 'red' }),\n    <a href=\"api/animations/style\" class=\"code-anchor\">style</a>({ backgroundColor: 'orange' })\n  ]))\n\n</code-example>\n<h3 id=\"offset\" translation-result=\"on\">偏移<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/transition-and-triggers#offset\"><i class=\"material-icons\">link</i></a></h3><h3 translation-origin=\"off\" id=\"offset\">Offset<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/transition-and-triggers#offset\"><i class=\"material-icons\">link</i></a></h3>\n\n<p translation-result=\"on\">关键帧包括一个用来定义动画中每个样式何时开始更改的<em>偏移（offset）</em>属性。偏移是个 0 到 1 之间的相对值，分别标记动画的开始和结束时间，并且只要使用了它，就要同样应用于这个关键帧的每个步骤。</p><p translation-origin=\"off\">Keyframes include an <em>offset</em> that defines the point in the animation where each style change occurs.\nOffsets are relative measures from zero to one, marking the beginning and end of the animation, respectively and should be applied to each of the keyframe's steps if used at least once.</p>\n\n<p translation-result=\"on\">定义关键帧的偏移量是可选的。如果省略它们，就会自动分配均匀间隔的偏移。例如，三个没有预定义偏移的关键帧会分别使用 0、0.5、1 作为偏移。在上面的例子中，还可以为中间的转场指定偏移量 0.8。代码如下：</p><p translation-origin=\"off\">Defining offsets for keyframes is optional.\nIf you omit them, evenly spaced offsets are automatically assigned.\nFor example, three keyframes without predefined offsets receive offsets of 0, 0.5, and 1.\nSpecifying an offset of 0.8 for the middle transition in the above example might look like this.</p>\n\n<div class=\"lightbox\">\n  <img src=\"generated/images/guide/animations/keyframes-offset-500.png\" alt=\"keyframes with offset\" width=\"500\" height=\"247\">\n</div>\n<p translation-result=\"on\">带有指定偏移量的代码如下：</p><p translation-origin=\"off\">The code with offsets specified would be as follows.</p>\n\n<code-example path=\"animations/src/app/status-slider.component.ts\" header=\"src/app/status-slider.component.ts\" region=\"keyframesWithOffsets\" language=\"typescript\">\n<a href=\"api/animations/transition\" class=\"code-anchor\">transition</a>('* => active', [\n  <a href=\"api/animations/animate\" class=\"code-anchor\">animate</a>('2s', <a href=\"api/animations/keyframes\" class=\"code-anchor\">keyframes</a>([\n    <a href=\"api/animations/style\" class=\"code-anchor\">style</a>({ backgroundColor: 'blue', offset: 0}),\n    <a href=\"api/animations/style\" class=\"code-anchor\">style</a>({ backgroundColor: 'red', offset: 0.8}),\n    <a href=\"api/animations/style\" class=\"code-anchor\">style</a>({ backgroundColor: 'orange', offset: 1.0})\n  ])),\n]),\n<a href=\"api/animations/transition\" class=\"code-anchor\">transition</a>('* => inactive', [\n  <a href=\"api/animations/animate\" class=\"code-anchor\">animate</a>('2s', <a href=\"api/animations/keyframes\" class=\"code-anchor\">keyframes</a>([\n    <a href=\"api/animations/style\" class=\"code-anchor\">style</a>({ backgroundColor: 'orange', offset: 0}),\n    <a href=\"api/animations/style\" class=\"code-anchor\">style</a>({ backgroundColor: 'red', offset: 0.2}),\n    <a href=\"api/animations/style\" class=\"code-anchor\">style</a>({ backgroundColor: 'blue', offset: 1.0})\n  ]))\n]),\n\n</code-example>\n<p translation-result=\"on\">你可以在单个动画中组合使用 <code>duration</code>、<code>delay</code> 和 <code>easing</code> 来定义关键帧。</p><p translation-origin=\"off\">You can combine keyframes with <code>duration</code>, <code>delay</code>, and <code>easing</code> within a single animation.</p>\n\n<h3 id=\"keyframes-with-a-pulsation\" translation-result=\"on\">带脉动效果的关键帧<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/transition-and-triggers#keyframes-with-a-pulsation\"><i class=\"material-icons\">link</i></a></h3><h3 translation-origin=\"off\" id=\"keyframes-with-a-pulsation\">Keyframes with a pulsation<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/transition-and-triggers#keyframes-with-a-pulsation\"><i class=\"material-icons\">link</i></a></h3>\n\n<p translation-result=\"on\">通过在整个动画中定义特定偏移处的样式，可以使用关键帧在动画中创建脉动效果。</p><p translation-origin=\"off\">Use keyframes to create a pulse effect in your animations by defining styles at specific offset throughout the animation.</p>\n\n<p translation-result=\"on\">下面是使用关键帧创建脉动效果的例子：</p><p translation-origin=\"off\">Here's an example of using keyframes to create a pulse effect:</p>\n\n<ul>\n<li>\n<p translation-result=\"on\">原始的 <code>open</code> 和 <code>closed</code> 状态（包括其原始的高度、颜色和透明度）会在一秒钟内逐渐发生变化。</p><p translation-origin=\"off\">The original <code>open</code> and <code>closed</code> states, with the original changes in height, color, and opacity, occurring over a timeframe of 1 second.</p>\n\n</li>\n<li>\n<p translation-result=\"on\">插在中间的关键帧序列会导致该按钮在一秒钟内出现不规则的脉动。</p><p translation-origin=\"off\">A keyframes sequence inserted in the middle that causes the button to appear to pulsate irregularly over the course of that same 1-second timeframe.</p>\n\n</li>\n</ul>\n<div class=\"lightbox\">\n  <img src=\"generated/images/guide/animations/keyframes-pulsation.png\" alt=\"keyframes with irregular pulsation\" width=\"600\" height=\"312\">\n</div>\n<p translation-result=\"on\">此动画的代码片段是这样的：</p><p translation-origin=\"off\">The code snippet for this animation might look like this.</p>\n\n<code-example path=\"animations/src/app/open-close.component.1.ts\" header=\"src/app/open-close.component.ts\" region=\"trigger\" language=\"typescript\">\n<a href=\"api/animations/trigger\" class=\"code-anchor\">trigger</a>('openClose', [\n  <a href=\"api/animations/state\" class=\"code-anchor\">state</a>('open', <a href=\"api/animations/style\" class=\"code-anchor\">style</a>({\n    height: '200px',\n    opacity: 1,\n    backgroundColor: 'yellow'\n  })),\n  <a href=\"api/animations/state\" class=\"code-anchor\">state</a>('close', <a href=\"api/animations/style\" class=\"code-anchor\">style</a>({\n    height: '100px',\n    opacity: 0.5,\n    backgroundColor: 'green'\n  })),\n  // ...\n  <a href=\"api/animations/transition\" class=\"code-anchor\">transition</a>('* => *', [\n    <a href=\"api/animations/animate\" class=\"code-anchor\">animate</a>('1s', <a href=\"api/animations/keyframes\" class=\"code-anchor\">keyframes</a> ( [\n      <a href=\"api/animations/style\" class=\"code-anchor\">style</a>({ opacity: 0.1, offset: 0.1 }),\n      <a href=\"api/animations/style\" class=\"code-anchor\">style</a>({ opacity: 0.6, offset: 0.2 }),\n      <a href=\"api/animations/style\" class=\"code-anchor\">style</a>({ opacity: 1,   offset: 0.5 }),\n      <a href=\"api/animations/style\" class=\"code-anchor\">style</a>({ opacity: 0.2, offset: 0.7 })\n    ]))\n  ])\n])\n\n</code-example>\n<h3 id=\"animatable-properties-and-units\" translation-result=\"on\">可动的属性与单位<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/transition-and-triggers#animatable-properties-and-units\"><i class=\"material-icons\">link</i></a></h3><h3 translation-origin=\"off\" id=\"animatable-properties-and-units\">Animatable properties and units<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/transition-and-triggers#animatable-properties-and-units\"><i class=\"material-icons\">link</i></a></h3>\n\n<p translation-result=\"on\">Angular 的动画支持是基于 Web 动画的，所以你可以动浏览器认为可动（animatable）的任意属性。包括位置、大小、变形、颜色、边框等。W3C 在 <a href=\"https://www.w3.org/TR/css-transitions-1/\">CSS 转场</a>页也维护了一个可动属性的列表。</p><p translation-origin=\"off\">Angular's animation support builds on top of web animations, so you can animate any property that the browser considers animatable.\nThis includes positions, sizes, transforms, colors, borders, and more. The W3C maintains a list of animatable properties on its <a href=\"https://www.w3.org/TR/css-transitions-1/\">CSS Transitions</a> page.</p>\n\n<p translation-result=\"on\">对于带有数值的位置属性，可以把值作为字符串（别忘了带引号）并使用适当的后缀来定义其单位：</p><p translation-origin=\"off\">For positional properties with a numeric value, define a unit by providing the value as a string, in quotes, with the appropriate suffix:</p>\n\n<ul>\n<li>\n<p translation-result=\"on\">50 像素：<code>'50px'</code></p><p translation-origin=\"off\">50 pixels: <code>'50px'</code></p>\n\n</li>\n<li>\n<p translation-result=\"on\">相对字体大小：<code>'3em'</code></p><p translation-origin=\"off\">Relative font size: <code>'3em'</code></p>\n\n</li>\n<li>\n<p translation-result=\"on\">百分比：<code>'100%'</code></p><p translation-origin=\"off\">Percentage: <code>'100%'</code></p>\n\n</li>\n</ul>\n<p translation-result=\"on\">如果在指定尺寸时未提供单位，则 Angular 将使用默认单位像素（px）。把 50 像素表示为 <code>50</code> 和 <code>'50px'</code> 是一样的。</p><p translation-origin=\"off\">If you don't provide a unit when specifying dimension, Angular assumes a default unit of pixels, or px.\nExpressing 50 pixels as <code>50</code> is the same as saying <code>'50px'</code>.</p>\n\n<h3 id=\"automatic-property-calculation-with-wildcards\" translation-result=\"on\">使用通配符自动计算属性<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/transition-and-triggers#automatic-property-calculation-with-wildcards\"><i class=\"material-icons\">link</i></a></h3><h3 translation-origin=\"off\" id=\"automatic-property-calculation-with-wildcards\">Automatic property calculation with wildcards<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/transition-and-triggers#automatic-property-calculation-with-wildcards\"><i class=\"material-icons\">link</i></a></h3>\n\n<p translation-result=\"on\">有时你在运行之前并不知道某个样式的属性值。比如，元素的宽度和高度通常取决于其内容和屏幕大小。在使用 CSS 动画时，这些属性通常会具有挑战性（译注：因为 CSS 动画不支持自动确定宽高）。</p><p translation-origin=\"off\">Sometimes you don't know the value of a dimensional style property until runtime.\nFor example, elements often have widths and heights that depend on their content and the screen size.\nThese properties are often challenging to animate using CSS.</p>\n\n<p translation-result=\"on\">这些情况下，你可以在 <code><a href=\"api/animations/style\" class=\"code-anchor\">style</a>()</code> 中指定通配符 <code>*</code> 属性，以便在运行期间计算该属性的值，然后把它插入到动画中。</p><p translation-origin=\"off\">In these cases, you can use a special wildcard <code>*</code> property value under <code><a href=\"api/animations/style\" class=\"code-anchor\">style</a>()</code>, so that the value of that particular style property is computed at runtime and then plugged into the animation.</p>\n\n<p translation-result=\"on\">下面的例子中有一个名叫 <code>shrinkOut</code> 的触发器，它会在 HTML 元素离开页面时使用。该动画会使用它离开之前的任意高度，并从该高度动画到 0。</p><p translation-origin=\"off\">The following example has a trigger called <code>shrinkOut</code>, used when an HTML element leaves the page.\nThe animation takes whatever height the element has before it leaves, and animates from that height to zero.</p>\n\n<code-example path=\"animations/src/app/hero-list-auto.component.ts\" header=\"src/app/hero-list-auto.component.ts\" region=\"auto-calc\" language=\"typescript\">\nanimations: [\n  <a href=\"api/animations/trigger\" class=\"code-anchor\">trigger</a>('shrinkOut', [\n    <a href=\"api/animations/state\" class=\"code-anchor\">state</a>('in', <a href=\"api/animations/style\" class=\"code-anchor\">style</a>({ height: '*' })),\n    <a href=\"api/animations/transition\" class=\"code-anchor\">transition</a>('* => void', [\n      <a href=\"api/animations/style\" class=\"code-anchor\">style</a>({ height: '*' }),\n      <a href=\"api/animations/animate\" class=\"code-anchor\">animate</a>(250, <a href=\"api/animations/style\" class=\"code-anchor\">style</a>({ height: 0 }))\n    ])\n  ])\n]\n\n</code-example>\n<h3 id=\"keyframes-summary\" translation-result=\"on\">关键帧动画总结<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/transition-and-triggers#keyframes-summary\"><i class=\"material-icons\">link</i></a></h3><h3 translation-origin=\"off\" id=\"keyframes-summary\">Keyframes summary<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/transition-and-triggers#keyframes-summary\"><i class=\"material-icons\">link</i></a></h3>\n\n<p translation-result=\"on\">Angular 中的 <code><a href=\"api/animations/keyframes\" class=\"code-anchor\">keyframes</a>()</code> 函数允许你在单个转场中指定多个临时样式，并使用可选的偏移量来定义动画中每次样式变化的发生时机。</p><p translation-origin=\"off\">The <code><a href=\"api/animations/keyframes\" class=\"code-anchor\">keyframes</a>()</code> function in Angular allows you to specify multiple interim styles within a single transition, with an optional offset to define the point in the animation where each style change occurs.</p>\n\n<h2 id=\"more-on-angular-animations\" translation-result=\"on\">Angular 动画的更多知识<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/transition-and-triggers#more-on-angular-animations\"><i class=\"material-icons\">link</i></a></h2><h2 translation-origin=\"off\" id=\"more-on-angular-animations\">More on Angular animations<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/transition-and-triggers#more-on-angular-animations\"><i class=\"material-icons\">link</i></a></h2>\n\n<p translation-result=\"on\">你可能还对下列内容感兴趣：</p><p translation-origin=\"off\">You may also be interested in the following:</p>\n\n<ul>\n<li>\n<p translation-result=\"on\"><a href=\"guide/animations\">Angular 动画简介</a></p><p translation-origin=\"off\"><a href=\"guide/animations\">Introduction to Angular animations</a></p>\n\n</li>\n<li>\n<p translation-result=\"on\"><a href=\"guide/complex-animation-sequences\">复杂动画序列</a></p><p translation-origin=\"off\"><a href=\"guide/complex-animation-sequences\">Complex animation sequences</a></p>\n\n</li>\n<li>\n<p translation-result=\"on\"><a href=\"guide/reusable-animations\">可复用动画</a></p><p translation-origin=\"off\"><a href=\"guide/reusable-animations\">Reusable animations</a></p>\n\n</li>\n<li>\n<p translation-result=\"on\"><a href=\"guide/route-animations\">路由转场动画</a></p><p translation-origin=\"off\"><a href=\"guide/route-animations\">Route transition animations</a></p>\n\n</li>\n</ul>\n\n</div>\n\n<!-- links to this doc:\n - api/common/NgForOf\n - guide/animations\n - guide/complex-animation-sequences\n - guide/reusable-animations\n - guide/route-animations\n-->\n<!-- links from this doc:\n - api/animations/AnimationEvent\n - api/animations/animate\n - api/animations/animateChild\n - api/animations/animation\n - api/animations/keyframes\n - api/animations/query\n - api/animations/stagger\n - api/animations/state\n - api/animations/style\n - api/animations/transition\n - api/animations/trigger\n - api/common/NgForOf\n - api/common/NgIf\n - api/core/Component\n - api/core/HostBinding\n - guide/animations\n - guide/complex-animation-sequences\n - guide/complex-animation-sequences#complex-sequence\n - guide/reusable-animations\n - guide/route-animations\n - guide/transition-and-triggers#animatable-properties-and-units\n - guide/transition-and-triggers#animating-entering-and-leaving-a-view\n - guide/transition-and-triggers#animation-callbacks\n - guide/transition-and-triggers#animations-transitions-and-triggers\n - guide/transition-and-triggers#automatic-property-calculation-with-wildcards\n - guide/transition-and-triggers#boolean-values-in-transitions\n - guide/transition-and-triggers#combining-wildcard-and-void-states\n - guide/transition-and-triggers#disabling-all-animations\n - guide/transition-and-triggers#disabling-an-animation-on-an-html-element\n - guide/transition-and-triggers#enter-and-leave-aliases\n - guide/transition-and-triggers#enter-leave-view\n - guide/transition-and-triggers#increment-and-decrement-in-transitions\n - guide/transition-and-triggers#keyframes\n - guide/transition-and-triggers#keyframes-summary\n - guide/transition-and-triggers#keyframes-with-a-pulsation\n - guide/transition-and-triggers#more-on-angular-animations\n - guide/transition-and-triggers#multiple-animation-triggers\n - guide/transition-and-triggers#offset\n - guide/transition-and-triggers#parent-child-animations\n - guide/transition-and-triggers#predefined-states-and-wildcard-matching\n - guide/transition-and-triggers#use-of-ngif-and-ngfor-with-enter-and-leave\n - guide/transition-and-triggers#using-wildcard-state-with-multiple-transition-states\n - guide/transition-and-triggers#using-wildcards-with-styles\n - guide/transition-and-triggers#void-state\n - guide/transition-and-triggers#wildcard-state\n - https://github.com/angular/angular-cn/edit/aio/aio/content/guide/transition-and-triggers.md?message=docs%3A%20请简述你的修改...\n - https://www.w3.org/TR/css-transitions-1/\n-->"
}