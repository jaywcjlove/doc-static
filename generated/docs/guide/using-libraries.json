{
  "id": "guide/using-libraries",
  "title": "使用已发布到 npm 的 Angular 库",
  "contents": "\n\n\n<div class=\"github-links\">\n  <a href=\"https://github.com/angular/angular-cn/edit/cn/aio/content/guide/using-libraries.md?message=docs%3A%20请简述你的修改...\" aria-label=\"提供编辑建议\" title=\"提供编辑建议\"><i class=\"material-icons\" aria-hidden=\"true\" role=\"img\">mode_edit</i></a>\n</div>\n\n\n<div class=\"content\">\n  <h1 id=\"usage-of-angular-libraries-published-to-npm\">Usage of Angular libraries published to npm<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/using-libraries#usage-of-angular-libraries-published-to-npm\"><i class=\"material-icons\">link</i></a></h1>\n<h1 id=\"使用已发布到-npm-的-angular-库\">使用已发布到 npm 的 Angular 库<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/using-libraries#使用已发布到-npm-的-angular-库\"><i class=\"material-icons\">link</i></a></h1>\n<p>When you build your Angular application, take advantage of sophisticated first-party libraries, as well as rich ecosystem of third-party libraries.\n<a href=\"https://material.angular.io\" title=\"Angular Material | Angular\">Angular Material</a> is an example of a sophisticated first-party library.\nFor links to the most popular libraries, see <a href=\"resources\" title=\"Explore Angular Resources | Angular\">Angular Resources</a>.</p>\n<p>当构建 Angular 应用时，你可以从精品第一方库，比如 <a href=\"https://material.angular.io\" title=\"Angular Material | Angular\">Angular Material</a>，以及丰富的第三方库生态系统中获益。参阅 <a href=\"resources\" title=\"Explore Angular Resources | Angular\">Angular 资源集</a>页面，了解最常用的库链接。</p>\n<h2 id=\"install-libraries\">Install libraries<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/using-libraries#install-libraries\"><i class=\"material-icons\">link</i></a></h2>\n<h2 id=\"安装库\">安装库<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/using-libraries#安装库\"><i class=\"material-icons\">link</i></a></h2>\n<p>Libraries are published as <a href=\"guide/npm-packages\" title=\"Workspace npm dependencies | Angular\">npm packages</a>, usually together with schematics that integrate them with the Angular CLI.\nTo integrate reusable library code into an application, you need to install the package and import the provided functionality in the location you use it.\nFor most published Angular libraries, use the <code>ng add &#x3C;lib_name></code> Angular CLI command.</p>\n<p>这些库都是作为 <a href=\"guide/npm-packages\" title=\"Workspace npm dependencies | Angular\">npm 包</a>发布的，它们通常都带有一些与 Angular CLI 集成好的原理图。要把可复用的库代码集成到应用中，你需要安装该软件包并在使用时导入它提供的功能。对于大多数已发布的 Angular 库，你可以使用 Angular CLI 的 <code>ng add &#x3C;lib_name></code> 命令。</p>\n<p>The <code>ng add</code> Angular CLI command uses a package manager to install the library package and invokes schematics that are included in the package to other scaffolding within the project code.\nExamples of package managers include <a href=\"https://www.npmjs.com\" title=\"npm\">npm</a> or <a href=\"https://yarnpkg.com\" title=\" Yarn\">yarn</a>.\nAdditional scaffolding within the project code includes import statements, fonts, and themes.</p>\n<p>Angular CLI 的 <code>ng add</code> 命令使用包管理器来安装库包，并调用该包中的原理图在项目代码中的添加脚手架。这些包管理器包括 <a href=\"https://www.npmjs.com\" title=\"npm\">npm</a> 或 <a href=\"https://yarnpkg.com\" title=\" Yarn\">yarn</a>。项目代码中的额外脚手架包括 import 语句、fonts 和 themes。</p>\n<p>A published library typically provides a <code>README</code> file or other documentation on how to add that library to your application.\nFor an example, see the <a href=\"https://material.angular.io\" title=\"Angular Material | Angular\">Angular Material</a> documentation.</p>\n<p>已发布的库通常会提供一个 <code>README</code> 文件或其它文档来介绍如何把该库添加到你的应用中。例子可参阅 <a href=\"https://material.angular.io\" title=\"Angular Material | Angular\">Angular Material</a> 文档。</p>\n<h3 id=\"library-typings\">Library typings<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/using-libraries#library-typings\"><i class=\"material-icons\">link</i></a></h3>\n<h3 id=\"库的类型信息\">库的类型信息<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/using-libraries#库的类型信息\"><i class=\"material-icons\">link</i></a></h3>\n<p>Typically, library packages include typings in <code>.d.ts</code> files; see examples in <code>node_modules/@angular/material</code>.\nIf the package of your library does not include typings and your IDE complains, you might need to install the <code>@types/&#x3C;lib_name></code> package with the library.</p>\n<p>通常，库包中会在 <code>.d.ts</code> 文件中包含类型信息。参阅 <code>node_modules/@angular/material</code> 中的例子。如果库包中没有包含类型信息并且你的 IDE 报错，你可能需要安装与该库关联的 <code>@types/&#x3C;lib_name></code> 包。</p>\n<p>For example, suppose you have a library named <code>d3</code>:</p>\n<p>比如，假设你有一个名为 <code>d3</code> 的库：</p>\n<code-example format=\"shell\" language=\"shell\">\n\nnpm install d3 --save\nnpm install @types/d3 --save-dev\n\n</code-example>\n<p>Types defined in a <code>@types/</code> package for a library installed into the workspace are automatically added to the TypeScript configuration for the project that uses that library.\nTypeScript looks for types in the <code>node_modules/@types</code> directory by default, so you do not have to add each type package individually.</p>\n<p>已安装到工作区中的 <code>@types/</code> 包中所定义的类型，会自动添加到使用该库的项目的 TypeScript 配置文件中。TypeScript 默认就会在 <code>node_modules/@types</code> 文件夹中查找类型，所以你不必单独添加每一个类型包。</p>\n<p>If a library does not have typings available at <code>@types/</code>, you may use it by manually adding typings for it.\nTo do this:</p>\n<p>如果某个库没有 <code>@types/</code> 类型信息，你仍然可以手动为它添加一些类型信息。为此你要：</p>\n<ol>\n<li>\n<p>Create a <code>typings.d.ts</code> file in your <code>src/</code> directory.\nThis file is automatically included as global type definition.</p>\n<p>在 <code>src/</code> 文件夹中创建一个 <code>typings.d.ts</code> 文件。该文件会自动包含在全局类型定义中。</p>\n</li>\n<li>\n<p>Add the following code in <code>src/typings.d.ts</code>:</p>\n<p>在 <code>src/typings.d.ts</code> 中添加如下代码。</p>\n<code-example format=\"typescript\" language=\"typescript\">\n\ndeclare module 'host' {\n  export interface <a href=\"api/core/Host\" class=\"code-anchor\">Host</a> {\n    protocol?: string;\n    hostname?: string;\n    pathname?: string;\n  }\n  export function parse(url: string, queryString?: string): <a href=\"api/core/Host\" class=\"code-anchor\">Host</a>;\n}\n\n</code-example>\n</li>\n<li>\n<p>In the component or file that uses the library, add the following code:</p>\n<p>在使用该库的组件或文件中，添加如下代码。</p>\n<code-example format=\"typescript\" language=\"typescript\">\n\nimport * as host from 'host';\nconst parsedUrl = host.parse('https://angular.io');\nconsole.log(parsedUrl.hostname);\n\n</code-example>\n</li>\n</ol>\n<p>Define more typings as needed.</p>\n<p>按需定义更多类型。</p>\n<h2 id=\"updating-libraries\">Updating libraries<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/using-libraries#updating-libraries\"><i class=\"material-icons\">link</i></a></h2>\n<h2 id=\"更新这些库\">更新这些库<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/using-libraries#更新这些库\"><i class=\"material-icons\">link</i></a></h2>\n<p>A library is able to be updated by the publisher, and also has individual dependencies which need to be kept current.\nTo check for updates to your installed libraries, use the <a href=\"cli/update\" title=\"ng update | CLI |Angular\"><code>ng update</code></a> Angular CLI command.</p>\n<p>库的发布者可以对这些库进行更新，而这些库也有自己的依赖，所有依赖都需要保持最新。要检查已安装库的更新，请使用 <a href=\"cli/update\" title=\"ng update | CLI |Angular\"><code>ng update</code> 命令</a>。</p>\n<p>Use <code>ng update &#x3C;lib_name></code> Angular CLI command to update individual library versions.\nThe Angular CLI checks the latest published release of the library, and if the latest version is newer than your installed version, downloads it and updates your <code>package.json</code> to match the latest version.</p>\n<p>使用 <code>ng update &#x3C;lib_name></code> 命令来单独更新某个库的版本。Angular CLI 会检查库中最新发布的版本，如果最新版本比你已安装的版本新，就会下载它并更新你的 <code>package.json</code> 以匹配最新版本。</p>\n<p>When you update Angular to a new version, you need to make sure that any libraries you are using are current.\nIf libraries have interdependencies, you might have to update them in a particular order.\nSee the <a href=\"https://update.angular.io\" title=\"Angular Update Guide | Angular\">Angular Update Guide</a> for help.</p>\n<p>如果要把 Angular 更新到新版本，你需要确保所用的库都是最新的。如果库之间相互依赖，你可能还要按特定的顺序更新它们。请参阅 <a href=\"https://update.angular.io\" title=\"Angular Update Guide | Angular\">Angular 升级指南</a>以获取帮助。</p>\n<h2 id=\"adding-a-library-to-the-runtime-global-scope\">Adding a library to the runtime global scope<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/using-libraries#adding-a-library-to-the-runtime-global-scope\"><i class=\"material-icons\">link</i></a></h2>\n<h2 id=\"把某个库添加到运行时的全局范围中\">把某个库添加到运行时的全局范围中<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/using-libraries#把某个库添加到运行时的全局范围中\"><i class=\"material-icons\">link</i></a></h2>\n<p>If a legacy JavaScript library is not imported into an application, you may add it to the runtime global scope and load it as if it was added in a script tag.\nConfigure the Angular CLI to do this at build time using the <code>scripts</code> and <code>styles</code> options of the build target in the <a href=\"guide/workspace-config\" title=\"Angular workspace configuration | Angular\"><code>angular.json</code></a> workspace build configuration file.</p>\n<p>如果未将老式 JavaScript 库导入应用程序，你可以将其添加到运行时全局范围并加载它，就像将其添加到 script 标记中一样。使用工作区构建配置文件 <a href=\"guide/workspace-config\" title=\"Angular workspace configuration | Angular\"><code>angular.json</code></a> 中此构建目标的 <code>scripts</code> 和 <code>styles</code> 选项，配置 Angular CLI 以便在构建时执行此操作。</p>\n<p>For example, to use the <a href=\"https://getbootstrap.com/docs/4.0/getting-started/introduction\" title=\"Introduction | Bootstrap\">Bootstrap 4</a> library</p>\n<p>比如，要使用 <a href=\"https://getbootstrap.com/docs/4.0/getting-started/introduction\" title=\"Introduction | Bootstrap\">Bootstrap 4</a> 库</p>\n<ol>\n<li>\n<p>Install the library and the associated dependencies using the npm package manager:</p>\n<p>使用 npm 包管理器安装库和相关的依赖项：</p>\n<code-example format=\"shell\" language=\"shell\">\n\nnpm install jquery --save\nnpm install popper.js --save\nnpm install bootstrap --save\n\n</code-example>\n</li>\n<li>\n<p>In the <code>angular.json</code> configuration file, add the associated script files to the <code>scripts</code> array:</p>\n<p>在 <code>angular.json</code> 配置文件中，把关联的脚本文件添加到 \"scripts\" 数组中：</p>\n<code-example format=\"json\" language=\"json\">\n\n\"scripts\": [\n  \"node_modules/jquery/dist/jquery.slim.js\",\n  \"node_modules/popper.js/dist/umd/popper.js\",\n  \"node_modules/bootstrap/dist/js/bootstrap.js\"\n],\n\n</code-example>\n</li>\n<li>\n<p>Add the <code>bootstrap.css</code> CSS file to the <code>styles</code> array:</p>\n<p>把 <code>bootstrap.css</code> 文件添加到 \"styles\" 数组中：</p>\n<code-example format=\"css\" language=\"css\">\n\n\"styles\": [\n  \"node_modules/bootstrap/dist/css/bootstrap.css\",\n  \"src/styles.css\"\n],\n\n</code-example>\n</li>\n<li>\n<p>Run or restart the <code>ng serve</code> Angular CLI command to see Bootstrap 4 work in your application.</p>\n<p>运行或重启 <code>ng serve</code>，看看你的应用是否正在使用 Bootstrap 4。</p>\n</li>\n</ol>\n<h3 id=\"using-runtime-global-libraries-inside-your-app\">Using runtime-global libraries inside your app<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/using-libraries#using-runtime-global-libraries-inside-your-app\"><i class=\"material-icons\">link</i></a></h3>\n<h3 id=\"在你的应用中使用运行时全局库\">在你的应用中使用运行时全局库<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/using-libraries#在你的应用中使用运行时全局库\"><i class=\"material-icons\">link</i></a></h3>\n<p>After you import a library using the \"scripts\" array, do <strong>not</strong> import it using an import statement in your TypeScript code.\nThe following code snippet is an example import statement.</p>\n<p>通过 “scripts” 数组导入某个库之后，<strong>不要</strong>在 TypeScript 代码中再次使用 import 语句导入它。以下代码片段是一个示例导入语句。</p>\n<code-example format=\"typescript\" language=\"typescript\">\n\nimport * as $ from 'jquery';\n\n</code-example>\n<p>If you import it using import statements, you have two different copies of the library: one imported as a global library, and one imported as a module.\nThis is especially bad for libraries with plugins, like JQuery, because each copy includes different plugins.</p>\n<p>如果你使用 import 语句导入它，你将拥有该库的两个不同副本：一个作为全局库导入，另一个作为模块导入。这对于带有插件的库来说尤其糟糕，比如 JQuery，因为每个副本都包含不同的插件。</p>\n<p>Instead, run the <code>npm install @types/jquery</code> Angular CLI command to download typings for your library and then follow the library installation steps.\nThis gives you access to the global variables exposed by that library.</p>\n<p>相反，运行 <code>npm install @types/jquery</code> Angular CLI 命令为你的库下载类型信息，然后按照库的安装步骤进行操作。这样你就可以访问该库公开的全局变量了。</p>\n<h3 id=\"defining-typings-for-runtime-global-libraries\">Defining typings for runtime-global libraries<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/using-libraries#defining-typings-for-runtime-global-libraries\"><i class=\"material-icons\">link</i></a></h3>\n<h3 id=\"定义运行时全局库的类型信息\">定义运行时全局库的类型信息<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/using-libraries#定义运行时全局库的类型信息\"><i class=\"material-icons\">link</i></a></h3>\n<p>If the global library you need to use does not have global typings, you can declare them manually as <code>any</code> in <code>src/typings.d.ts</code>.</p>\n<p>如果你要用的全局库没有全局类型信息，就可以在 <code>src/typings.d.ts</code> 中手动声明它们。</p>\n<p>For example:</p>\n<p>比如：</p>\n<code-example format=\"typescript\" language=\"typescript\">\n\ndeclare var libraryName: any;\n\n</code-example>\n<p>Some scripts extend other libraries; for instance with JQuery plugins:</p>\n<p>有些脚本扩展了其它库，比如 JQuery 插件：</p>\n<code-example format=\"typescript\" language=\"typescript\">\n\n$('.test').myPlugin();\n\n</code-example>\n<p>In this case, the installed <code>@types/jquery</code> does not include <code>myPlugin</code>, so you need to add an interface in <code>src/typings.d.ts</code>.\nFor example:</p>\n<p>在这种情况下，所安装的 <code>@types/jquery</code> 就不包含 <code>myPlugin</code>，所以你需要在 <code>src/typings.d.ts</code> 中添加一个接口。比如：</p>\n<code-example format=\"typescript\" language=\"typescript\">\n\ninterface JQuery {\n  myPlugin(options?: any): any;\n}\n\n</code-example>\n<p>If you do not add the interface for the script-defined extension, your IDE shows an error:</p>\n<p>如果不为这个由脚本定义的扩展添加接口，IDE 就会显示错误：</p>\n<code-example format=\"none\" language=\"none\">\n\n[TS][Error] Property 'myPlugin' does not exist on type 'JQuery'\n\n</code-example>\n<!-- links -->\n<!-- external links -->\n<!-- end links -->\n\n  <div class=\"reviewed\">最后复查时间： 1/5/2022</div>\n</div>\n\n\n<!-- links to this doc:\n - guide/libraries\n - guide/workspace-config\n-->\n<!-- links from this doc:\n - api/core/Host\n - cli/update\n - guide/npm-packages\n - guide/using-libraries#adding-a-library-to-the-runtime-global-scope\n - guide/using-libraries#defining-typings-for-runtime-global-libraries\n - guide/using-libraries#install-libraries\n - guide/using-libraries#library-typings\n - guide/using-libraries#updating-libraries\n - guide/using-libraries#usage-of-angular-libraries-published-to-npm\n - guide/using-libraries#using-runtime-global-libraries-inside-your-app\n - guide/using-libraries#使用已发布到-npm-的-angular-库\n - guide/using-libraries#在你的应用中使用运行时全局库\n - guide/using-libraries#安装库\n - guide/using-libraries#定义运行时全局库的类型信息\n - guide/using-libraries#库的类型信息\n - guide/using-libraries#把某个库添加到运行时的全局范围中\n - guide/using-libraries#更新这些库\n - guide/workspace-config\n - resources\n - https://getbootstrap.com/docs/4.0/getting-started/introduction\n - https://github.com/angular/angular-cn/edit/cn/aio/content/guide/using-libraries.md?message=docs%3A%20请简述你的修改...\n - https://material.angular.io\n - https://update.angular.io\n - https://www.npmjs.com\n - https://yarnpkg.com\n-->"
}