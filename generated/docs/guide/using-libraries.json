{
  "id": "guide/using-libraries",
  "title": "Using published libraries",
  "contents": "\n\n\n  <div class=\"github-links\">\n    <a href=\"https://github.com/angular/angular-cn/edit/aio/aio/content/guide/using-libraries.md?message=docs%3A%20请简述你的修改...\" aria-label=\"提供编辑建议\" title=\"提供编辑建议\"><i class=\"material-icons\" aria-hidden=\"true\" role=\"img\">mode_edit</i></a>\n  </div>\n\n\n<div class=\"content\">\n<h1 id=\"using-published-libraries\" translation-result=\"on\">使用已发布的库<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/using-libraries#using-published-libraries\"><i class=\"material-icons\">link</i></a></h1><h1 translation-origin=\"off\" id=\"using-published-libraries\">Using published libraries<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/using-libraries#using-published-libraries\"><i class=\"material-icons\">link</i></a></h1>\n\n<p translation-result=\"on\">当构建 Angular 应用时，你可以从精致的第一方库，比如 <a href=\"https://material.angular.cn/\">Angular Material</a>，以及丰富的第三方库生态系统中获益。参见 <a href=\"/resources\">Angular 资源集</a>页面，了解最常用的库链接。</p><p translation-origin=\"off\">When building Angular applications you can take advantage of sophisticated first-party libraries, such as <a href=\"https://material.angular.io/\">Angular Material</a>, as well as rich ecosystem of third-party libraries.\nSee the <a href=\"resources\">Angular Resources</a> page for links to the most popular ones.</p>\n\n<h2 id=\"installing-libraries\" translation-result=\"on\">安装库<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/using-libraries#installing-libraries\"><i class=\"material-icons\">link</i></a></h2><h2 translation-origin=\"off\" id=\"installing-libraries\">Installing libraries<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/using-libraries#installing-libraries\"><i class=\"material-icons\">link</i></a></h2>\n\n<p translation-result=\"on\">这些库都是作为 <a href=\"guide/npm-packages\">npm 包</a>发布的，它们通常都带有一些与 Angular CLI 集成好的 schematic。要把可复用的库代码集成到应用中，你需要安装该软件包并在使用时导入它提供的功能。对于大多数已发布的 Angular 库，你可以使用 Angular CLI 的 <code>ng add &#x3C;lib_name></code> 命令。</p><p translation-origin=\"off\">Libraries are published as <a href=\"guide/npm-packages\">npm packages</a>, usually together with schematics that integrate them with the Angular CLI.\nTo integrate reusable library code into an application, you need to install the package and import the provided functionality where you will use it. For most published Angular libraries, you can use the Angular CLI <code>ng add &#x3C;lib_name></code> command.</p>\n\n<p translation-result=\"on\"><code>ng add</code> 命令使用 npm 包管理器或 <a href=\"https://yarnpkg.com/\">yarn</a> 来安装库包，并调用该包中的 schematic 在项目代码中的添加脚手架，比如添加 import 语句、添加 fonts，添加 themes 等。</p><p translation-origin=\"off\">The <code>ng add</code> command uses the npm package manager or <a href=\"https://yarnpkg.com/\">yarn</a> to install the library package, and invokes schematics that are included in the package to other scaffolding within the project code, such as adding import statements, fonts, themes, and so on.</p>\n\n<p translation-result=\"on\">已发布的库通常会提供 README 或者其它文档来介绍如何把该库添加到你的应用中。例子可参见 <a href=\"https://material.angular.io/\">Angular Material</a> 文档。</p><p translation-origin=\"off\">A published library typically provides a README or other documentation on how to add that lib to your app.\nFor an example, see <a href=\"https://material.angular.io/\">Angular Material</a> docs.</p>\n\n<h3 id=\"library-typings\" translation-result=\"on\">库的类型<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/using-libraries#library-typings\"><i class=\"material-icons\">link</i></a></h3><h3 translation-origin=\"off\" id=\"library-typings\">Library typings<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/using-libraries#library-typings\"><i class=\"material-icons\">link</i></a></h3>\n\n<p translation-result=\"on\">库包中通常会在 <code>.d.ts</code> 文件中包含类型信息。参见 <code>node_modules/@angular/material</code> 中的例子。如果你的库包中没有包含类型信息并且你的 IDE 报错，你可能需要安装与这个库关联的 <code>@types/&#x3C;lib_name></code> 包。</p><p translation-origin=\"off\">Library packages often include typings in <code>.d.ts</code> files; see examples in <code>node_modules/@angular/material</code>. If your library's package does not include typings and your IDE complains, you may need to install the library's associated <code>@types/&#x3C;lib_name></code> package.</p>\n\n<p translation-result=\"on\">比如，假设你有一个名为 <code>d3</code> 的库：</p><p translation-origin=\"off\">For example, suppose you have a library named <code>d3</code>:</p>\n\n<code-example language=\"bash\">\nnpm install d3 --save\nnpm install @types/d3 --save-dev\n</code-example>\n<p translation-result=\"on\">已安装到工作区中的 <code>@types/</code> 包中所定义的类型，会自动添加到使用该库的项目的 TypeScript 配置文件中。TypeScript 默认就会在 <code>node_modules/@types</code> 文件夹中查找类型，所以你不必单独添加每一个类型包。</p><p translation-origin=\"off\">Types defined in a <code>@types/</code> package for a library installed into the workspace are automatically added to the TypeScript configuration for the project that uses that library.\nTypeScript looks for types in the <code>node_modules/@types</code> folder by default, so you don't have to add each type package individually.</p>\n\n<p translation-result=\"on\">如果某个库没有 <code>@types/</code> 类型信息，你仍然可以手动为它添加一些类型信息。为此你要：</p><p translation-origin=\"off\">If a library doesn't have typings available at <code>@types/</code>, you can still use it by manually adding typings for it.\nTo do this:</p>\n\n<ol>\n<li>\n<p translation-result=\"on\">在 <code>src/</code> 文件夹中创建一个 <code>typings.d.ts</code> 文件。该文件会自动包含在全局类型定义中。</p><p translation-origin=\"off\">Create a <code>typings.d.ts</code> file in your <code>src/</code> folder. This file is automatically included as global type definition.</p>\n\n</li>\n<li>\n<p translation-result=\"on\">在 <code>src/typings.d.ts</code> 中添加如下代码。</p><p translation-origin=\"off\">Add the following code in <code>src/typings.d.ts</code>.</p>\n\n</li>\n</ol>\n<code-example>\ndeclare module 'host' {\n  export interface <a href=\"api/core/Host\" class=\"code-anchor\">Host</a> {\n    protocol?: string;\n    hostname?: string;\n    pathname?: string;\n  }\n  export function parse(url: string, queryString?: string): <a href=\"api/core/Host\" class=\"code-anchor\">Host</a>;\n}\n</code-example>\n<ol start=\"3\">\n<li>\n<p translation-result=\"on\">在使用该库的组件或文件中，添加如下代码。</p><p translation-origin=\"off\">In the component or file that uses the library, add the following code.</p>\n\n</li>\n</ol>\n<code-example>\nimport * as host from 'host';\nconst parsedUrl = host.parse('https://angular.io');\nconsole.log(parsedUrl.hostname);\n</code-example>\n<p translation-result=\"on\">你可以按需定义更多类型。</p><p translation-origin=\"off\">You can define more typings as needed.</p>\n\n<h2 id=\"updating-libraries\" translation-result=\"on\">更新这些库<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/using-libraries#updating-libraries\"><i class=\"material-icons\">link</i></a></h2><h2 translation-origin=\"off\" id=\"updating-libraries\">Updating libraries<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/using-libraries#updating-libraries\"><i class=\"material-icons\">link</i></a></h2>\n\n<p translation-result=\"on\">库的发布者可以对这些库进行更新，而这些库也有自己的依赖，所有依赖都需要保持最新。要检查已安装库的更新，请使用 <a href=\"cli/update\"><code>ng update</code> 命令</a>。</p><p translation-origin=\"off\">Libraries can be updated by their publishers, and also have their own dependencies which need to be kept current.\nTo check for updates to your installed libraries, use the <a href=\"cli/update\"><code>ng update</code> command</a>.</p>\n\n<p translation-result=\"on\">使用 <code>ng update &#x3C;lib_name></code> 来单独更新某个库的版本。Angular CLI 会检查库中最新发布的版本，如果最新版本比你已安装的版本新，就会下载它并更新你的 <code>package.json</code> 以匹配最新版本。</p><p translation-origin=\"off\">Use <code>ng update &#x3C;lib_name></code> to update individual library versions. The Angular CLI checks the latest published release of the library, and if the latest version is newer than your installed version, downloads it and updates your <code>package.json</code> to match the latest version.</p>\n\n<p translation-result=\"on\">当把 Angular 更新到新版本时，你需要确保所用的库都是最新的。如果库之间相互依赖，你可能还要按特定的顺序更新它们。请参阅 <a href=\"https://update.angular.io/\">Angular 升级指南</a>以获取帮助。</p><p translation-origin=\"off\">When you update Angular to a new version, you need to make sure that any libraries you are using are current. If libraries have interdependencies, you might have to update them in a particular order.\nSee the <a href=\"https://update.angular.io/\">Angular Update Guide</a> for help.</p>\n\n<h2 id=\"adding-a-library-to-the-runtime-global-scope\" translation-result=\"on\">把某个库添加到运行时的全局范围中<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/using-libraries#adding-a-library-to-the-runtime-global-scope\"><i class=\"material-icons\">link</i></a></h2><h2 translation-origin=\"off\" id=\"adding-a-library-to-the-runtime-global-scope\">Adding a library to the runtime global scope<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/using-libraries#adding-a-library-to-the-runtime-global-scope\"><i class=\"material-icons\">link</i></a></h2>\n\n<p translation-result=\"on\">那些没有导入到应用中的旧版 JavaScript 库可以添加到运行时的全局作用域中，并像在 script 标签中一样加载。可以在 <a href=\"guide/workspace-config\">CLI 配置文件</a> <code>angular.json</code> 中的构建目标（build target）的 \"scripts\" 和 \"styles\" 选项中配置 CLI，以便在构建期间添加这些文件。</p><p translation-origin=\"off\">Legacy JavaScript libraries that are not imported into an app can be added to the runtime global scope and loaded as if they were in a script tag.\nConfigure the CLI to do this at build time using the \"scripts\" and \"styles\" options of the build target in the <a href=\"guide/workspace-config\">CLI configuration file</a>, <code>angular.json</code>.</p>\n\n<p translation-result=\"on\">例如，要使用 <a href=\"https://getbootstrap.com/docs/4.0/getting-started/introduction/\">Bootstrap 4</a>，首先就要使用 npm 包管理器来安装该库及其依赖：</p><p translation-origin=\"off\">For example, to use the <a href=\"https://getbootstrap.com/docs/4.0/getting-started/introduction/\">Bootstrap 4</a> library, first install the library and its dependencies using the npm package manager:</p>\n\n<code-example language=\"bash\">\nnpm install jquery --save\nnpm install popper.js --save\nnpm install bootstrap --save\n</code-example>\n<p translation-result=\"on\">在 <code>angular.json</code> 配置文件中，把关联的脚本文件添加到 \"scripts\" 数组中：</p><p translation-origin=\"off\">In the <code>angular.json</code> configuration file, add the associated script files to the \"scripts\" array:</p>\n\n<code-example>\n\"scripts\": [\n  \"node_modules/jquery/dist/jquery.slim.js\",\n  \"node_modules/popper.js/dist/umd/popper.js\",\n  \"node_modules/bootstrap/dist/js/bootstrap.js\"\n],\n</code-example>\n<p translation-result=\"on\">把 Bootstrap 的 CSS 文件添加到 \"styles\" 数组中：</p><p translation-origin=\"off\">Add the Bootstrap CSS file to the \"styles\" array:</p>\n\n<code-example>\n\"styles\": [\n  \"node_modules/bootstrap/dist/css/bootstrap.css\",\n  \"src/styles.css\"\n],\n</code-example>\n<p translation-result=\"on\">运行或重启 <code>ng serve</code>，看看你的应用是否正在使用 Bootstrap 4。</p><p translation-origin=\"off\">Run or restart <code>ng serve</code> to see Bootstrap 4 working in your app.</p>\n\n<h3 id=\"using-runtime-global-libraries-inside-your-app\" translation-result=\"on\">在你的应用中使用运行时全局库<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/using-libraries#using-runtime-global-libraries-inside-your-app\"><i class=\"material-icons\">link</i></a></h3><h3 translation-origin=\"off\" id=\"using-runtime-global-libraries-inside-your-app\">Using runtime-global libraries inside your app<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/using-libraries#using-runtime-global-libraries-inside-your-app\"><i class=\"material-icons\">link</i></a></h3>\n\n<p translation-result=\"on\">当你用 \"scripts\" 数组导入一个库后，就<strong>不应该</strong>在你的 TypeScript 代码中再用 import 语句来导入它了（比如：<code>import * as $ from 'jquery';</code>）。如果你这样做，就会得到该库两个不同的副本：一个作为全局库导入，另一个作为模块导入。这对于那些带有插件的库来说特别糟糕，比如 JQuery，因为每个副本都会有不同的插件。</p><p translation-origin=\"off\">Once you import a library using the \"scripts\" array, you should <strong>not</strong> import it using an import statement in your TypeScript code (such as <code>import * as $ from 'jquery';</code>).\nIf you do, you'll end up with two different copies of the library: one imported as a global library, and one imported as a module.\nThis is especially bad for libraries with plugins, like JQuery, because each copy will have different plugins.</p>\n\n<p translation-result=\"on\">相反，为你的库下载类型信息（<code>npm install @types/jquery</code>），并按照库的安装步骤进行操作。这让你可以访问该库暴露出来的全局变量。</p><p translation-origin=\"off\">Instead, download typings for your library (<code>npm install @types/jquery</code>) and follow the library installation steps. This gives you access to the global variables exposed by that library.</p>\n\n<h3 id=\"defining-typings-for-runtime-global-libraries\" translation-result=\"on\">定义运行时全局库的类型信息<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/using-libraries#defining-typings-for-runtime-global-libraries\"><i class=\"material-icons\">link</i></a></h3><h3 translation-origin=\"off\" id=\"defining-typings-for-runtime-global-libraries\">Defining typings for runtime-global libraries<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/using-libraries#defining-typings-for-runtime-global-libraries\"><i class=\"material-icons\">link</i></a></h3>\n\n<p translation-result=\"on\">如果你要用的全局库没有全局类型信息，就可以在 <code>src/typings.d.ts</code> 中手动声明它们。例如：</p><p translation-origin=\"off\">If the global library you need to use does not have global typings, you can declare them manually as <code>any</code> in <code>src/typings.d.ts</code>. For example:</p>\n\n<code-example>\ndeclare var libraryName: any;\n</code-example>\n<p translation-result=\"on\">有些脚本扩展了其它库，例如 JQuery 插件：</p><p translation-origin=\"off\">Some scripts extend other libraries; for instance with JQuery plugins:</p>\n\n<code-example>\n$('.test').myPlugin();\n</code-example>\n<p translation-result=\"on\">在这种情况下，所安装的 <code>@types/jquery</code> 就不包含 <code>myPlugin</code>，所以你需要在 <code>src/typings.d.ts</code> 中添加一个接口。例如：</p><p translation-origin=\"off\">In this case, the installed <code>@types/jquery</code> doesn't include <code>myPlugin</code>, so you need to add an interface in <code>src/typings.d.ts</code>. For example:</p>\n\n<code-example>\ninterface JQuery {\n  myPlugin(options?: any): any;\n}\n</code-example>\n<p translation-result=\"on\">如果不为这个由脚本定义的扩展添加接口，IDE 就会显示错误：</p><p translation-origin=\"off\">If don't add the interface for the script-defined extension, your IDE shows an error:</p>\n\n<code-example>\n[TS][Error] Property 'myPlugin' does not exist on type 'JQuery'\n</code-example>\n\n</div>\n\n<!-- links to this doc:\n - guide/libraries\n - guide/workspace-config\n-->\n<!-- links from this doc:\n - /resources\n - api/core/Host\n - cli/update\n - guide/npm-packages\n - guide/using-libraries#adding-a-library-to-the-runtime-global-scope\n - guide/using-libraries#defining-typings-for-runtime-global-libraries\n - guide/using-libraries#installing-libraries\n - guide/using-libraries#library-typings\n - guide/using-libraries#updating-libraries\n - guide/using-libraries#using-published-libraries\n - guide/using-libraries#using-runtime-global-libraries-inside-your-app\n - guide/workspace-config\n - resources\n - https://getbootstrap.com/docs/4.0/getting-started/introduction/\n - https://github.com/angular/angular-cn/edit/aio/aio/content/guide/using-libraries.md?message=docs%3A%20请简述你的修改...\n - https://material.angular.cn/\n - https://material.angular.io/\n - https://update.angular.io/\n - https://yarnpkg.com/\n-->"
}