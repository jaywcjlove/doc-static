{
  "id": "guide/language-service",
  "title": "Angular Language Service",
  "contents": "\n\n\n  <div class=\"github-links\">\n    <a href=\"https://github.com/angular/angular-cn/edit/aio/aio/content/guide/language-service.md?message=docs%3A%20请简述你的修改...\" aria-label=\"提供编辑建议\" title=\"提供编辑建议\"><i class=\"material-icons\" aria-hidden=\"true\" role=\"img\">mode_edit</i></a>\n  </div>\n\n\n<div class=\"content\">\n<h1 id=\"angular-language-service\" translation-result=\"on\">Angular 语言服务<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/language-service#angular-language-service\"><i class=\"material-icons\">link</i></a></h1><h1 translation-origin=\"off\" id=\"angular-language-service\">Angular Language Service<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/language-service#angular-language-service\"><i class=\"material-icons\">link</i></a></h1>\n\n<p translation-result=\"on\">Angular 语言服务为代码编辑器提供了一种在 Angular 模板中获取自动补全、错误、提示和导航的方法。\n它支持位于独立 HTML 文件中的外部模板以及内联模板。</p><p translation-origin=\"off\">The Angular Language Service provides code editors with a way to get completions, errors,\nhints, and navigation inside Angular templates.\nIt works with external templates in separate HTML files, and also with in-line templates.</p>\n\n<h2 id=\"features\" translation-result=\"on\">特性<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/language-service#features\"><i class=\"material-icons\">link</i></a></h2><h2 translation-origin=\"off\" id=\"features\">Features<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/language-service#features\"><i class=\"material-icons\">link</i></a></h2>\n\n<p translation-result=\"on\">编辑器会自动检测到你正在打开 Angular 文件。然后，它就会使用 Angular Language Service 读取 <code>tsconfig.json</code> 文件，查找应用程序中具有的所有模板，然后为你打开的任何模板提供语言服务。</p><p translation-origin=\"off\">Your editor autodetects that you are opening an Angular file.\nIt then uses the Angular Language Service to read your <code>tsconfig.json</code> file, find all the\ntemplates you have in your application, and then provide language services for any templates that you open.</p>\n\n<p translation-result=\"on\">语言服务包括：</p><p translation-origin=\"off\">Language services include:</p>\n\n<ul>\n<li>\n<p translation-result=\"on\">自动补全清单</p><p translation-origin=\"off\">Completions lists</p>\n\n</li>\n<li>\n<p translation-result=\"on\">AOT 诊断消息</p><p translation-origin=\"off\">AOT Diagnostic messages</p>\n\n</li>\n<li>\n<p translation-result=\"on\">快捷信息</p><p translation-origin=\"off\">Quick info</p>\n\n</li>\n<li>\n<p translation-result=\"on\">转到定义</p><p translation-origin=\"off\">Go to definition</p>\n\n</li>\n</ul>\n<h3 id=\"autocompletion\" translation-result=\"on\">自动补全<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/language-service#autocompletion\"><i class=\"material-icons\">link</i></a></h3><h3 translation-origin=\"off\" id=\"autocompletion\">Autocompletion<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/language-service#autocompletion\"><i class=\"material-icons\">link</i></a></h3>\n\n<p translation-result=\"on\">自动补全可以在输入时为你提供当前情境下的候选内容和提示，从而提高开发速度。下面这个例子展示了插值中的自动补全功能。当你进行输入的时候，就可以按 tab 键来自动补全。</p><p translation-origin=\"off\">Autocompletion can speed up your development time by providing you with\ncontextual possibilities and hints as you type.\nThis example shows autocomplete in an interpolation. As you type it out,\nyou can hit tab to complete.</p>\n\n<div class=\"lightbox\">\n  <img src=\"generated/images/guide/language-service/language-completion.gif\" alt=\"autocompletion\" width=\"480\" height=\"72\">\n</div>\n<p translation-result=\"on\">还有对元素的自动补全。你定义的任何组件的选择器都会显示在自动补全列表中。</p><p translation-origin=\"off\">There are also completions within elements. Any elements you have as a component selector will\nshow up in the completion list.</p>\n\n<h3 id=\"error-checking\" translation-result=\"on\">错误检查<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/language-service#error-checking\"><i class=\"material-icons\">link</i></a></h3><h3 translation-origin=\"off\" id=\"error-checking\">Error checking<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/language-service#error-checking\"><i class=\"material-icons\">link</i></a></h3>\n\n<p translation-result=\"on\">Angular 语言服务能对代码中存在的错误进行预警。在这个例子中，Angular 不知道什么是 <code>orders</code> 或者它来自哪里。</p><p translation-origin=\"off\">The Angular Language Service can forewarn you of mistakes in your code.\nIn this example, Angular doesn't know what <code>orders</code> is or where it comes from.</p>\n\n<div class=\"lightbox\">\n  <img src=\"generated/images/guide/language-service/language-error.gif\" alt=\"error checking\" width=\"480\" height=\"126\">\n</div>\n<h3 id=\"quick-info-and-navigation\" translation-result=\"on\">快捷信息与导航<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/language-service#quick-info-and-navigation\"><i class=\"material-icons\">link</i></a></h3><h3 translation-origin=\"off\" id=\"quick-info-and-navigation\">Quick info and navigation<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/language-service#quick-info-and-navigation\"><i class=\"material-icons\">link</i></a></h3>\n\n<p translation-result=\"on\">快捷信息功能使你可以悬停以查看组件、指令、模块等的来源。然后，你可以单击“转到定义”或按 F12 键直接转到定义。</p><p translation-origin=\"off\">The quick-info feature allows you to hover to see where components, directives, modules, and so on come from.\nYou can then click \"Go to definition\" or press F12 to go directly to the definition.</p>\n\n<div class=\"lightbox\">\n  <img src=\"generated/images/guide/language-service/language-navigation.gif\" alt=\"navigation\" width=\"392\" height=\"186\">\n</div>\n<h2 id=\"angular-language-service-in-your-editor\" translation-result=\"on\">编辑器中的 Angular 语言服务<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/language-service#angular-language-service-in-your-editor\"><i class=\"material-icons\">link</i></a></h2><h2 translation-origin=\"off\" id=\"angular-language-service-in-your-editor\">Angular Language Service in your editor<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/language-service#angular-language-service-in-your-editor\"><i class=\"material-icons\">link</i></a></h2>\n\n<p translation-result=\"on\">Angular 语言服务目前在<a href=\"https://code.visualstudio.com/\">Visual Studio Code</a>和<a href=\"https://www.jetbrains.com/webstorm\">WebStorm</a> 和 <a href=\"https://www.sublimetext.com/\">Sublime Text</a> 中都有可用的扩展。</p><p translation-origin=\"off\">Angular Language Service is currently available as an extension for <a href=\"https://code.visualstudio.com/\">Visual Studio Code</a>,\n<a href=\"https://www.jetbrains.com/webstorm\">WebStorm</a>, and <a href=\"https://www.sublimetext.com/\">Sublime Text</a>.</p>\n\n<h3 id=\"visual-studio-code\">Visual Studio Code<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/language-service#visual-studio-code\"><i class=\"material-icons\">link</i></a></h3>\n<p translation-result=\"on\">在 <a href=\"https://code.visualstudio.com/\">Visual Studio Code 中</a>，从 “<a href=\"https://marketplace.visualstudio.com/items?itemName=Angular.ng-template\">扩展程序：市场</a> 中安装扩展程序。你可以使用左侧菜单窗格中的扩展程序图标从编辑器中打开市场，或使用 VS 快速打开（在 Mac 上为 ⌘+ P，在 Windows 上为 CTRL + P）并输入“? ext”。</p><p translation-origin=\"off\">In <a href=\"https://code.visualstudio.com/\">Visual Studio Code</a>, install the extension from the <a href=\"https://marketplace.visualstudio.com/items?itemName=Angular.ng-template\">Extensions: Marketplace</a>. You can open the marketplace from the editor using the Extensions icon on the left menu pane, or use VS Quick Open (⌘+P on Mac, CTRL+P on Windows) and type \"? ext\".</p>\n\n<p translation-result=\"on\">在市场上，搜索 <code>Angular Language Service</code> 扩展，然后单击 <strong>Install</strong> 按钮。</p><p translation-origin=\"off\">In the marketplace, search for Angular Language Service extension, and click the <strong>Install</strong> button.</p>\n\n<h3 id=\"webstorm\">WebStorm<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/language-service#webstorm\"><i class=\"material-icons\">link</i></a></h3>\n<p translation-result=\"on\">在 <a href=\"https://www.jetbrains.com/webstorm/\">WebStorm 中</a>，必须将语言服务包安装为项目依赖项。</p><p translation-origin=\"off\">In <a href=\"https://www.jetbrains.com/webstorm/\">WebStorm</a>, you must install the language service package as a project dependency.</p>\n\n<ol>\n<li>\n<p translation-result=\"on\">将以下内容添加到项目的 <code>package.json</code> <code>devDependencies</code> 中</p><p translation-origin=\"off\">Add the following to your <code>devDependencies</code> in your project's <code>package.json</code></p>\n\n</li>\n</ol>\n<code-example language=\"json\" header=\"package.json\">\ndevDependencies {\n  \"@angular/language-service\": \"^6.0.0\"\n}\n\n</code-example>\n<ol start=\"2\">\n<li>\n<p translation-result=\"on\">打开终端窗口，在项目根目录下使用 <code>npm</code> 或 <code>yarn</code> 来安装这些 <code>devDependencies</code>：</p><p translation-origin=\"off\">In the terminal window at the root of your project, install the <code>devDependencies</code> with <code>npm</code> or <code>yarn</code>:</p>\n\n</li>\n</ol>\n<code-example language=\"sh\">\nnpm install \n</code-example>\n<p translation-result=\"on\"><em>或</em></p><p translation-origin=\"off\"><em>OR</em></p>\n\n<code-example language=\"sh\">\nyarn\n</code-example>\n<p translation-result=\"on\"><em>或</em></p><p translation-origin=\"off\"><em>OR</em></p>\n\n<code-example language=\"sh\">\nyarn install\n</code-example>\n<p translation-result=\"on\">当 Angular 插件发现这个开发依赖时，就会在 WebStorm 环境中提供语言服务。\n除了 Angular 语言服务提供的这些功能之外，WebStorm 还会提供自动补齐和模板代码着色功能。</p><p translation-origin=\"off\">When Angular sees this dev dependency, it provides the language service in the WebStorm environment.\nWebStorm then gives you colorization inside the template and autocomplete in addition to the Angular Language Service.</p>\n\n<h3 id=\"sublime-text\">Sublime Text<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/language-service#sublime-text\"><i class=\"material-icons\">link</i></a></h3>\n<p translation-result=\"on\">在 <a href=\"https://www.sublimetext.com/\">Sublime Text</a> 中，当安装为插件时，语言服务仅支持内联模板。\n你需要自定义 Sublime 插件（或修改当前插件），来实现 HTML 文件中的自动补齐。</p><p translation-origin=\"off\">In <a href=\"https://www.sublimetext.com/\">Sublime Text</a>, the Language Service supports only in-line templates when installed as a plug-in.\nYou need a custom Sublime plug-in (or modifications to the current plug-in) for completions in HTML files.</p>\n\n<p translation-result=\"on\">要想在内联模板中使用语言服务，你必须首先添加一个扩展，以支持 TypeScript，然后安装 Angular 语言服务插件。从 TypeScript 2.3 开始，TypeScript 提供了一个插件模型，供语言服务使用。</p><p translation-origin=\"off\">To use the Language Service for in-line templates, you must first add an extension to allow TypeScript, then install the Angular Language Service plug-in. Starting with TypeScript 2.3, TypeScript has a plug-in model that the language service can use.</p>\n\n<ol>\n<li>\n<p translation-result=\"on\">把最新版本的 TypeScript 安装到本地的 <code>node_modules</code> 目录下：</p><p translation-origin=\"off\">Install the latest version of TypeScript in a local <code>node_modules</code> directory:</p>\n\n</li>\n</ol>\n<code-example language=\"sh\">\nnpm install --save-dev typescript\n</code-example>\n<ol start=\"2\">\n<li>\n<p translation-result=\"on\">把 Angular 语言服务的包安装到同一位置：</p><p translation-origin=\"off\">Install the Angular Language Service package in the same location:</p>\n\n</li>\n</ol>\n<code-example language=\"sh\">\nnpm install --save-dev @angular/language-service\n</code-example>\n<ol start=\"3\">\n<li>\n<p translation-result=\"on\">安装好这个包后，将以下内容添加到项目的 <code>tsconfig.json</code> 的 <code>\"compilerOptions\"</code> 部分。</p><p translation-origin=\"off\">Once the package is installed,  add the following to the <code>\"compilerOptions\"</code> section of your project's <code>tsconfig.json</code>.</p>\n\n</li>\n</ol>\n<code-example language=\"json\" header=\"tsconfig.json\">\n  \"plugins\": [\n      {\"name\": \"@angular/language-service\"}\n  ]\n\n</code-example>\n<ol start=\"4\">\n<li>\n<p translation-result=\"on\">在编辑器的用户首选项（<code>Cmd+,</code> 或 <code>Ctrl+,</code>）中，添加以下内容：</p><p translation-origin=\"off\">In your editor's user preferences (<code>Cmd+,</code> or <code>Ctrl+,</code>), add the following:</p>\n\n</li>\n</ol>\n<code-example language=\"json\" header=\"Sublime Text user preferences\">\n\"typescript-tsdk\": \"<path to=\"\" your=\"\" folder=\"\">/node_modules/typescript/lib\"\n</path></code-example>\n<p translation-result=\"on\">这样就能让 Angular 语言服务提供 <code>.ts</code> 文件中的诊断与自动补全信息。</p><p translation-origin=\"off\">This allows the Angular Language Service to provide diagnostics and completions in <code>.ts</code> files.</p>\n\n<h2 id=\"how-the-language-service-works\" translation-result=\"on\">语言服务的工作原理<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/language-service#how-the-language-service-works\"><i class=\"material-icons\">link</i></a></h2><h2 translation-origin=\"off\" id=\"how-the-language-service-works\">How the Language Service works<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/language-service#how-the-language-service-works\"><i class=\"material-icons\">link</i></a></h2>\n\n<p translation-result=\"on\">当你将编辑器与语言服务一起使用时，该编辑器将启动一个单独的语言服务进程，并使用<a href=\"https://microsoft.github.io/language-server-protocol/\">语言服务协议</a>通过 <a href=\"https://en.wikipedia.org/wiki/Remote_procedure_call\">RPC</a> 与之通信。当你输入编辑器时，编辑器会将信息发送到语言服务流程，以跟踪你的项目状态。</p><p translation-origin=\"off\">When you use an editor with a language service, the editor starts a separate language-service process\nand communicates with it through an <a href=\"https://en.wikipedia.org/wiki/Remote_procedure_call\">RPC</a>, using the <a href=\"https://microsoft.github.io/language-server-protocol/\">Language Server Protocol</a>.\nWhen you type into the editor, the editor sends information to the language-service process to\ntrack the state of your project.</p>\n\n<p translation-result=\"on\">当你触发模板中的完成列表时，编辑器首先将模板解析为 HTML <a href=\"https://en.wikipedia.org/wiki/Abstract_syntax_tree\">抽象语法树（AST）</a>。Angular 编译器解释这棵树以确定上下文：模板属于哪个模块，当前作用域，组件选择器以及光标在模板 AST 中的位置。然后，它就可以确定可能位于该位置的符号。</p><p translation-origin=\"off\">When you trigger a completion list within a template, the editor first parses the template into an\nHTML <a href=\"https://en.wikipedia.org/wiki/Abstract_syntax_tree\">abstract syntax tree (AST)</a>.\nThe Angular compiler interprets that tree to determine the context: which module the template is part of, the current scope, the component selector, and where your cursor is in the template AST. It can then determine the symbols that could potentially be at that position..</p>\n\n<p translation-result=\"on\">如果你要进行插值，则需要更多的精力。如果你在 <code>div</code> 有 <code>{{data.---}}</code> 的插值，并且在 <code>data.---</code> 之后需要自动补全列表，则编译器无法使用 HTML AST 查找答案。HTML AST 只能告诉编译器某些文本带有字符 “<code>{{data.---}}</code>”。\n那时模板解析器会生成一个表达式 AST，该表达式位于模板 AST 中。然后，Angular 语言服务会在其上下文中查找 <code>data.---</code>，询问 TypeScript 语言服务 <code>data</code> 的成员是什么，并返回可能性列表。</p><p translation-origin=\"off\">It's a little more involved if you are in an interpolation.\nIf you have an interpolation of <code>{{data.---}}</code> inside a <code>div</code> and need the completion list after <code>data.---</code>, the compiler can't use the HTML AST to find the answer.\nThe HTML AST can only tell the compiler that there is some text with the characters \"<code>{{data.---}}</code>\".\nThat's when the template parser produces an expression AST, which resides within the template AST.\nThe Angular Language Services then looks at <code>data.---</code> within its context, asks the TypeScript Language Service what the members of <code>data</code> are, and returns the list of possibilities.</p>\n\n<hr>\n<h2 id=\"more-information\" translation-result=\"on\">更多信息<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/language-service#more-information\"><i class=\"material-icons\">link</i></a></h2><h2 translation-origin=\"off\" id=\"more-information\">More information<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/language-service#more-information\"><i class=\"material-icons\">link</i></a></h2>\n\n<ul>\n<li>\n<p translation-result=\"on\">  有关该实现的更多详细信息，请参阅 <a href=\"https://github.com/angular/angular/blob/master/packages/language-service/src/types.ts\">Angular 语言服务 API</a>。</p><p translation-origin=\"off\">For more in-depth information on the implementation, see the\n<a href=\"https://github.com/angular/angular/blob/master/packages/language-service/src/types.ts\">Angular Language Service API</a>.</p>\n\n</li>\n<li>\n<p translation-result=\"on\">有关此设计注意事项和意图的更多信息，请参见<a href=\"https://github.com/angular/vscode-ng-language-service/wiki/Design\">此处的设计文档</a>。</p><p translation-origin=\"off\">For more on the design considerations and intentions, see <a href=\"https://github.com/angular/vscode-ng-language-service/wiki/Design\">design documentation here</a>.</p>\n\n</li>\n<li>\n<p translation-result=\"on\">另请参阅 <a href=\"https://www.ng-conf.org/\">ng-conf</a> 2017 上 <a href=\"https://www.youtube.com/watch?v=ez3R0Gi4z5A&#x26;t=368s\">Chuck Jazdzewski</a> 关于 Angular 语言服务的 <a href=\"https://www.youtube.com/watch?v=ez3R0Gi4z5A&#x26;t=368s\">演讲</a>。</p><p translation-origin=\"off\">See also <a href=\"https://www.youtube.com/watch?v=ez3R0Gi4z5A&#x26;t=368s\">Chuck Jazdzewski's presentation</a> on the Angular Language Service from <a href=\"https://www.ng-conf.org/\">ng-conf</a> 2017.</p>\n\n</li>\n</ul>\n\n</div>\n\n<!-- links to this doc:\n-->\n<!-- links from this doc:\n - guide/language-service#angular-language-service\n - guide/language-service#angular-language-service-in-your-editor\n - guide/language-service#autocompletion\n - guide/language-service#error-checking\n - guide/language-service#features\n - guide/language-service#how-the-language-service-works\n - guide/language-service#more-information\n - guide/language-service#quick-info-and-navigation\n - guide/language-service#sublime-text\n - guide/language-service#visual-studio-code\n - guide/language-service#webstorm\n - https://code.visualstudio.com/\n - https://en.wikipedia.org/wiki/Abstract_syntax_tree\n - https://en.wikipedia.org/wiki/Remote_procedure_call\n - https://github.com/angular/angular-cn/edit/aio/aio/content/guide/language-service.md?message=docs%3A%20请简述你的修改...\n - https://github.com/angular/angular/blob/master/packages/language-service/src/types.ts\n - https://github.com/angular/vscode-ng-language-service/wiki/Design\n - https://marketplace.visualstudio.com/items?itemName=Angular.ng-template\n - https://microsoft.github.io/language-server-protocol/\n - https://www.jetbrains.com/webstorm\n - https://www.jetbrains.com/webstorm/\n - https://www.ng-conf.org/\n - https://www.sublimetext.com/\n - https://www.youtube.com/watch?v=ez3R0Gi4z5A&t=368s\n-->"
}