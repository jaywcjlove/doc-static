{"componentChunkName":"component---src-templates-documentation-tsx","path":"/docs/handbook/declaration-files/dts-from-js.html","result":{"data":{"markdownRemark":{"id":"ef8a071f-404c-5034-b1d4-95c168699247","excerpt":"With TypeScript 3.7,\nTypeScript added support for generating .d.ts files from JavaScript using JSDoc syntax. This set up means you can own the editor experience…","html":"<p><a href=\"/docs/handbook/release-notes/typescript-3-7.html#--declaration-and---allowjs\">With TypeScript 3.7</a>,\nTypeScript added support for generating .d.ts files from JavaScript using JSDoc syntax.</p>\n<p>This set up means you can own the editor experience of TypeScript-powered editors without porting your project to TypeScript, or having to maintain .d.ts files in your codebase.\nTypeScript supports most JSDoc tags, you can find <a href=\"/docs/handbook/type-checking-javascript-files.html#supported-jsdoc\">the reference here</a>.</p>\n<h2 id=\"setting-up-your-project-to-emit-dts-files\" style=\"position:relative;\"><a href=\"#setting-up-your-project-to-emit-dts-files\" aria-label=\"setting up your project to emit dts files permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Setting up your Project to emit .d.ts files</h2>\n<p>To add creation of .d.ts files in your project, you will need to do up-to four steps:</p>\n<ul>\n<li>Add TypeScript to your dev dependencies</li>\n<li>Add a <code>tsconfig.json</code> to configure TypeScript</li>\n<li>Run the TypeScript compiler to generate the corresponding d.ts files for JS files</li>\n<li>(optional) Edit your package.json to reference the types</li>\n</ul>\n<h3 id=\"adding-typescript\" style=\"position:relative;\"><a href=\"#adding-typescript\" aria-label=\"adding typescript permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Adding TypeScript</h3>\n<p>You can learn how to do this in our <a href=\"/download\">installation page</a>.</p>\n<h3 id=\"tsconfig\" style=\"position:relative;\"><a href=\"#tsconfig\" aria-label=\"tsconfig permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>TSConfig</h3>\n<p>The TSConfig is a jsonc file which configures both your compiler flags, and declare where to find files.\nIn this case, you will want a file like the following:</p>\n<pre class=\"shiki\"><div class=\"language-id\">json</div><div class='code-container'><code><span style=\"color: #000000\">{</span>\n<span style=\"color: #000000\">  </span><span style=\"color: #008000\">// Change this to match your project</span>\n<span style=\"color: #000000\">  </span><span style=\"color: #AF0B08\">include</span><span style=\"color: #000000\">: [</span><span style=\"color: #A31515\">\"src/**/*\"</span><span style=\"color: #000000\">],</span>\n\n<span style=\"color: #000000\">  </span><span style=\"color: #AF0B08\">compilerOptions</span><span style=\"color: #000000\">: {</span>\n<span style=\"color: #000000\">    </span><span style=\"color: #008000\">// Tells TypeScript to read JS files, as</span>\n<span style=\"color: #000000\">    </span><span style=\"color: #008000\">// normally they are ignored as source files</span>\n<span style=\"color: #000000\">    </span><span style=\"color: #AF0B08\">allowJs</span><span style=\"color: #000000\">: </span><span style=\"color: #0000FF\">true</span><span style=\"color: #000000\">,</span>\n<span style=\"color: #000000\">    </span><span style=\"color: #008000\">// Generate d.ts files</span>\n<span style=\"color: #000000\">    </span><span style=\"color: #AF0B08\">declaration</span><span style=\"color: #000000\">: </span><span style=\"color: #0000FF\">true</span><span style=\"color: #000000\">,</span>\n<span style=\"color: #000000\">    </span><span style=\"color: #008000\">// This compiler run should</span>\n<span style=\"color: #000000\">    </span><span style=\"color: #008000\">// only output d.ts files</span>\n<span style=\"color: #000000\">    </span><span style=\"color: #AF0B08\">emitDeclarationOnly</span><span style=\"color: #000000\">: </span><span style=\"color: #0000FF\">true</span><span style=\"color: #000000\">,</span>\n<span style=\"color: #000000\">    </span><span style=\"color: #008000\">// Types should go into this directory.</span>\n<span style=\"color: #000000\">    </span><span style=\"color: #008000\">// Removing this would place the .d.ts files</span>\n<span style=\"color: #000000\">    </span><span style=\"color: #008000\">// next to the .js files</span>\n<span style=\"color: #000000\">    </span><span style=\"color: #AF0B08\">outDir</span><span style=\"color: #000000\">: </span><span style=\"color: #A31515\">\"dist\"</span><span style=\"color: #000000\">,</span>\n<span style=\"color: #000000\">  },</span>\n<span style=\"color: #000000\">}</span></code></div></pre>\n<p>You can learn more about the options in the <a href=\"/reference\">tsconfig reference</a>.\nAn alternative to using a TSConfig file is the CLI, this is the same behavior as a CLI command.</p>\n<pre class=\"shiki\"><div class=\"language-id\">sh</div><div class='code-container'><code><span style=\"color: #000000\">npx typescript src/**/*.js --declaration --allowJs --emitDeclarationOnly --outDir types</span></code></div></pre>\n<h2 id=\"run-the-compiler\" style=\"position:relative;\"><a href=\"#run-the-compiler\" aria-label=\"run the compiler permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Run the compiler</h2>\n<p>You can learn how to do this in our <a href=\"/download\">installation page</a>.\nYou want to make sure these files are included in your package if you have the files in your project’s <code>.gitignore</code>.</p>\n<h2 id=\"editing-the-packagejson\" style=\"position:relative;\"><a href=\"#editing-the-packagejson\" aria-label=\"editing the packagejson permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Editing the package.json</h2>\n<p>TypeScript replicates the node resolution for modules in a <code>package.json</code>, with an additional step for finding .d.ts files.\nRoughly, the resolution will first check the optional <code>\"types\"</code> field, then the <code>\"main\"</code> field, and finally will try <code>index.d.ts</code> in the root.</p>\n<table>\n<thead>\n<tr>\n<th align=\"left\">Package.json</th>\n<th align=\"left\">Location of default .d.ts</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"left\">No “types” field</td>\n<td align=\"left\">checks “main”, then index.d.ts</td>\n</tr>\n<tr>\n<td align=\"left\">“types”: “main.d.ts”</td>\n<td align=\"left\">main.d.ts</td>\n</tr>\n<tr>\n<td align=\"left\">“types”: “./dist/main.js”</td>\n<td align=\"left\">./main/main.d.ts</td>\n</tr>\n</tbody>\n</table>\n<p>If absent, then “main” is used</p>\n<table>\n<thead>\n<tr>\n<th align=\"left\">Package.json</th>\n<th align=\"left\">Location of default .d.ts</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"left\">No “main” field</td>\n<td align=\"left\">index.d.ts</td>\n</tr>\n<tr>\n<td align=\"left\">“main”:“index.js”</td>\n<td align=\"left\">index.d.ts</td>\n</tr>\n<tr>\n<td align=\"left\">“main”:“./dist/index.js”</td>\n<td align=\"left\">./dist/index.d.ts</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"tips\" style=\"position:relative;\"><a href=\"#tips\" aria-label=\"tips permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Tips</h2>\n<p>If you’d like to write tests for your .d.ts files, try <a href=\"https://github.com/SamVerschueren/tsd\">tsd</a>.</p>","headings":[{"value":"Setting up your Project to emit .d.ts files","depth":2},{"value":"Adding TypeScript","depth":3},{"value":"TSConfig","depth":3},{"value":"Run the compiler","depth":2},{"value":"Editing the package.json","depth":2},{"value":"Tips","depth":2}],"frontmatter":{"permalink":"/docs/handbook/declaration-files/dts-from-js.html","title":"Creating .d.ts Files from .js files","disable_toc":null,"handbook":null,"oneline":"How to add d.ts generation to JavaScript projects","beta":null}},"prev":{"childMarkdownRemark":{"frontmatter":{"title":"JSDoc Reference","oneline":"What JSDoc does TypeScript-powered JavaScript support?","permalink":"/docs/handbook/jsdoc-supported-types.html"}}},"next":null},"pageContext":{"id":"6creating-.d.ts-files-from-.js-files","slug":"/docs/handbook/declaration-files/dts-from-js.html","repoPath":"/packages/documentation/copy/en/javascript/Creating DTS files From JS.md","previousID":"918a1662-3016-5137-a1c2-bf20aadff17e","lang":"en","modifiedTime":"2020-11-23T10:39:15.615Z"}},"staticQueryHashes":[]}